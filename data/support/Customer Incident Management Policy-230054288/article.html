<p><i>Understand how Cloudflare deals with incidents impacting its production environment and the ways in which Cloudflare communicates the nature and impact of these incidents to Enterprise customers.</i></p>
<div class="cf-toc">
	<ul>
		<li><a href="#3rV4sUyhdX7I3KC9DsDvUr">Purpose</a></li>
		<li><a href="#12DxE1zcBkfz4muhFDho4J">Scope</a></li>
		<li><a href="#5coUTH4EKEV7XqgRkngYAp">Background</a></li>
		<li><a href="#5vg5A5jZwCXNCeKo4r6Br4">Definitions</a></li>
		<li><a href="#5I77UquXYRjNaghvpb4YhK">Roles and responsibilities</a></li>
		<li><a href="#4CJfHsmInmhfTU4K4OABf3">Standard Operating Procedure</a></li>
		<li><a href="#fXaJvsi2CBFK0qq8FWfHV">Incident Management</a></li>
		<li><a href="#7D4vKRgLGXnSz5f9hl9EOS">Incident Communications</a></li>
		<li><a href="#201RvoYCG2gOIwlfJ2Dv9S">Post-Mortem reviews </a></li>
		<li><a href="#1QVhYtAJgpBZgk2aIU4m4i">Problem review</a></li>
	</ul>
</div>
<hr>
<h2 id="3rV4sUyhdX7I3KC9DsDvUr">Purpose</h2>
<p>Cloudflare believes that openness and transparency are intrinsic to the delivery of our service, and is dedicated to establishing the trust of our customers and of the Internet community at large.  Cloudflare operates a global network which impacts the lives and prosperity of hundreds of millions of people, and we are therefore extremely mindful of that responsibility.</p>
<p>This Standard Operating Procedure (SOP) defines how Cloudflare deals with all incidents and problems impacting its production environment and the ways in which Cloudflare communicates the nature and impact of these incidents to Enterprise customers, both planned and unplanned, regardless of severity.  This procedure specifies how these efforts are uniformly followed in order to</p>
<ul>
	<li>maximize environment uptime,</li>
	<li>minimize client impact,</li>
	<li>reduce the time to repair, and</li>
	<li>share information with our customers and the Internet community.</li>
</ul>
<p></p>
<hr>
<h2 id="12DxE1zcBkfz4muhFDho4J">Scope</h2>
<p>This SOP applies to Cloudflare customers and customer services as consumed by customers. The SOP is applicable to all customer production environments at Cloudflare including:</p>
<ul>
	<li>Cloudflare’s public website (<a href="http://www.cloudflare.com/">www.cloudflare.com</a>)</li>
	<li>Cloudflare’s APIs (Application Programming Interfaces)</li>
	<li>Outbound third-party interfaces (e.g. credit card authorizations, etc.)</li>
	<li>Network infrastructure owned or managed by Cloudflare for production services</li>
	<li>Vendor software, hardware and services that affect any part of Cloudflare production</li>
</ul>
<p></p>
<hr>
<h2 id="5coUTH4EKEV7XqgRkngYAp">Background</h2>
<p>Cloudflare wants to build a better Internet. In order to deliver an improved experience to millions of Internet users, Cloudflare’s internal operations must follow excellent service delivery processes and procedures.  Cloudflare’s procedures therefore follow many industry-standard best practices, some of which specifically follow patterns of the Information Library Infrastructure Technology (ITIL).  This SOP follows the best practices of the ITIL Problem Management methodology.</p>
<hr>
<h2 id="5vg5A5jZwCXNCeKo4r6Br4">Definitions</h2>
<p>Categories of key incident terms:  All events are conditions which can instigate alerts;  some alerts are incidents of note (and some are not);  all incidents must be triaged (sometimes through automation, sometimes through human interaction);  some incidents are problems;  some subset of problems are "major" and instigate Status Page updates;  some major incidents have a high priority (P1) which requires the creation of an Incident Report.</p>
<p>Key terminology:</p>
<p><b>Event</b></p>
<p>Any identifiable and discrete thing which can be logged by one of Cloudflare’s production applications or systems</p>
<p><b>Alert</b></p>
<p>An event of potential interest which is identified and communicated via one of Cloudflare’s monitoring systems</p>
<p><b>Incident</b></p>
<p>A report or alert which has a high probability of affecting Cloudflare’s production systems, or an alert condition which only exists for a short period of time because the affected service is restored to health before a Problem condition is identified</p>
<p><b>Problem</b></p>
<p>An identified and categorized incident which has a negative impact on the optimal health and/or performance of Cloudflare’s production systems or applications</p>
<p><b>Incident Report</b></p>
<p>A public report which describes the nature of a service Problem, Cloudflare’s overall response to the Problem, and efforts to reduce or eliminate future impact</p>
<p><b>Post Mortem Review</b></p>
<p>A review meeting initiated in response to severe and/or critical Problem.  All Post Mortem meetings focus on the details of an Incident Report generated by a Cloudflare engineer with skills or experience appropriately suited to address to the nature of the Problem.</p>
<p><b>SRE</b></p>
<p>The Systems Reliability Engineers are the group responsible for the first-level support of all incidents</p>
<p><b>CSUP</b></p>
<p>The Customer Support group is the team responsible for responding to all customer-generated requests, and for all customer communications during any identified Problem.</p>
<p><b>JIRA</b></p>
<p>Cloudflare ticketing system used for the tracking of incidents, work orders and problems</p>
<p><b>Severity / Priority Level</b></p>
<p>Value of “P0, P1, P2 or P3” based on the severity of Problem impacting the Cloudflare network and customers</p>
<p><b>SLA</b></p>
<p>Service Level Agreement – internal or contractual obligation for a specific level of service (usually measured in actions per unit of time)</p>
<p><b>SLO</b></p>
<p>Service Level Objective – internal or contractual objective for a specific level of service (usually measured in actions per unit of time)</p>
<p><b>Incident Commander</b></p>
<p>Cloudflare resource responsible for ensuring the Problem is being addressed properly, time is being kept, escalations are being made, clients are being updated, and that resources are being engaged as needed</p>
<p><b>The Internet Community</b></p>
<p>Cloudflare’s primary stakeholder group.  Cloudflare secures and optimizes over 4,600,000 websites, and the average Internet user interacts with Cloudflare websites over 500 times per week.</p>
<p><b>Third Party</b></p>
<p>Non-Cloudflare vendor or service provider who partners with CloudFlare in the delivery of systems or services to the client</p>
<p><b>Stakeholder</b></p>
<p>Person, group or company that is affected by an incident either as the provider (e.g. Cloudflare person, third party) or consumer (client)</p>
<p><b>RCA</b></p>
<p>Root Cause Analysis – Thorough review of the underlying cause of a problem</p>
<p><b>Remediation</b></p>
<p>All necessary steps to resolve the root cause of a problem and ensure that it will not happen again</p>
<p><b>Status Page</b></p>
<p>The primary tool which Cloudflare uses to publicly share information about its service delivery and any Incidents or Problems impacting Cloudflare services:<a href="https://www.cloudflarestatus.com/"> https://www.cloudflarestatus.com</a></p>
<p>The Status Page is hosted by a Third Party (<a href="http://statuspage.io/">Statuspage.io</a>) which is not dependent on Cloudflare’s services for operation.</p>
<hr>
<h2 id="5I77UquXYRjNaghvpb4YhK">Roles and responsibilities</h2>
<p>The following roles and responsibilities are associated with the management of incidents within Cloudflare: </p>
<p><b>Cloudflare Management</b></p>
<p>Review and approve procedures. Ensure that all staff members are trained on procedures. Notify customers and third parties, as necessary, of their role in procedures. Initiate and oversee Post Mortem Reviews for critical Incident Reports.</p>
<p><b>On-call SRE</b></p>
<p>One or more SREs who are assigned for on-call shifts to respond to all critical alerts. Identifies and responds to an Incident, assesses and classifies the severity of the Incident, and potentially escalates an impacting Incident as a Problem. Act as escalations and administration of the issue from start to finish.</p>
<p><b>On-call Network Engineers</b></p>
<p>One or more Network Engineers who are assigned for on-call shifts to respond to critical alerts. Coordinates with the SRE team, who provide the primary Incident Manager during any identified problem.</p>
<p><b>On-call CSUP</b></p>
<p>One or more CSUP engineers who are assigned for shifts to respond to all customer requests. Responsible for all customer communications during all identified Problems. Responsible for communicating all planned maintenance.</p>
<p><b>SRE Team</b></p>
<p>The overall Systems Reliability Engineering team who support the efforts of the on-call SREs. Assume the role of Incident Manager during an identified problem. Implement appropriate Cloudflare-supported production changes to resolve issues.</p>
<p><b>Cloudflare Engineering Teams (DBA, Network, nginx, Security, etc.)</b></p>
<p>Support the Incident Manager during problem resolution. Join bridge calls, if requested. Ensure documentation is captured while diagnosing and correcting issues and proper escalation to other responsible groups is executed. Participate in Post Mortem reviews of some Incident Reports, as requested by Cloudflare Management.</p>
<hr>
<h2 id="4CJfHsmInmhfTU4K4OABf3">Standard Operating Procedure</h2>
<p>This section details the procedures for incident and problem management.  At a high-level, these processes relate as follows:</p>
<ul>
	<li>Incident Management:  The overall process for observing and responding to alerts, including: assessing the potential impact and severity of an Incident, classifying the Incident as a Problem, assigning a priority to the Problem, or dismissing the Incident as a non-impacting event if a problem condition cannot be identified.</li>
</ul>
<ul>
	<li>Problem Management:  The process of identifying the scope and extent of a Problem, assigning an appropriate severity level (P0, P1, P2, P3),  the actions to resolve the Problem and restore the optimal state for production services, and the communication of the Problem to appropriate parties.</li>
</ul>
<ul>
	<li>Resolution Management:  The process of investigating the causes and conditions which lead to a problem condition, reporting on the overall manner by which a problem was managed and resolved, and any subsequent analysis of how the conditions and causes of a problem may be prevented in the future. </li>
</ul>
<p></p>
<hr>
<h2 id="fXaJvsi2CBFK0qq8FWfHV">Incident Management</h2>
<p>The primary goal of Incident Management is to identify and react to potential problems as quickly as possible, and thereby minimize impact to production services and provide the best possible levels of service quality and availability.  The best possible levels of service quality and availability would be that all services operated exactly as designed 100% of the time, and were available and accessible 100% of the time.</p>
<p>Because we accept that a combination of forces within our control, and forces beyond our control, will eventually impact service health, we define Service Level Objectives (SLOs), and Service Level Agreements (SLAs), to describe what degradations in service health are acceptable for various services within Cloudflare’s network.   SLAs and SLOs are expressed as percentages of periods of time (monthly and annually.)</p>
<p>The level of information given about an incident may vary, but the following information must be collected before an incident is classified and prioritized:</p>
<ul>
	<li>Submitter Source (monitoring alert or alternate source)</li>
	<li>Customer(s) (if applicable)</li>
	<li>System or application (and hostname, if applicable)</li>
	<li>Time of alert</li>
	<li>Scope of impact:  estimated number of systems, users, or regions impacted</li>
	<li>Type of impact:  general scope of service impairment (e.g., loss of all access, degraded performance, dependent applications impacted, observed customer impact)</li>
</ul>
<p>All Incidents which are classified as Problems, regardless of source, which have a priority of P0 or P1, will be logged within the Cloudflare ticketing system, JIRA.  Some alerts will indicate conditions which may not be immediately impacting to service levels, and as necessary, will be categorized as Problems with a P2 or P3 priority.   </p>
<p>The JIRA system is the system of record for all  incident information, and all other sources of documentation regarding a Problem (e.g. alert history, screen-shots, work logs, chat conversations) are attached to the original JIRA ticket created in response to an Incident.</p>
<h3>Incident Classifications</h3>
<p>After acknowledging an alert, SRE immediately triages the alert by correlating it to a category and priority level.  When creating new JIRA tickets for high priority (P0 and P1) Problems, SRE will ensure that each ticket is classified correctly by including its Category and Priority.  </p>
<h3>Priority Level</h3>
<p>All tickets will be categorized according to the following 4 levels of priority.  The criteria listed are general guidelines.   Conditions described below should explicitly define a priority level; however at the discretion of SRE or Cloudflare management, problems may be assigned a higher level of priority, as needed:</p>
<p><b>P0</b></p>
<ul>
	<li>Complete loss of access to the Cloudflare application or API.</li>
	<li>Degraded access to the Cloudflare application or API (⪯ 98% as measured worldwide or from any major region).</li>
	<li>Complete loss of access to, or major performance degradation to, a Tier-1 Data Center.</li>
	<li>Degraded performance of any Tier-1 global transit provider (⪰ 20% packet loss worldwide or 30% packet loss from any major region).</li>
	<li>Degraded access to or performance of any critical system.</li>
</ul>
<p><b>P1</b></p>
<ul>
	<li>Intermittent or degraded Site-wide performance degradation.</li>
	<li>Loss of an important function such as reporting.</li>
	<li>Loss of access to the Cloudflare application from one of the social media or external CloudFlare websites</li>
	<li>Outage to important outbound third-party interface.</li>
	<li>Inoperability of the site for one of the enterprise clients or distribution partners.</li>
	<li>Corruption or loss of customer data.</li>
</ul>
<p><b>P2</b></p>
<ul>
	<li>Sporadic or localized performance issue.</li>
	<li>System issues with no noticeable client impact yet (e.g. high CPU).</li>
	<li>Single client outage/degradation.</li>
</ul>
<p><b>P3</b></p>
<ul>
	<li>Operational issues, procedural problems or service requests that have little or no effect on end-users and can be handled on an as-available basis.</li>
	<li>The default severity assigned to all tickets that have not yet been reviewed or assigned a severity level.</li>
</ul>
<h3>
	Category</h3>
<p>For proper tracking and communications, high priority (P0 and P1) problems will be assigned to categories. These categories (ticket labels) correspond to the publicly communicated categories which are listed on Cloudflare’s public Status Page.   </p>
<p>Lower priority (P2 and P3) tickets may be categorized using labels and nomenclature which are specific to various Engineering and Non-engineering teams within Cloudflare.  These various labels and categories are not listed on this document.  </p>
<h3>Security and Privacy Incidents</h3>
<p>It is critical to understand that incidents that are classified under the categories of Security and Privacy require special handling and procedures. Customers should report these incidents directly to Cloudflare by <a href="https://support.cloudflare.com/hc/en-us/articles/200172476-Contacting-Cloudflare-Support">Contacting Cloudflare Support</a>, who will follow specified incident procedures as defined by the Cloudflare Security &amp; Privacy teams.</p>
<h3>High Severity / Priority Incidents</h3>
<p>P0 and P1 incidents obviously have more impact to the business and therefore, have some special upfront requirements to ensure that they are handled in the most expeditious fashion possible.</p>
<h3>Incident Manager</h3>
<p>For all P0 and P1 issues, the on-duty Incident Manager should be contacted immediately.  A schedule of incident managers will be posted to ensure that SRE knows who to contact at any given time.  The incident manager is a critical resource responsible for the following:</p>
<ul>
	<li>Validation of the severity of an issue</li>
	<li>Tracking of the issue from submission to resolution</li>
	<li>Representation of clients’ best interest</li>
	<li>Logging of all actions and times</li>
	<li>Direction of personnel toward the fastest possible resolution</li>
	<li>Ensuring that clients and internal management are notified of status according to pre-determined time periods (or upon change in status)</li>
	<li>Performing client, internal or third-party escalations when time limits are being exceeded or appropriate progress is not being made</li>
	<li>Ensuring that a meaningful explanation is applied to the ticket upon resolution</li>
	<li>Making certain that the initial submitter agrees that the issue is resolved before the ticket is closed </li>
</ul>
<p></p>
<hr>
<h2 id="7D4vKRgLGXnSz5f9hl9EOS">Incident Communications</h2>
<p>External communications during an incident are critical for:</p>
<ul>
	<li>Notifying the stakeholders that Cloudflare is aware of the issue and is pursuing resolution</li>
	<li>Reassuring clients that the matter is under review and that Cloudflare is looking out for their best interests</li>
	<li>Issues do not drag on unnecessarily and appropriate escalations are being made</li>
	<li>Informing key internal stakeholders of important incidents</li>
</ul>
<p>Major types of communications during an incident include:</p>
<ul>
	<li><a href="https://www.cloudflarestatus.com/">StatusPage</a></li>
	<li><a href="https://support.cloudflare.com/hc/articles/200172476">Support tickets</a></li>
	<li>Incident Reports </li>
</ul>
<p>Status Page will be created using templates by CSUP team member on-call as soon as an incident is identified.</p>
<hr>
<h2 id="201RvoYCG2gOIwlfJ2Dv9S">Post-Mortem reviews </h2>
<p>Cloudflare believes that all critical problems should never recur.  To that end, all P0 problems will instigate the publication of an Incident Report (IR), which includes a Root Cause Analysis (RCA) of the problem and the overall factors which lead up to the Incident. All IR publications will be followed by a Post Mortem meeting, a meeting in which engineers and managers review and agree upon the details of the IR,  the conclusions of the RCA, and any follow-up remediation steps which will be taken to ensure that the problem condition(s) do not recur.</p>
<h3>Problem Management and Post-Mortem</h3>
<p>Problem Management differs from Incident Management in that its main goal is the detection of the underlying causes of an Incident and their subsequent resolution and prevention.</p>
<h3>
	Root Cause Analysis and Remediation</h3>
<h4><b>Problem Ticket</b></h4>
<p>An RCA is a Root Cause Analysis report.  A Jira Problem ticket is the logging and tracking of events that may warrant an RCA.  This is a process by which the subject matter experts (SME) for an area will review a P0 or P1 issue searching for the underlying cause of the issue.  Once this is determined, the SMEs need to create a remediation plan to address the cause(s).  The ultimate deliverable is a well-documented ticket to track the remediation to completion and, if required, a well-written incident report to be sent to an internal team and/or client.</p>
<p>The above points are still applicable even if it is a third party provider or vendor supplying the RCA.  When the RCA information is received from a third party, we must ensure that the Problem ticket is updated with all relevant information including outstanding remediations to be tracked.  </p>
<h4><b>IR Report</b></h4>
<p>The Incident Report (“IR”) is the primary method of communication to the client on an issue and may contain some or all parts of what is written within the ticket.  </p>
<p>The person writing the report will vary depending on the severity of the issue and the responsible area.  Upon completion of the draft report, it is critical to ensure that the report is reviewed by Cloudflare management for content, commitments and professional presentation.  Once the report is approved it may be published to the client.</p>
<hr>
<h2 id="1QVhYtAJgpBZgk2aIU4m4i">Problem review</h2>
<p>The above sections have detailed the handling of the incident and the root cause process for ensuring permanent remediation.  The last part of the incident and problem management process is to ensure that key metrics, trends and reporting are done to ensure that the process is being followed correctly, SLAs are being met and below-the-surface issues are not being missed.</p>
<h3>Reporting</h3>
<p>The ticket criteria that need to be reported for both open and closed tickets include the following:</p>
<ul>
	<li>Severity</li>
	<li>Category/Sub-category</li>
	<li>Responsible Group</li>
	<li>Age/Days Open</li>
</ul>
<p>Wherever possible, this data should be reported graphically to show visible trends.  These reports should be published to internal Cloudflare managers and area owners.<b></b></p>
<h3>Analysis and Accountability</h3>
<p>Each area owner for tickets will be responsible for not only ensuring that their tickets are closed within prescribed or reasonable time frames, but also reviewing the reports and looking for trends, concerns and repeat issues.  Based on this analysis, further Problem tickets should be opened to remediate any issues that may not have surfaced via a P0 or P1.  This will allow continuous improvement and should ultimately reduce new ticket counts by further dealing with root causes.</p>
<h3>Incident Management Review Meetings (Post-mortem)</h3>
<p>As part of all departmental staff meetings, group managers should be reviewing the ticket open and trending reports with the following objectives:</p>
<ul>
	<li>Discussion of areas of success or concern</li>
	<li>Review of opportunities for improvement by the area owners</li>
	<li>Agreement on areas that warrant a new Problem ticket to be opened for remediation tracking</li>
</ul>
<p></p>