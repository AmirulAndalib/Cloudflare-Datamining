{
	"locale": "en-us",
	"post": {
		"access": true,
		"authors": [
			{
				"id": "5d1644b141acde0011a94f6e",
				"name": "Junade Ali",
				"slug": "junade-ali",
				"profile_image": "http://blog.cloudflare.com/content/images/2017/03/G1VwuaxB.jpg",
				"cover_image": "http://blog.cloudflare.com/content/images/2018/08/general@2x-8.png",
				"bio": null,
				"website": null,
				"location": null,
				"facebook": null,
				"twitter": "@IcyApril",
				"meta_title": null,
				"meta_description": null,
				"url": "http://blog.cloudflare.com/author/junade-ali/"
			}
		],
		"canonical_url": null,
		"codeinjection_foot": null,
		"codeinjection_head": null,
		"comment_id": "5b4940d5bdf1fc00bf809f26",
		"comments": false,
		"created_at": "2018-07-14T01:16:21.000+01:00",
		"custom_excerpt": "Back in April, I wrote about how it was possible to modify a router to encrypt DNS queries over TLS using Cloudflare's 1.1.1.1 DNS Resolver and a GL.iNet router; the folks at GL.iNet read that blog post and decided to bake DNS-Over-TLS support into their new router using the 1.1.1.1 resolver.",
		"custom_template": null,
		"email_subject": null,
		"excerpt": "Back in April, I wrote about how it was possible to modify a router to encrypt DNS queries over TLS using Cloudflare's 1.1.1.1 DNS Resolver and a GL.iNet router; the folks at GL.iNet read that blog post and decided to bake DNS-Over-TLS support into their new router using the 1.1.1.1 resolver.",
		"feature_image": "http://blog.cloudflare.com/content/images/2018/07/Screen-Shot-2018-07-14-at-04.36.11-1.png",
		"feature_image_alt": null,
		"feature_image_caption": null,
		"featured": false,
		"frontmatter": null,
		"html": "<!--kg-card-begin: markdown--><p><img src=\"http://blog.cloudflare.com/content/images/2018/07/IMG_4277.jpg\" alt=\"GL.iNet GL-AR750S\" loading=\"lazy\"><small>GL.iNet GL-AR750S in black, same form-factor as the prior white GL.iNet GL-AR750. Credit card for comparison.</small></p>\n<p>Back in April, I wrote about how it was possible to <a href=\"http://blog.cloudflare.com/dns-over-tls-for-openwrt/\">modify a router to encrypt DNS queries over TLS</a> using Cloudflare's 1.1.1.1 DNS Resolver. For this, I used the GL.iNet GL-AR750 because it was pre-installed with OpenWRT (LEDE). The folks at GL.iNet read that blog post and decided to bake DNS-Over-TLS support into their new router using the 1.1.1.1 resolver, they sent me one to take a look at before it's available for pre-release. Their new router can also be configured to force DNS traffic to be encrypted before leaving your local network, which is particularly useful for any IoT or mobile device with hard-coded DNS settings that would ordinarily ignore your routers DNS settings and send <a href=\"https://www.cloudflare.com/learning/dns/what-is-dns/\">DNS queries</a> in plain-text.</p>\n<p><img src=\"http://blog.cloudflare.com/content/images/2018/07/Screen-Shot-2018-07-14-at-04.36.11.png\" alt=\"DNS over TLS from Cloudflare enabled\" loading=\"lazy\"></p>\n<p>In <a href=\"http://blog.cloudflare.com/dns-over-tls-for-openwrt/\">my previous blog post</a> I discussed how DNS was often the weakest link in the chain when it came to browsing privacy; whilst HTTP traffic is increasingly encrypted, this is seldom the case for DNS traffic. This makes it relatively trivial for an intermediary to work out what site you're sending traffic to. In that post, I went through the technical steps required to modify a router using OpenWRT to support DNS Privacy using the DNS-Over-TLS protocol.</p>\n<p>GL.iNet were in contact since I wrote the original blog post and very supportive of encrypting DNS queries at the router level. Last week whilst working in Cloudflare's San Francisco office, they reached out to me over Twitter to let me know they were soon to launch a new product with a new web UI containing a &quot;DNS over TLS from Cloudflare&quot; feature and offered to send me the new router before it was even available for pre-order.</p>\n<p>On arrival back to our London office, I found a package from Hong Kong waiting for me. Aside from the difference in colour, the AR750<strong>S</strong> itself is identical in form-factor to the AR750 and was packaged up very similarly. They both have capacity for external storage, an OpenVPN client and can be powered over USB; amongst many other useful functionalities. Alongside the <em>S</em> suffixing the model number, I did notice the new model had some upgraded specs, but I won't dwell on that here.</p>\n<p>Below you can see the white AR750 and the new black AR750S router together for comparison. Both have a WAN ethernet port, 2 LAN ethernet ports, a USB port for external storage (plus a micro SD port) and a micro USB power port.</p>\n<p><img src=\"http://blog.cloudflare.com/content/images/2018/07/IMG_4222-COLLAGE--1-.jpg\" alt=\"GL.iNet GL-AR750S\" loading=\"lazy\"></p>\n<p>The UI is where the real changes come. In the <em>More Settings</em> tab, there's an option to configure DNS with some nice options.</p>\n<p><img src=\"http://blog.cloudflare.com/content/images/2018/07/Screen-Shot-2018-07-14-at-03.46.56.png\" alt=\"GL.iNet GL-AR750S DNS\" loading=\"lazy\"></p>\n<p>One notable option is the <em>DNS over TLS from Cloudflare</em> toggle. This option uses the TLS security protocol for encrypting DNS queries, helping increase privacy and prevent eavesdropping.</p>\n<p>Another option, <em>Override DNS Settings for All Clients</em>, forcibly overrides the DNS configuration on all clients so that queries are encrypted to the WAN. Unencrypted DNS traffic is intercepted by the router, and by forcing traffic to use it's own local resolver, it is able to transparently rewrite traffic to be encrypted before leaving the router and heading out into the public internet to the upstream resolver - 1.1.1.1.</p>\n<p>This option is particularly useful when dealing with embedded systems or IoT devices which don't have configurable DNS options; Smart TVs, TV boxes, <a href=\"http://blog.cloudflare.com/iot-security-anti-patterns/\">your toaster</a>, etc. As this router can proxy traffic over to other Wi-Fi networks (and is portable), this is particularly useful when connecting out to an ordinarily insecure Wi-Fi network; the router can sit in the middle and transparently upgrade unencrypted DNS queries. This is even useful when dealing with phones and tablets where you can't install a DNS-Over-TLS client.</p>\n<p>These options both come disabled by default, but can easily be toggled in the UI. As before, you can configure other DNS resolvers by toggling &quot;Manual DNS Server Settings&quot; and entering in any other DNS servers.</p>\n<p>There are a number of other cool features I've noticed in this router; for example, the <em>More Settings</em> &gt; <em>Advanced</em> option takes you into a standard LuCi UI that ordinarily comes bundled with LEDE routers. Like previous routers, you can easily <a href=\"https://www.cloudflare.com/learning/access-management/what-is-ssh/\">SSH</a> into the device and install various program and perform customisations.</p>\n<p>For example; after installing TCPDump on the router, I am able to run <code>tcpdump -n -i wlan-sta 'port 853'</code> to see encrypted DNS traffic leaving the router. When I run a DNS query over an unencrypted resolver (using <code>dig A junade.com</code> on my local computer), I can see the outgoing DNS traffic upgraded to encrypted queries on 1.1.1.1 and 1.0.0.1.</p>\n<p><img src=\"http://blog.cloudflare.com/content/images/2018/07/Screen-Shot-2018-07-14-at-17.21.37.png\" alt=\"TCPDump on Encrypted DNS\" loading=\"lazy\"></p>\n<p>If you're interested in learning how to configure 1.1.1.1 on other routers, your computer or your phone - check out the project landing page at <a href=\"https://1.1.1.1/\">https://1.1.1.1/</a>. If you're a developer and want to learn about how you can integrate 1.1.1.1 into your project with either DNS-Over-TLS or DNS-Over-HTTPS, checkout the <a href=\"https://developers.cloudflare.com/1.1.1.1/\">1.1.1.1 Developer Documentation</a>.</p>\n<!--kg-card-end: markdown-->",
		"id": "5d16453b41acde0011a95713",
		"meta_description": null,
		"meta_title": null,
		"og_description": null,
		"og_image": null,
		"og_title": null,
		"primary_author": {
			"id": "5d1644b141acde0011a94f6e",
			"name": "Junade Ali",
			"slug": "junade-ali",
			"profile_image": "http://blog.cloudflare.com/content/images/2017/03/G1VwuaxB.jpg",
			"cover_image": "http://blog.cloudflare.com/content/images/2018/08/general@2x-8.png",
			"bio": null,
			"website": null,
			"location": null,
			"facebook": null,
			"twitter": "@IcyApril",
			"meta_title": null,
			"meta_description": null,
			"url": "http://blog.cloudflare.com/author/junade-ali/"
		},
		"primary_tag": {
			"id": "5d16450341acde0011a9524b",
			"name": "1.1.1.1",
			"slug": "1-1-1-1",
			"description": "1.1.1.1 DNS Resolver (EN)",
			"feature_image": null,
			"visibility": "public",
			"meta_title": null,
			"meta_description": null,
			"og_image": null,
			"og_title": null,
			"og_description": null,
			"twitter_image": null,
			"twitter_title": null,
			"twitter_description": null,
			"codeinjection_head": null,
			"codeinjection_foot": null,
			"canonical_url": null,
			"accent_color": null,
			"url": "http://blog.cloudflare.com/tag/1-1-1-1/"
		},
		"published_at": "2018-07-14T18:13:00.000+01:00",
		"reading_time": 4,
		"slug": "dns-over-tls-built-in",
		"tags": [
			{
				"id": "5d16450341acde0011a9524b",
				"name": "1.1.1.1",
				"slug": "1-1-1-1",
				"description": "1.1.1.1 DNS Resolver (EN)",
				"feature_image": null,
				"visibility": "public",
				"meta_title": null,
				"meta_description": null,
				"og_image": null,
				"og_title": null,
				"og_description": null,
				"twitter_image": null,
				"twitter_title": null,
				"twitter_description": null,
				"codeinjection_head": null,
				"codeinjection_foot": null,
				"canonical_url": null,
				"accent_color": null,
				"url": "http://blog.cloudflare.com/tag/1-1-1-1/"
			},
			{
				"id": "5d16450341acde0011a951d6",
				"name": "DNS",
				"slug": "dns",
				"description": null,
				"feature_image": null,
				"visibility": "public",
				"meta_title": null,
				"meta_description": null,
				"og_image": null,
				"og_title": null,
				"og_description": null,
				"twitter_image": null,
				"twitter_title": null,
				"twitter_description": null,
				"codeinjection_head": null,
				"codeinjection_foot": null,
				"canonical_url": null,
				"accent_color": null,
				"url": "http://blog.cloudflare.com/tag/dns/"
			},
			{
				"id": "5d16450341acde0011a95147",
				"name": "TLS",
				"slug": "tls",
				"description": null,
				"feature_image": null,
				"visibility": "public",
				"meta_title": null,
				"meta_description": null,
				"og_image": null,
				"og_title": null,
				"og_description": null,
				"twitter_image": null,
				"twitter_title": null,
				"twitter_description": null,
				"codeinjection_head": null,
				"codeinjection_foot": null,
				"canonical_url": null,
				"accent_color": null,
				"url": "http://blog.cloudflare.com/tag/tls/"
			},
			{
				"id": "5d16450341acde0011a951e7",
				"name": "Privacy",
				"slug": "privacy",
				"description": null,
				"feature_image": null,
				"visibility": "public",
				"meta_title": null,
				"meta_description": null,
				"og_image": null,
				"og_title": null,
				"og_description": null,
				"twitter_image": null,
				"twitter_title": null,
				"twitter_description": null,
				"codeinjection_head": null,
				"codeinjection_foot": null,
				"canonical_url": null,
				"accent_color": null,
				"url": "http://blog.cloudflare.com/tag/privacy/"
			},
			{
				"id": "5d16450341acde0011a9524a",
				"name": "Resolver",
				"slug": "resolver",
				"description": null,
				"feature_image": null,
				"visibility": "public",
				"meta_title": null,
				"meta_description": null,
				"og_image": null,
				"og_title": null,
				"og_description": null,
				"twitter_image": null,
				"twitter_title": null,
				"twitter_description": null,
				"codeinjection_head": null,
				"codeinjection_foot": null,
				"canonical_url": null,
				"accent_color": null,
				"url": "http://blog.cloudflare.com/tag/resolver/"
			},
			{
				"id": "5d16450341acde0011a951ec",
				"name": "IoT",
				"slug": "iot",
				"description": null,
				"feature_image": null,
				"visibility": "public",
				"meta_title": null,
				"meta_description": null,
				"og_image": null,
				"og_title": null,
				"og_description": null,
				"twitter_image": null,
				"twitter_title": null,
				"twitter_description": null,
				"codeinjection_head": null,
				"codeinjection_foot": null,
				"canonical_url": null,
				"accent_color": null,
				"url": "http://blog.cloudflare.com/tag/iot/"
			},
			{
				"id": "5d16450341acde0011a95265",
				"name": "Security",
				"slug": "security",
				"description": null,
				"feature_image": "http://blog.cloudflare.com/content/images/2020/10/Security.png",
				"visibility": "public",
				"meta_title": "Cloudflare Blog: Security",
				"meta_description": "Collection of Cloudflare blog posts tagged 'Security'.",
				"og_image": null,
				"og_title": null,
				"og_description": null,
				"twitter_image": null,
				"twitter_title": null,
				"twitter_description": null,
				"codeinjection_head": null,
				"codeinjection_foot": null,
				"canonical_url": null,
				"accent_color": null,
				"url": "http://blog.cloudflare.com/tag/security/"
			}
		],
		"title": "DNS-Over-TLS Built-In & Enforced - 1.1.1.1 and the GL.iNet GL-AR750S",
		"twitter_description": null,
		"twitter_image": null,
		"twitter_title": null,
		"updated_at": "2023-09-19T20:59:12.000+01:00",
		"url": "http://blog.cloudflare.com/dns-over-tls-built-in/",
		"uuid": "10e21c3a-aca1-4a1f-9da0-bbb9e353fdbc",
		"visibility": "public"
	}
}