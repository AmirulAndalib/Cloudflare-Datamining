{
	"post": {
		"id": "613106385562bb02a7183bf2",
		"uuid": "e54c267f-6b30-434c-bb84-0ba5481c0837",
		"title": "Native Rust support on Cloudflare Workers",
		"slug": "workers-rust-sdk",
		"html": "<figure class=\"kg-card kg-image-card\"><img src=\"http://blog.cloudflare.com/content/images/2021/09/image1-2.png\" class=\"kg-image\" alt loading=\"lazy\"></figure><p>You can now write Cloudflare Workers in 100% Rust, no JavaScript required. Try it out: <a href=\"https://github.com/cloudflare/workers-rs\">https://github.com/cloudflare/workers-rs</a></p><p>Cloudflare Workers has long supported the building blocks to run many languages using  WebAssembly. However, there has always been a challenging “trampoline” step required to allow languages like Rust to talk to JavaScript APIs such as <em><code>fetch()</code></em>.</p><p>In addition to the sizable amount of boilerplate needed, lots of “off the shelf” bindings between languages don’t include support for Cloudflare APIs such as KV and Durable Objects. What we wanted was a way to write a Worker in idiomatic Rust, quickly, and without needing knowledge of the host JavaScript environment. While we had a nice “starter” template that made it easy enough to pull in some Rust libraries and use them from JavaScript, the barrier was still too high if your goal was to write a full program in Rust and ship it to our edge.</p><p>Not anymore!</p><p>Introducing the <code><strong>worker</strong></code> crate, available on <a href=\"https://github.com/cloudflare/workers-rs\">GitHub</a> and <a href=\"https://crates.io/crates/worker\">crates.io</a>, which makes Rust developers feel right at home on the Workers platform by running code inside the V8 WebAssembly engine. In the snippet below, you can see how the worker crate does all the heavy lifting by providing Rustacean-friendly Workers APIs.</p><!--kg-card-begin: markdown--><pre><code class=\"language-rust\">use worker::*;\n\n#[event(fetch)]\npub async fn main(req: Request, env: Env) -&gt; Result&lt;Response&gt; {\n    console_log!(\n        &quot;{} {}, located at: {:?}, within: {}&quot;,\n        req.method().to_string(),\n        req.path(),\n        req.cf().coordinates().unwrap_or_default(),\n        req.cf().region().unwrap_or(&quot;unknown region&quot;.into())\n    );\n\n    if !matches!(req.method(), Method::Post) {\n        return Response::error(&quot;Method Not Allowed&quot;, 405);\n    }\n\n    if let Some(file) = req.form_data().await?.get(&quot;file&quot;) {\n        return match file {\n            FormEntry::File(buf) =&gt; {\n                Response::ok(&amp;format!(&quot;size = {}&quot;, buf.bytes().await?.len()))\n            }\n            _ =&gt; Response::error(&quot;`file` part of POST form must be a file&quot;, 400),\n        };\n    }\n\n    Response::error(&quot;Bad Request&quot;, 400)\n}\n</code></pre>\n<!--kg-card-end: markdown--><p>Get your own Worker in Rust started with a single command:</p><!--kg-card-begin: markdown--><pre><code class=\"language-bash\"># see installation instructions for our `wrangler` CLI at https://github.com/cloudflare/wrangler\n# (requires v1.19.2 or higher)\n$ wrangler generate --type=rust my-project\n</code></pre>\n<!--kg-card-end: markdown--><p>We’ve  stripped away all the glue code, provided an ergonomic HTTP framework, and baked in what you need to build small scripts or full-fledged Workers apps in Rust. You’ll find <em>fetch</em>, a router, easy-to-use HTTP functionality, Workers <a href=\"https://developers.cloudflare.com/workers/runtime-apis/kv\">KV stores</a> and <a href=\"https://developers.cloudflare.com/workers/learning/using-durable-objects\">Durable Objects</a>, secrets, and environment variables too. It’s all <a href=\"https://github.com/cloudflare/workers-rs\">open source</a>, and we’d love <a href=\"https://github.com/cloudflare/workers-rs/issues\">your feedback</a>!</p><h3 id=\"why-are-we-doing-this\">Why are we doing this? </h3><p>Cloudflare Workers is on a mission to simplify the developer experience. When we took a hard look at the previous experience writing non-JavaScript Workers, we knew we could do better. Rust happens to be a great language for us to kick-start our mission: it has first-class support for WebAssembly, and a wonderful, growing ecosystem. Tools like <a href=\"https://github.com/rustwasm/wasm-bindgen\"><em><code>wasm-bindgen</code></em></a>, libraries like <a href=\"https://crates.io/crates/web-sys\"><em><code>web-sys</code></em></a>, and Rust’s powerful macro system gave us a significant starting-off point. Plus, Rust’s popularity is growing rapidly, and if our own <a href=\"https://github.com/orgs/cloudflare/repositories?q=&amp;type=source&amp;language=rust&amp;sort=\">use of Rust at Cloudflare</a> is any indication, there is no question that Rust is staking its claim as a must-have in the developer toolbox.</p><p>So give it a try, leave some feedback, even <a href=\"https://github.com/cloudflare/workers-rs\">open a PR</a>! By the way, we’re always on the lookout for great people to join us, and we are hiring for many open roles (including Rust engineers!) — <a href=\"https://www.cloudflare.com/careers/\">take a look</a>.</p>",
		"comment_id": "613106385562bb02a7183bf2",
		"feature_image": "http://blog.cloudflare.com/content/images/2021/09/Ferris-Wields-a-Worker-1.png",
		"featured": false,
		"visibility": "public",
		"created_at": "2021-09-02T18:13:28.000+01:00",
		"updated_at": "2024-02-15T23:49:02.000+00:00",
		"published_at": "2021-09-09T14:00:02.000+01:00",
		"custom_excerpt": "Introducing the Cloudflare Workers Rust SDK: write your entire Worker in Rust, no JavaScript required.\n",
		"codeinjection_head": null,
		"codeinjection_foot": null,
		"custom_template": null,
		"canonical_url": null,
		"tags": [
			{
				"id": "613760423a467902a7476df4",
				"name": "#BLOG-679",
				"slug": "hash-blog-679",
				"description": null,
				"feature_image": null,
				"visibility": "internal",
				"meta_title": null,
				"meta_description": null,
				"og_image": null,
				"og_title": null,
				"og_description": null,
				"twitter_image": null,
				"twitter_title": null,
				"twitter_description": null,
				"codeinjection_head": null,
				"codeinjection_foot": null,
				"canonical_url": null,
				"accent_color": null,
				"url": "http://blog.cloudflare.com/404/"
			},
			{
				"id": "5d16450341acde0011a95253",
				"name": "Cloudflare Workers",
				"slug": "workers",
				"description": null,
				"feature_image": null,
				"visibility": "public",
				"meta_title": null,
				"meta_description": null,
				"og_image": null,
				"og_title": null,
				"og_description": null,
				"twitter_image": null,
				"twitter_title": null,
				"twitter_description": null,
				"codeinjection_head": null,
				"codeinjection_foot": null,
				"canonical_url": null,
				"accent_color": null,
				"url": "http://blog.cloudflare.com/tag/workers/"
			},
			{
				"id": "5d16450341acde0011a95252",
				"name": "Serverless",
				"slug": "serverless",
				"description": null,
				"feature_image": "http://blog.cloudflare.com/content/images/2020/10/Serverless.png",
				"visibility": "public",
				"meta_title": "Cloudflare Blog: Serverless",
				"meta_description": "Cloudflare blog posts tagged 'serverless'.",
				"og_image": null,
				"og_title": null,
				"og_description": null,
				"twitter_image": null,
				"twitter_title": null,
				"twitter_description": null,
				"codeinjection_head": null,
				"codeinjection_foot": null,
				"canonical_url": null,
				"accent_color": null,
				"url": "http://blog.cloudflare.com/tag/serverless/"
			},
			{
				"id": "5d16450341acde0011a95290",
				"name": "WebAssembly",
				"slug": "webassembly",
				"description": null,
				"feature_image": null,
				"visibility": "public",
				"meta_title": null,
				"meta_description": null,
				"og_image": null,
				"og_title": null,
				"og_description": null,
				"twitter_image": null,
				"twitter_title": null,
				"twitter_description": null,
				"codeinjection_head": null,
				"codeinjection_foot": null,
				"canonical_url": null,
				"accent_color": null,
				"url": "http://blog.cloudflare.com/tag/webassembly/"
			},
			{
				"id": "5d16450341acde0011a9523c",
				"name": "Rust",
				"slug": "rust",
				"description": null,
				"feature_image": null,
				"visibility": "public",
				"meta_title": null,
				"meta_description": null,
				"og_image": null,
				"og_title": null,
				"og_description": null,
				"twitter_image": null,
				"twitter_title": null,
				"twitter_description": null,
				"codeinjection_head": null,
				"codeinjection_foot": null,
				"canonical_url": null,
				"accent_color": null,
				"url": "http://blog.cloudflare.com/tag/rust/"
			},
			{
				"id": "5f69c072ef1e1403f1f04339",
				"name": "WASM",
				"slug": "wasm",
				"description": null,
				"feature_image": null,
				"visibility": "public",
				"meta_title": null,
				"meta_description": null,
				"og_image": null,
				"og_title": null,
				"og_description": null,
				"twitter_image": null,
				"twitter_title": null,
				"twitter_description": null,
				"codeinjection_head": null,
				"codeinjection_foot": null,
				"canonical_url": null,
				"accent_color": null,
				"url": "http://blog.cloudflare.com/tag/wasm/"
			},
			{
				"id": "5d16450341acde0011a95204",
				"name": "Developers",
				"slug": "developers",
				"description": null,
				"feature_image": "http://blog.cloudflare.com/content/images/2020/10/Developers-1.png",
				"visibility": "public",
				"meta_title": "Cloudflare Blog: Developers",
				"meta_description": "Collection of Cloudflare blog posts tagged 'Developers'.",
				"og_image": null,
				"og_title": null,
				"og_description": null,
				"twitter_image": null,
				"twitter_title": null,
				"twitter_description": null,
				"codeinjection_head": null,
				"codeinjection_foot": null,
				"canonical_url": null,
				"accent_color": null,
				"url": "http://blog.cloudflare.com/tag/developers/"
			},
			{
				"id": "64a3e2b834124c000b00b717",
				"name": "Developer Platform",
				"slug": "developer-platform",
				"description": null,
				"feature_image": null,
				"visibility": "public",
				"meta_title": null,
				"meta_description": null,
				"og_image": null,
				"og_title": null,
				"og_description": null,
				"twitter_image": null,
				"twitter_title": null,
				"twitter_description": null,
				"codeinjection_head": null,
				"codeinjection_foot": null,
				"canonical_url": null,
				"accent_color": null,
				"url": "http://blog.cloudflare.com/tag/developer-platform/"
			}
		],
		"authors": [
			{
				"id": "612f9b355562bb02a7183be7",
				"name": "Steve Manuel",
				"slug": "steve-manuel",
				"profile_image": "http://blog.cloudflare.com/content/images/2021/09/steve.jpeg",
				"cover_image": "http://blog.cloudflare.com/content/images/2021/09/banner.jpeg",
				"bio": "I like making things. Enjoy writing Rust, Go. All empty rectangles are considered equal. ",
				"website": "https://nilslice.xyz/",
				"location": "Boulder, Colorado",
				"facebook": null,
				"twitter": "@nilslice",
				"meta_title": null,
				"meta_description": null,
				"url": "http://blog.cloudflare.com/author/steve-manuel/"
			}
		],
		"primary_author": {
			"id": "612f9b355562bb02a7183be7",
			"name": "Steve Manuel",
			"slug": "steve-manuel",
			"profile_image": "http://blog.cloudflare.com/content/images/2021/09/steve.jpeg",
			"cover_image": "http://blog.cloudflare.com/content/images/2021/09/banner.jpeg",
			"bio": "I like making things. Enjoy writing Rust, Go. All empty rectangles are considered equal. ",
			"website": "https://nilslice.xyz/",
			"location": "Boulder, Colorado",
			"facebook": null,
			"twitter": "@nilslice",
			"meta_title": null,
			"meta_description": null,
			"url": "http://blog.cloudflare.com/author/steve-manuel/"
		},
		"primary_tag": null,
		"url": "http://blog.cloudflare.com/workers-rust-sdk/",
		"excerpt": "Introducing the Cloudflare Workers Rust SDK: write your entire Worker in Rust, no JavaScript required.\n",
		"reading_time": 2,
		"access": true,
		"comments": false,
		"og_image": "http://blog.cloudflare.com/content/images/2021/09/Native-Rust-support-on-Cloudflare-Workers-OG-1.png",
		"og_title": null,
		"og_description": null,
		"twitter_image": "http://blog.cloudflare.com/content/images/2021/09/Native-Rust-support-on-Cloudflare-Workers-OG.png",
		"twitter_title": null,
		"twitter_description": null,
		"meta_title": null,
		"meta_description": "Introducing the Cloudflare Workers Rust SDK: write your entire Worker in Rust, no JavaScript required.",
		"email_subject": null,
		"frontmatter": null,
		"feature_image_alt": null,
		"feature_image_caption": null
	},
	"locale": "en-us"
}