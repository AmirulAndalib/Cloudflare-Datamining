{
	"locale": "en-us",
	"localesAvailable": [],
	"post": {
		"authors": [
			{
				"name": "Sam Marsh",
				"slug": "sam-marsh",
				"bio": "Group Product Manager at Cloudflare. Responsible for areas such as Rules, Cache, Protocols, Custom Error Pages and more.",
				"profile_image": "https://cf-assets.www.cloudflare.com/slt3lc6tev37/5kVXxWDGGrehLTLG30sCWm/4879c8721cc9b7d55560e7568a2b3c9d/sam-marsh.png",
				"location": "England, United Kingdom",
				"website": null,
				"twitter": "@marshnet_social",
				"facebook": null
			}
		],
		"excerpt": "With Dynamic redirects, users can redirect visitors to another webpage or website based upon hundreds of options such as the visitor's country of origin or language, without having to write a single line of code",
		"feature_image": "https://cf-assets.www.cloudflare.com/slt3lc6tev37/30ILWDY4G9EQkE6eqp3QBu/f433e37afb2144c3f1d685e06f2de6b4/dynamic-redirect-rules.png",
		"featured": false,
		"html": "\n            <figure class=\"kg-card kg-image-card \">\n            \n            <Image src=\"https://cf-assets.www.cloudflare.com/slt3lc6tev37/4OtZJno32ySI8NPIN3LEzd/b4ffe4bb485cc537efc953886bf85fb4/image2-54.png\" alt=\"Dynamic URL redirects: 301 to the future\" class=\"kg-image\" width=\"1800\" height=\"1013\" loading=\"lazy\"/>\n            \n            </figure><p>The Internet is a dynamic place. Websites are constantly changing as technologies and business practices evolve. What was front-page news is quickly moved into a sub-directory. To ensure website visitors continue to see the correct webpage even if it has been moved, administrators often implement URL redirects.</p><p>A URL redirect is a mapping from one location on the Internet to another, effectively telling the visitor&#39;s browser that the location of the page has changed, and where they can now find it. This is achieved by providing a virtual ‘link’ between the content’s original and new location.</p><p>URL Redirects have typically been implemented as Page Rules within Cloudflare, however Page Rules only match on the URL, rather than other elements such as the visitor&#39;s source country or preferred language. This limitation meant customers with a need for more dynamic URL redirects had to implement alternative solutions such Cloudflare Workers to achieve their goals.</p><p>To simplify the management of these more complex use cases we have created <b>Dynamic Redirects.</b> With Dynamic Redirects, users can redirect visitors to another webpage or website based upon hundreds of options such as the visitor&#39;s country of origin or language, without having to write a single line of code.</p><h3>More than a URL</h3><p>For nine years users were limited to 125 URL redirects per zone. This limitation meant those with a need for more URL redirects had to implement alternative solutions such <a href=\"https://workers.cloudflare.com/\">Cloudflare Workers</a> to achieve their goals.</p><p>In December 2021, we launched <a href=\"/maximum-redirects-minimum-effort-announcing-bulk-redirects/\">Bulk Redirects</a>, allowing up to 100,000 URL redirects per account at the time. In April 2022 we increased this maximum number to <b>over six million</b> URL redirects per account. However, there is still a gap in the ‘URL redirect’ product unfulfilled. Until now.</p><p>Bulk Redirects, much like the ‘Forwarding URL’ Page Rule, are prescriptive URL redirects. You tell us what URL to look for, and where to redirect the user to when they visit it. We can support this use case at a huge scale.</p><!--kg-card-begin: html--><table>\n<thead>\n  <tr>\n    <th>If a visitor asks for..</th>\n    <th>Redirect them to…</th>\n  </tr>\n</thead>\n<tbody>\n  <tr>\n    <td>https://www.cloudflare.com/r2-storage</td>\n    <td>https://www.cloudflare.com/products/r2</td>\n  </tr>\n  <tr>\n    <td>https://www.cloudflare.com/apishield</td>\n    <td>https://www.cloudflare.com/products/api-gateway</td>\n  </tr>\n  <tr>\n    <td>https://www.cloudflare.com/welcome-center</td>\n    <td>https://developers.cloudflare.com/fundamentals/get-started/</td>\n  </tr>\n</tbody>\n</table><!--kg-card-end: html--><p>That&#39;s a simple concept to understand, however user needs have evolved. What if a user wanted to redirect visitors to a localized version of the requested page based on their preferred language? What if a user wanted to redirect visitors to their local subsidiary on the website? Or direct them to an optimized site when they visit from a mobile device? Suddenly, this well understood concept doesn’t work - and they have to deploy code in Workers to solve what is actually a common problem. And common problems deserve to be productized.</p><p>This is where Dynamic Redirects can help. The new product provides the same consistent user interface as Transform Rules, Custom Rules, Bulk Redirects, etc. and provides a new action allowing for the target URL to be dynamically created, much like the dynamic rewrite action offered in <a href=\"https://developers.cloudflare.com/rules/transform/url-rewrite/\">Transform Rules</a>.</p><p>This dynamic action frees the user from having to define explicitly what the target URL should look like, and instead provides them with a full gamut of fields and functions to custom generate the target URL based upon the parameters of the request. For example, rather than redirecting all traffic for <a href=\"http://www.example.com/shop\"><code>www.example.com/shop</code></a> to <a href=\"http://www.example.com/en/shop\"><code>www.example.com/en/shop</code></a>, users can conceptually redirect the traffic to <a href=\"http://www.example.com/%7BPREFERRED_LANGUAGE%7D/shop\"><code>www.example.com/{PREFERRED_LANGUAGE}/shop</code></a> (not actual syntax!). With this, traffic from a browser with a preferred language of French will be redirected to <a href=\"http://www.example.com/fr/shop\"><code>www.example.com/fr/shop</code></a>, likewise those with a preferred language of German will be redirected to <a href=\"http://www.example.com/de/shop\"><code>www.example.com/de/shop</code></a>.</p>\n            <figure class=\"kg-card kg-image-card \">\n            \n            <Image src=\"https://cf-assets.www.cloudflare.com/slt3lc6tev37/KSMb1ZP3E4N1nFuUPDFde/ba3dd64c5a8c055bc2dabce97b3be3c4/image3-38.png\" alt=\"\" class=\"kg-image\" width=\"1930\" height=\"1220\" loading=\"lazy\"/>\n            \n            </figure><p>The other big difference between Dynamic Redirects and  Page Rules is in the filtering. Page Rules are limited to filtering on a URL, or a URL with asterisks as wildcards. Dynamic Redirects is built atop our lightning-fast <a href=\"https://developers.cloudflare.com/ruleset-engine/about/rulesets/\">Rulesets Engine</a>, which also runs products such as Transform Rules, Custom Rules (WAF), Bulk Redirects and API Shield.</p><p>Due to this, Dynamic Redirects offers almost the entire suite of Ruleset Engine <a href=\"https://developers.cloudflare.com/ruleset-engine/rules-language/fields\">fields</a> for use in filtering; from <code>http.request.full_uri</code> for the whole URL, to <code>ip.geoip.country</code> (where is the visitor located) and <code>http.request.accepted_languages[]</code> (the language preferred by the visitor). The possibilities are endless.</p><p>Users can also now use <a href=\"https://developers.cloudflare.com/ruleset-engine/rules-language/operators/\">logical operators</a> such as ‘OR’. Where previously, if a user wanted to redirect five distinct URLs to the same URL they would need to deploy five Page Rules. Today, they can simply use an ‘OR’ to consolidate this use case into just one Dynamic Redirect rule:</p><!--kg-card-begin: html--><table>\n<thead>\n  <tr>\n    <th>#</th>\n    <th>Expression</th>\n    <th>Destination URL</th>\n  </tr>\n</thead>\n<tbody>\n  <tr>\n    <td>1</td>\n    <td>(http.request.full_uri eq \"https:/www.cloudflare.com/partners/integrations/\") or (http.request.full_uri eq \"https:/www.cloudflare.com/partners/become-a-partner/\") or (http.request.full_uri eq \"https:/www.cloudflare.com/partners/digital-agency/\") or (http.request.full_uri eq \"https:/www.cloudflare.com/partners/technology-integrator/\") or (http.request.full_uri eq \"https:/www.cloudflare.com/partners/view-partners/\")</td>\n    <td>www.cloudflare.com/partners/</td>\n  </tr>\n</tbody>\n</table><!--kg-card-end: html--><p>We can further simplify this use case in the future by adding hostname lists, allowing users to add URLs to a list and reference it from within the rule expression, similar to IP Lists. This allows an expression like (http.request.full_uri in $vanity_urls), for example.</p><h3>A dedicated quota, just for U(RL)</h3><p>Page Rules are used to set everything from configuration and caching behaviour to header modification and also URL redirection (Forwarding URL). This means that users tend to run out of available rules quickly.</p><p>To address this, we’re matching the Page Rule quota in each of the four new products that are being announced today. This means where in Page Rules an Enterprise customer would get 125 Page Rules to share amongst the aforementioned functions, in Dynamic Redirects they have 125 rules just for redirects. This number can be increased for Enterprise customers, also.</p><p>We’re also increasing the quota for free plans; where today free plans get three Page Rules, they will now get 10 rules for dynamic redirects, along with each of the other three products (cache, origin, config rules). That&#39;s a net increase of 37 additional rules!</p><!--kg-card-begin: html--><table>\n<thead>\n  <tr>\n    <th>Plan</th>\n    <th>Page Rules</th>\n    <th>Dynamic Redirects</th>\n  </tr>\n</thead>\n<tbody>\n  <tr>\n    <td>Enterprise</td>\n    <td>125</td>\n    <td>125+</td>\n  </tr>\n  <tr>\n    <td>Business</td>\n    <td>50</td>\n    <td>50</td>\n  </tr>\n  <tr>\n    <td>Pro</td>\n    <td>20</td>\n    <td>25</td>\n  </tr>\n  <tr>\n    <td>Free</td>\n    <td>3</td>\n    <td>10</td>\n  </tr>\n</tbody>\n</table><!--kg-card-end: html--><p>Users can now get more out of their Cloudflare setup, being more specific about when traffic is redirected, optimizing cache and adjusting which settings are and aren&#39;t applied - without having to trade off between these areas due to a limit in rules quota.</p><h3>Localized redirects</h3><p>One of the examples covered earlier is being able to redirect visitors to localized content depending on their preferred language.</p><p>This can be done by analyzing the ‘Accept-Language’ header sent by the browser, which is stored as an array in the field http.request.accepted_languages[]. This field is an array of the values received by Cloudflare within the Accept-Language HTTP request header, sorted in descending weight order. This header is calculated based on the preferences set by the visitor in the ‘Language’ section of their web browser.</p><p>For example, if the visitors browser sends an &#39;Accept-Language&#39; header containing &quot;Accept-Language: fr-CH, fr;q=0.8, en;q=0.9, de;q=0.7, *;q=0.5&quot;, then the field http.request.accepted_languages[0] would contain &quot;en&quot;, with http.request.accepted_languages[1] containing &quot;fr&quot; and so forth.</p><p>With this information, we can create a dynamic redirect using the action:</p>\n            <figure class=\"kg-card kg-image-card \">\n            \n            <Image src=\"https://cf-assets.www.cloudflare.com/slt3lc6tev37/ffOgGltGbr8MSOJW90DP7/e02b082d405167ddce9f38cc29131fcc/image1-62.png\" alt=\"\" class=\"kg-image\" width=\"1081\" height=\"520\" loading=\"lazy\"/>\n            \n            </figure><p>With this rule in place, traffic from visitors with a preferred language of English (en) will be redirected to <a href=\"http://www.example.com/en/shop\"><code>www.example.com/en/shop</code></a>. The rule can be duplicated for other languages also, ensuring those with a preferred language of French (fr) will be redirected to <a href=\"http://www.example.com/fr/shop\"><code>www.example.com/fr/shop</code></a>.</p><h3>Mobile redirects, cookie redirects, …</h3><p>There are so many use cases for Dynamic Redirects we couldn&#39;t fit them all in this blog.</p><p>Other possible use cases include mobile redirects, redirects based on cookies, redirects to different endpoints based on request headers for live testing. The potential list is huge, and we can&#39;t wait to hear what you come up with. Try it <a href=\"https://dash.cloudflare.com/?to=/:account/:zone/rules/\">today</a>!</p>",
		"id": "5x03cYdI8N8okRttILtgh3",
		"localeList": {
			"name": "Dynamic URL redirects: 301 to the future Config",
			"enUS": "English for Locale",
			"zhCN": "No Page for Locale",
			"zhHansCN": "No Page for Locale",
			"zhTW": "No Page for Locale",
			"frFR": "No Page for Locale",
			"deDE": "No Page for Locale",
			"itIT": "No Page for Locale",
			"jaJP": "No Page for Locale",
			"koKR": "No Page for Locale",
			"ptBR": "No Page for Locale",
			"esLA": "No Page for Locale",
			"esES": "No Page for Locale",
			"enAU": "No Page for Locale",
			"enCA": "No Page for Locale",
			"enIN": "No Page for Locale",
			"enGB": "No Page for Locale",
			"idID": "No Page for Locale",
			"ruRU": "No Page for Locale",
			"svSE": "No Page for Locale",
			"viVN": "No Page for Locale",
			"plPL": "No Page for Locale",
			"arAR": "No Page for Locale",
			"nlNL": "No Page for Locale",
			"thTH": "No Page for Locale",
			"trTR": "No Page for Locale",
			"heIL": "No Page for Locale",
			"lvLV": "No Page for Locale",
			"etEE": "No Page for Locale",
			"ltLT": "No Page for Locale"
		},
		"meta_description": "With Dynamic redirects, users can redirect visitors to another webpage or website based upon hundreds of options such as the visitor's country of origin or language, without having to write a single line of code",
		"metadata": {
			"title": "Dynamic URL redirects: 301 to the future",
			"description": "With Dynamic redirects, users can redirect visitors to another webpage or website based upon hundreds of options such as the visitor's country of origin or language, without having to write a single line of code",
			"imgPreview": "https://cf-assets.www.cloudflare.com/slt3lc6tev37/CwQdubvzzUu8AB00PEyR3/180c7a2320583cfc50a7ec7307b08edb/dynamic-redirect-rules-As0leJ.png"
		},
		"primary_author": {},
		"published_at": "2022-09-27T14:00:00.000+01:00",
		"reading_time": 5,
		"slug": "dynamic-redirect-rules",
		"tags": [
			{
				"id": "1Cv5JjXzKWKEA10JdYbXu1",
				"name": "Birthday Week",
				"slug": "birthday-week"
			},
			{
				"id": "5VvYFsAHWSvCVOGdBUbUmi",
				"name": "Page Rules",
				"slug": "page-rules"
			},
			{
				"id": "1tcPzttks7H5EFXi5EiNgL",
				"name": "Origin Rules",
				"slug": "origin-rules"
			},
			{
				"id": "4qvm9x5bhSMeG7dswIayb4",
				"name": "Cache Rules",
				"slug": "cache-rules"
			},
			{
				"id": "6poUcmBANLJTxkSl1BkWZZ",
				"name": "Config Rules",
				"slug": "config-rules"
			},
			{
				"id": "6QktrXeEFcl4e2dZUTZVGl",
				"name": "Product News",
				"slug": "product-news"
			}
		],
		"title": "Dynamic URL redirects: 301 to the future",
		"updated_at": "2024-08-27T01:24:30.021Z",
		"url": "https://blog.cloudflare.com/dynamic-redirect-rules"
	},
	"translations": {
		"posts.by": "By",
		"footer.gdpr": "GDPR",
		"lang_blurb1": "This post is also available in {lang1}.",
		"lang_blurb2": "This post is also available in {lang1} and {lang2}.",
		"lang_blurb3": "This post is also available in {lang1}, {lang2} and {lang3}.",
		"footer.blurb": "Cloudflare's connectivity cloud protects <a target='_blank' href='https://www.cloudflare.com/network-services/' rel='noreferrer'>entire corporate networks</a>, helps customers build <a target='_blank' href='https://workers.cloudflare.com/' rel='noreferrer'>Internet-scale applications efficiently</a>, accelerates any <a target='_blank' href='https://www.cloudflare.com/performance/accelerate-internet-applications/' rel='noreferrer'>website or Internet application</a>, <a target='_blank' href='https://www.cloudflare.com/ddos/' rel='noreferrer'>wards off DDoS attacks</a>, keeps <a target='_blank' href='https://www.cloudflare.com/application-security/' rel='noreferrer'>hackers at bay</a>, and can help you on <a target='_blank' href='https://www.cloudflare.com/products/zero-trust/' rel='noreferrer'>your journey to Zero Trust</a>.<br/><br/>Visit <a target='_blank' href='https://one.one.one.one/' rel='noreferrer'>1.1.1.1</a> from any device to get started with our free app that makes your Internet faster and safer.<br/><br/>To learn more about our mission to help build a better Internet, <a target='_blank' href='https://www.cloudflare.com/learning/what-is-cloudflare/' rel='noreferrer'>start here</a>. If you&apos;re looking for a new career direction, check out <a target='_blank' href='http://www.cloudflare.com/careers' rel='noreferrer'>our open positions</a>.",
		"footer.press": "Press",
		"header.title": "The Cloudflare Blog",
		"footer.careers": "Careers",
		"footer.company": "Company",
		"footer.support": "Support",
		"footer.the_net": "theNet",
		"footer.our_team": "Our team",
		"footer.webinars": "Webinars",
		"page.more_posts": "More posts",
		"posts.time_read": "{time} min read",
		"footer.community": "Community",
		"footer.resources": "Resources",
		"footer.solutions": "Solutions",
		"footer.trademark": "Trademark",
		"header.subscribe": "Subscribe",
		"footer.compliance": "Compliance",
		"footer.free_plans": "Free plans",
		"footer.impact_ESG": "Impact/ESG",
		"posts.follow_on_X": "Follow on X",
		"footer.help_center": "Help center",
		"footer.network_map": "Network Map",
		"header.please_wait": "Please Wait",
		"page.related_posts": "Related posts",
		"footer.case_studies": "Case Studies",
		"footer.connect_2024": "Connect 2024",
		"footer.terms_of_use": "Terms of Use",
		"footer.white_papers": "White Papers",
		"footer.cloudflare_tv": "Cloudflare TV",
		"footer.community_hub": "Community Hub",
		"footer.compare_plans": "Compare plans",
		"footer.contact_sales": "Contact Sales",
		"header.contact_sales": "Contact Sales",
		"header.email_address": "Email Address",
		"page.error.not_found": "Page not found",
		"footer.developer_docs": "Developer docs",
		"footer.privacy_policy": "Privacy Policy",
		"footer.request_a_demo": "Request a demo",
		"page.continue_reading": "Continue reading",
		"footer.analysts_report": "Analyst reports",
		"footer.for_enterprises": "For enterprises",
		"footer.getting_started": "Getting Started",
		"footer.learning_center": "Learning Center",
		"footer.project_galileo": "Project Galileo",
		"pagination.newer_posts": "Newer Posts",
		"pagination.older_posts": "Older Posts",
		"posts.social_buttons.x": "Discuss on X",
		"footer.about_cloudflare": "About Cloudflare",
		"footer.athenian_project": "Athenian Project",
		"footer.become_a_partner": "Become a partner",
		"footer.cloudflare_radar": "Cloudflare Radar",
		"footer.network_services": "Network services",
		"footer.trust_and_safety": "Trust & Safety",
		"header.get_started_free": "Get Started Free",
		"page.search.placeholder": "Search Cloudflare",
		"footer.cloudflare_status": "Cloudflare Status",
		"footer.cookie_preference": "Cookie Preferences",
		"header.valid_email_error": "Must be valid email.",
		"footer.connectivity_cloud": "Connectivity cloud",
		"footer.developer_services": "Developer services",
		"footer.investor_relations": "Investor relations",
		"page.not_found.error_code": "Error Code: 404",
		"footer.logos_and_press_kit": "Logos & press kit",
		"footer.application_services": "Application services",
		"footer.get_a_recommendation": "Get a recommendation",
		"posts.social_buttons.reddit": "Discuss on Reddit",
		"footer.sse_and_sase_services": "SSE and SASE services",
		"page.not_found.outdated_link": "You may have used an outdated link, or you may have typed the address incorrectly.",
		"footer.report_security_issues": "Report Security Issues",
		"page.error.error_message_page": "Sorry, we can't find the page you are looking for.",
		"header.subscribe_notifications": "Subscribe to receive notifications of new posts:",
		"footer.cloudflare_for_campaigns": "Cloudflare for Campaigns",
		"header.subscription_confimation": "Subscription confirmed. Thank you for subscribing!",
		"posts.social_buttons.hackernews": "Discuss on Hacker News",
		"footer.diversity_equity_inclusion": "Diversity, equity & inclusion",
		"footer.critical_infrastructure_defense_project": "Critical Infrastructure Defense Project"
	}
}