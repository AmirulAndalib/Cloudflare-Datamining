<div class="post-content lh-copy gray1">
	<figure class="kg-card kg-image-card"><img src="https://blog.cloudflare.com/content/images/2020/12/image2.png" class="kg-image" alt="" loading="lazy"></figure>
	<p>今天，我们很高兴地宣布 Cloudflare 数据本地化套件，它可以帮助企业获得Cloudflare 全球网络的性能和安全优势，同时也可以方便地设置关于数据存储和保护位置的规则和控制。</p>
	<p>数据本地化套件现在可以作为企业客户的附加组件使用。</p>
	<p>Cloudflare 的网络是私有的，并且在设计上是兼容的。保护最终用户的私隐是我们协助建立更美好互联网<a href="https://blog.cloudflare.com/internet-privacy">使命的核心</a>;我们从未出售关于我们网络的客户或最终用户的个人数据。我们遵守 GDPR 等法律，并保持 ISO-27001 等认证。</p>
	<p>今天，我们介绍一些可以让我们的客户在他们自己的应用程序中构建同样的严格性的工具。在这篇文章中，我将解释我们处理的不同类型的数据，以及数据本地化套件如何将这些数据保持在本地。</p>
	<p>我们还将讨论 Cloudflare 如何使构建符合数据局部性法则的应用程序成为可能，同时保持快速、安全和可伸缩。</p>
	<h3 id="-">为什么要将数据保存在本地?</h3>
	<p>Cloudflare 的客户越来越希望或面临数据本地化的法律要求:他们希望控制处理数据的地理位置。我们的客户处理的许多类别的数据(包括医疗保健、法律或财务数据)可能有义务指定在特定位置存储或处理的数据。对数据本地化的偏好或要求在欧盟、印度和巴西等司法管辖区日益增长;随着时间的推移，我们希望更多地方的更多客户能够将数据保存在本地。</p>
	<p>尽管“数据局域性”听起来很简单，但我们与 Cloudflare 客户的对话清楚地表明，他们在努力实现这一目标时面临着许多独特的挑战。它们的互联网资产上的信息将保持全球化——它们不希望把网站的访问权限限制在地方管辖范围内——但它们希望确保数据保持在本地。他们试图弄清楚:</p>
	<ul>
		<li>我要如何在我的全球网上业务构建本地化需求?</li>
		<li>我如何确保未加密的交通只有本地可用?</li>
		<li>我如何确保根据本地化义务处理个人数据?</li>
		<li>我要如何确保我的应用程序仅存储数据在特定的位置?</li>
	</ul>
	<p>Cloudflare 数据本地化套件试图回答这些问题。</p>
	<p>到目前为止，想要本地化数据的客户必须选择将其应用程序限制在一个数据中心或一个云提供商的区域内。这是一种脆弱的方法，充满了性能、可靠性和安全性方面的挑战。Cloudflare 正在创造一个新的范例:客户应该能够从我们的全球网络中获得性能和安全方面的好处，同时毫不费力地将数据保存在本地。</p>
	<h3 id="--1">加密是隐私的支柱</h3>
	<p>在讨论数据局部性之前，我们应该讨论一下加密。没有强加密就不可能有<a href="https://www.cloudflare.com/learning/privacy/what-is-data-privacy/" target="_blank">隐私</a>; 否则，任何人都可能窥探客户的数据，而不管数据存储在哪里。</p>
	<p>数据常被描述为“传输中”和“静止中”。两者都要加密，这一点至关重要。“传输中”的数据指的是在电线上移动的数据，无论是本地网络还是公共互联网。“静止”通常意味着存储在某个磁盘上，无论是旋转的 HDD 还是现代的 SSD。</p>
	<p>在传输过程中，Cloudflare 可以强制终端用户的所有通信使用现代 TLS ，并获得可能的最高级别加密。我们还可以强制所有返回到客户源服务器的通信总是加密的。我们所有边缘和核心数据中心之间的通信总是加密的。</p>
	<p>Cloudflare 对我们在静止状态下处理的所有数据进行加密，通常采用磁盘级加密。从边缘网络上的<a href="https://blog.cloudflare.com/speeding-up-linux-disk-encryption/">缓存文件</a>，到核心数据中心数据库中的配置状态—每个字节在静止时都被加密。</p>
	<h3 id="-tls-">控制可访问TLS私钥的位置</h3>
	<p>考虑到加密的重要性，我们的客户信任我们来保护的最敏感的数据之一是他们的加密密钥，它使数据能够被解密。Cloudflare 为客户提供了两种方法，以确保他们的私钥只能在指定的位置访问。</p>
	<p><a href="https://www.cloudflare.com/ssl/keyless-ssl/" target="_blank">无密钥 SSL</a> 允许客户存储和管理他们自己的 SSL 秘钥，以便在他们选择的任何外部基础设施上与 Cloudflare 一起使用。客户可以为其密钥存储库使用各种系统，包括硬件安全模块(“ HSMs ”)、虚拟服务器和运行在客户控制环境中的 Unix/Linux 和Windows 的硬件。Cloudflare 永远无法使用无密钥 SSL 访问私钥。</p>
	<p><a href="https://blog.cloudflare.com/geo-key-manager-how-it-works/">Geo 密钥管理</a>为客户提供了详细的控制，可以在哪些位置存储密钥。例如，客户可以选择流量检查所需的私钥，使其只能在位于欧盟的数据中心内访问。</p>
	<h3 id="-https-">管理检查 HTTPS 请求和响应的位置</h3>
	<p>为了部署我们的 WAF，或检测恶意的机器人流量，Cloudflare 必须终止我们边缘数据中心的 TLS，并检查 HTTPS 请求和响应有效负载。</p>
	<p><a href="https://blog.cloudflare.com/introducing-regional-services/">区域服务</a>让组织可以控制他们的流量在哪里检查。启用区域服务后，Cloudflare 的全球 Anycast 网络会在离客户端最近的位置接收流量，我们可以在那里提供 L3 和L4 DDoS 保护。不是在该数据中心的 HTTP 级别进行检查，而是将该流量安全地传输到客户选择的区域内的 Cloudflare 数据中心，并在那里处理。</p>
	<figure class="kg-card kg-image-card"><img src="https://blog.cloudflare.com/content/images/2020/12/image1.png" class="kg-image" alt="" loading="lazy"></figure>
	<h3 id="--2">控制流量产生的日志和分析</h3>
	<p>除了使我们客户的基础设施和团队更快、更安全、更可靠之外，我们还提供关于我们的服务功能以及客户如何更好地利用这些服务的见解。我们收集关于通过边缘数据中心的流量的元数据，并利用这些元数据来改善我们自己网络的运行:例如，通过制定 WAF 规则来阻止最新的攻击，或通过开发机器学习模型来检测恶意机器人。我们还以日志和分析的形式向客户提供这些数据。</p>
	<p>这只需要在我们位于美国/欧盟的核心数据中心处理元数据的子集。该数据包含有关服务了多少请求、发送了多少数据、请求花了多长时间以及其他对网络操作至关重要的信息。</p>
	<p>有了<strong>边缘日志交付</strong>，客户可以直接从边缘发送日志到他们选择的合作伙伴—例如，他们首选区域的 Azure 存储桶，或者运行在本地数据中心的 Splunk 实例。有了这个选项，客户仍然可以在他们的首选区域获得完整的日志，而不需要这些日志首先流经我们的美国或欧盟核心数据中心。</p>
	<figure class="kg-card kg-image-card"><img src="https://blog.cloudflare.com/content/images/2020/12/edge-log-delivery-before-copy@3x-1.png" class="kg-image" alt="" loading="lazy"></figure>
	<p>边缘日志交付是在企业客户的早期测试版今天-请<a href="https://www.cloudflare.com/data-localization" target="_blank">访问我们的产品页面</a>以获取更多信息。</p>
	<p>最终，我们的目标是让客户完全控制他们的元数据在哪里存储，以及存储多长时间。在接下来的一年里，我们计划让客户能够选择存储哪些字段、存储多长时间以及在什么位置。</p>
	<h3 id="--3">从头开始构建位置感知应用程序</h3>
	<p>到目前为止，我们已经讨论了 Cloudflare 的产品如何为我们的客户提供全球性能和安全解决方案，同时将他们现有的密钥、应用程序数据和元数据保存在本地。</p>
	<p>但我们知道，客户也在努力使用现有的传统云系统来管理他们的数据局部性需求。现有的平台可能允许将代码或数据部署到特定的区域，但是在每个区域中拥有应用程序的副本，并在每个区域中管理状态，在最好的情况下是具有挑战性的(在最坏的情况下是不可能的)。</p>
	<p>无服务器的终极承诺是允许任何开发人员说“我不在乎我的代码在哪里运行，只要让它伸缩就行了。”另一个承诺将越来越需要是“我确实关心我的代码在哪里运行，我需要更多的控制来满足我的合规部门。” Cloudflare 的工作人员可以让你在两个世界的最好的，即时扩展，遍布全球100多个国家的位置，和粒度选择您所需要的。</p>
	<figure class="kg-card kg-image-card"><img src="https://blog.cloudflare.com/content/images/2020/12/unnamed2.png" class="kg-image" alt="" loading="lazy"></figure>
	<p></p>
	<p>我们宣布了一个重大的改进，让客户可以控制他们的应用程序存储数据的位置: <strong>Workers 耐用对象将支持管辖权限制</strong>。持久对象为运行在 Cloudflare 工作者平台上的无服务器应用程序提供全局一致的状态和协调。权限限制将使用户能够确保他们的持久对象不会存储数据或在给定权限之外运行——这使得构建集全局性能和本地遵从性于一体的应用程序变得非常简单。有了持久对象的自动迁移，适应新规则就像向一组持久对象添加一个标记一样简单。</p>
	<h2 id="--4">长期建设</h2>
	<p>数据本地化领域在不断发展。自从我们开始开发数据本地化套件以来，欧洲数据保护委员会( European Data Protection Board )就发布了关于欧盟和美国之间如何传输数据的新指南--我们知道这只是一个开始，随着时间的推移，更多的地区和行业将会有数据本地化的需求。</p>
	<p>在 Cloudflare，我们始终掌握数据保护方面的最新发展，因此我们的客户不必这样做。数据本地化套件为我们的客户提供工具，在数据存储和保护的边缘设置规则和控制，同时利用我们的全球网络。</p>
	<p>要了解更多信息，请访问我们的<a href="https://www.cloudflare.com/privacyweek" target="_blank">隐私和合规周页面</a>。</p>
</div>