<div class="mb2 gray5">7 min read</div>
<div class="post-content lh-copy gray1">
	<p>Cloudflare的全球网络目前覆盖90多个国家的193个城市。我们的网络拥有超过2000万个互联网资产，每次添加新的位点，我们都会提高互联网大部分内容的安全性，性能和可靠性。</p>
	<figure class="kg-card kg-image-card kg-width-wide"><img src="https://blog.cloudflare.com/content/images/2019/08/image1-3.png" class="kg-image" alt="" loading="lazy"></figure>
	<h2 id="-">将网络扩展到新的城市</h2>
	<p>到目前为止，2019年，我们已经增加了20个新地点: 安曼，安塔那那利佛*，阿里卡*，亚松森，巴库，班加罗尔，布法罗，卡萨布兰卡，科尔多瓦*，科克，库里提巴，达喀尔*，达累斯萨拉姆，福塔莱萨，日内瓦，哥德堡，危地马拉城，海得拉巴，基加利，加尔各答，马累*，马普托，那格浦尔，内乌肯*，尼科西亚，努美阿，渥太华，太子港，阿雷格里港，克雷塔罗，拉马拉，和塞萨洛尼基。</p>
	<h3 id="--1">我们谦卑的开端</h3>
	<p>Cloudflare于2010年推出时，我们专注于将服务器置于互联网的十字路口：拥有关键连接的大型数据中心，如阿姆斯特丹互联网交易所(Amsterdam Internet Exchange)和Equinix Ashburn。这不仅为大多数人同时提供了最大的价值，而且通过将我们的服务器与所有本地网络服务提供商、服务器供应商以及其他需要与之交谈以使我们的服务合理化的人员保持在同一栋大楼中，我们也更容易管理。</p>
	<p>这是引导全球网络的一种很好的方法，但我们<a href="https://blog.cloudflare.com/tag/speed-week">一般都为速度</a>所困扰。世界上拥有一百多万居民的城市有超过五百个，但只有少数城市拥有那种我们所针对的主要互联网交换机。作为一家公司，我们的目标是帮助所有人打造一个更好的互联网，而不仅仅是（帮助）那些幸运地生活在互联网节点价格合理且易于访问的地区的人。然而，我们遇到了两个广泛存在而令人讨厌的问题：a）我们耗尽了主要的互联网交换机；b）延迟仍然没有降到我们想要的那么低。显然，我们必须以新的方式开始扩展网络。</p>
	<p>我们的第一个重要步骤之一就是与当地互联网服务提供商建立合作伙伴关系，他们遇到了许多同样的问题：互联网服务供应商希望省钱并为客户提供快速的互联网，但它们附近往往没有大型的互联网交换机可供连接。将Cloudflare设备添加到他们的基础设施中，有效地拉近了互联网与他们之间的距离。我们帮助他们加快数百万互联网资产的响应速度，同时通过提供本地流量来降低成本。此外，由于我们所有的服务器都旨在支持我们的所有产品，因此占用相对较小的物理空间也可以提供<a href="https://www.cloudflare.com/ddos" target="_blank">安全性</a>，<a href="https://www.cloudflare.com/cdn" target="_blank">高性能</a>，<a href="https://www.cloudflare.com/load-balancing" target="_blank">可靠性</a>等。</p>
	<h2 id="--2">提升现有城市的网络性能</h2>
	<p>尽管这可能是显而易见的，同时也是容易被忽视的，但继续扩建现有地点也是建立全球网络的一个关键方面。今年，我们显著提高了网络边缘的计算能力。此外，通过<a href="https://www.cloudflare.com/partners/peering-portal" target="_blank">简化</a>与Cloudflare的<a href="https://bgp.he.net/report/exchanges#_participants" target="_blank">互连</a>，我们已经将与我们直接连接的独特网络数量增加到8000多个。这为我们每天看到的超过10亿个IP提供了更快，更可靠的互联网体验。</p>
	<p>让我们的客户能够进行这些性能升级，高效的基础架构部署一直是我们成功的一个关键点。我们希望我们的基础设施部署具有针对性和灵活性。</p>
	<h2 id="--3">有针对性的部署</h2>
	<p>Cloudflare的下一位客户可能是一名小餐馆老板，拥有每月有数千次网页浏览的Pro计划，也可能是<a href="https://www.cloudflare.com/case-studies/discord" target="_blank">像Discord这样的快速发展的全球科技公司</a>。因此，我们需要始终保持领先一步，同时为我们的客户整合大量数据。</p>
	<p>为了适应这种扩展，我们的性能计划团队正在学习优化服务器的新方法。一个关键的策略是准确定位发送服务的位置。然而，保持对全局的掌控并不容易——我们拥有的是一个全球<a href="https://www.cloudflare.com/learning/cdn/glossary/anycast-network" target="_blank">任播</a>网络，它带来了传入流量流向的不可预测性。更困难的是，每个城市可以包含多达五个不同的部署方式。这不仅仅是规划向哪个城市发送服务的问题，而是向哪一个（IP）地址发送服务的问题。</p>
	<p>为了理解这一切，我们通过模拟解决了这个问题。我们模型中的一些变量（不是全部）包括了历史流量增长率、可预见的异常峰值(例如智利的网络日)、实时交易渠道中的消费状态，以及产品成本、用户增长、最终客户转换率。我们还增加了站点的可靠性，扩展潜力，预期的区域扩展和合作伙伴关系，以及战略优先顺序，当然还有来自我们出色的系统可靠性工程师的反馈。</p>
	<h2 id="--4">灵活的供应链</h2>
	<p>当涉及到全球网络时，知道将服务发送到哪里只是许多人面临的第一个挑战。就像我们的用户群一样，我们的供应链必须跨越整个世界，同时保持足够的灵活性，以便快速应对时间限制，定价变化，包括税收和关税，进出口限制和所需的认证——更不用说本地合作伙伴关系，还有许多更动态的地区特异性变量。更重要的是，我们必须保持加紧脚步，即使在准备最充分的计划中，也总会有意想不到的障碍和弯路。例如，计划在布拉格的扩展可能也需要在维也纳进行扩展来转移故障。</p>
	<p>一旦服务器到达我们的数据中心，我们的数据中心部署和技术运营团队就会与我们的供应商和现场数据中心人员（我们的“远程操控手”和“智能操控手”）合作，安装物理服务器，管理布线和处理其他早期供应流程。</p>
	<p>我们的<a href="https://blog.cloudflare.com/cloudflare-architecture-and-how-bpf-eats-the-world">架构</a>设计旨在使每台服务器都能够支持每项服务，从而可以更具弹性地承受硬件故障，并有效地平衡设备之间和位置之间的负载。</p>
	<h2 id="--5">加入我们的团队</h2>
	<p>如果你对一家扩张迅速、全球多元化的公司感兴趣，请知悉我们将招聘几十个职位，包括在基础设施部门的职位。如果您想帮助提高硬件效率，部署和维护服务器，在我们的供应链上工作，或者加强互联网服务提供商的伙伴关系，请联系我们。</p>
	<p><em>* 表示该城市中的数据中心具有活动互联网端口，以及我们为该地数据中心进行了服务器配置以处理（发布时的）更多客户流量</em></p>
</div>