<div class="post-content lh-copy gray1">
	<figure class="kg-card kg-image-card"><img src="https://blog.cloudflare.com/content/images/2021/01/image3-28.png" class="kg-image" alt="" loading="lazy"></figure>
	<p>Hoje, temos o prazer de anunciar a Sala de Espera da Cloudflare! O recurso estará disponível inicialmente para clientes selecionados por meio de um novo programa chamado Projeto Fair Shot, que visa ajudar com o problema da demanda esmagadora por vacinas contra a COVID-19, que faz com que os sites de inscrição e agendamento falhem. A disponibilidade geral em nossos planos Business e Empresarial será adicionada em um futuro próximo.</p>
	<h3 id="mas-pera-voc-est-empolgado-com-uma-sala-de-espera">Mas... peraí: você está empolgado com uma... Sala de Espera?</h3>
	<p>A maioria de nós está familiarizada com o conceito de sala de espera, mas a ideia de estar em uma raramente nos deixa entusiasmados. Normalmente, nossa primeira experiência é em um consultório médico: sim, você tem uma consulta marcada, mas, às vezes, o médico está atrasado (ou um dos pacientes se atrasou). Como o médico só pode atender uma pessoa de cada vez, nasceu a sala de espera, como um mecanismo para criar uma fila de pacientes.</p>
	<p>Embora consigam lidar com mais solicitações simultâneas do que um médico, os servidores também podem ficar sobrecarregados. Se, em um mundo pré-COVID, você tentou comprar ingressos para um show ou evento populares, provavelmente já se deparou com uma sala de espera on-line. O recurso limita as solicitações de entrada em um aplicativo e as coloca em uma fila virtual. Assim que o número de usuários no aplicativo é reduzido, novos usuários são liberados dentro dos limiares definidos com os quais ele pode lidar. Isso evita que os servidores que hospedam o aplicativo sejam inundados com um excesso de solicitações, além de garantir a equidade do ponto de vista do usuário —os usuários que tentam acessar um recurso quando o sistema está sobrecarregado não são injustamente descartados e forçados a se reconectar, na esperança de entrar na fila.</p>
	<h3 id="por-que-agora">Por que agora?</h3>
	<p>Ninguém espera que tenhamos grandes shows ao vivo em breve, então por que a Cloudflare está fazendo isso agora?</p>
	<p>Bem, talvez não estejamos indo a shows, mas os efeitos de segunda ordem da COVID-19 criaram uma enorme necessidade de salas de espera. Em primeiro lugar, devido ao distanciamento social e ao fechamento de muitas empresas e agências governamentais, os clientes e cidadãos migraram para canais on-line, colocando uma pressão substancialmente maior sobre as infraestruturas empresariais e governamentais.</p>
	<p>Em segundo lugar, a pandemia e suas consequências fizeram com que muitas pessoas no mundo inteiro passassem a depender de recursos dos quais não precisavam 12 meses atrás. Para ser específico, esses recursos muitas vezes estão relacionados à saúde ou ao governo, como, por exemplo, os sites de seguro-desemprego. A infraestrutura on-line foi configurada para lidar com um pico de carga que não previu o impacto da COVID-19. Estamos observando um padrão semelhante surgir com os sites relacionados a vacinas.</p>
	<p>Historicamente, o número de organizações que precisavam de salas de espera era bastante pequeno. A natureza da maioria das empresas on-line geralmente envolve uma carga de usuários mais consistente, em vez de imensos grupos de pessoas de uma só vez. Essas organizações foram capazes de construir salas de espera personalizadas, profundamente integradas em seu aplicativo (por exemplo, compra de ingressos). Com a Sala de Espera da Cloudflare, nenhuma alteração de código no aplicativo é necessária. Uma sala de espera pode ser configurada em questão de minutos para qualquer site, sem escrever uma única linha de código.</p>
	<p>É simples configurar uma Sala de Espera, seja você um engenheiro-arquiteto ou um analista de operações de negócios. Oferecemos uma maneira rápida e fácil de garantir que seus aplicativos sejam confiáveis e estejam protegidos de picos inesperados de tráfego. Outros recursos que consideramos importantes são a ativação automática e a saída dinâmica. Em outras palavras, uma sala de espera deve ser ativada automaticamente quando os limiares forem excedidos e, à medida que os usuários terminam suas tarefas no aplicativo, remover grupos de usuários de diferentes tamanhos e receber novos que já estejam na fila. Deve funcionar. Por fim, vimos o grande impacto da COVID-19 sobre usuários e empresas, especialmente nos <a href="https://blog.cloudflare.com/project-fair-shot">setores de saúde e governamentais</a>, entre outros. Queríamos oferecer outra forma de garantir que esses aplicativos permaneçam disponíveis e funcionais para que todos os usuários possam receber o atendimento de que precisam, sem erros no navegador.</p>
	<p>Como funciona a Sala de Espera da Cloudflare?Desenvolvemos a Sala de Espera com base em nossa rede de borda e no produto Workers. Utilizando o Workers e as novas ofertas de <a href="https://blog.cloudflare.com/introducing-workers-durable-objects/">Objetos Duráveis</a>, conseguimos eliminar a necessidade de codificação por parte do cliente e fornecer um produto completo, pronto para o uso e que, simplesmente, funciona. Além disso, temos as vantagens da escala e do desempenho do produto Workers para garantir que manteremos uma latência por tempo de processamento extremamente baixa, cumpriremos os tempos estimados apresentados aos usuários finais com a maior exatidão possível e não manteremos nenhum usuário na fila por mais tempo do que o necessário. No entanto, criar um sistema centralizado em uma rede descentralizada não é uma tarefa fácil. Quando solicitações do mundo inteiro chegam a um aplicativo, precisamos obter uma visão ampla e exata da entrada e saída dessa carga em um aplicativo específico.</p>
	<figure class="kg-card kg-image-card kg-card-hascaption"><img src="https://blog.cloudflare.com/content/images/2021/01/image7-11.png" class="kg-image" alt="Solicitação passando pela Cloudflare sem uma Sala de Espera" loading="lazy">
		<figcaption>Solicitação passando pela Cloudflare sem uma Sala de Espera</figcaption>
	</figure>
	<p>Apesar de rápidas, essas solicitações ainda levam tempo para viajar pelo planeta. Por isso, foi apresentado um caso de borda único. Se um site estivesse recebendo um tráfego razoável da América do Norte e da Europa, mas um grande pico repentino de tráfego ocorresse na América do Sul, como saber quando continuar deixando os usuários entrarem no aplicativo e quando lançar a Sala de Espera para evitar a sobrecarga dos servidores de origem?</p>
	<p>Graças a uma engenharia inteligente e ao produto Workers, conseguimos criar um sistema que quase imediatamente se mantém sincronizado com a demanda global de um aplicativo, nos proporcionando o necessário entendimento sobre quando devemos ou não criar filas de usuários na Sala de Espera. Utilizando nossa rede global Anycast e nossos mais de 200 data centers, removemos qualquer ponto único de falha para proteger a infraestrutura de nossos clientes e continuar proporcionando uma ótima experiência aos usuários finais que precisam esperar algum tempo para entrar no aplicativo sendo altamente solicitado.</p>
	<figure class="kg-card kg-image-card kg-card-hascaption"><img src="https://blog.cloudflare.com/content/images/2021/01/image-8.png" class="kg-image" alt="Solicitação passando pela Cloudflare com uma Sala de Espera" loading="lazy">
		<figcaption>Solicitação passando pela Cloudflare com uma Sala de Espera</figcaption>
	</figure>
	<h3 id="como-configurar-uma-sala-de-espera">Como configurar uma Sala de Espera</h3>
	<p>A configuração de uma Sala de Espera é incrivelmente fácil e muito rápida! Na versão mais simples, um usuário precisa preencher apenas cinco campos: 1) o nome da Sala de Espera; 2) um hostname (que será preenchido automaticamente com a zona em que estiver sendo configurada); 3) o total de usuários ativos que podem estar no aplicativo a qualquer momento; 4) os novos usuários por minuto permitidos no aplicativo; e 5) a duração da sessão para qualquer usuário. Nenhuma alteração é necessária no código ou no aplicativo.</p>
	<figure class="kg-card kg-image-card"><img src="https://blog.cloudflare.com/content/images/2021/01/image2-18.png" class="kg-image" alt="" loading="lazy"></figure>
	<p>Fornecemos a opção de usar nosso modelo de Sala de Espera padrão para clientes que não desejam incluir sua marca. Isso simplifica o processo de colocar uma Sala de Espera em funcionamento.</p>
	<figure class="kg-card kg-image-card"><img src="https://blog.cloudflare.com/content/images/2021/01/image4-21.png" class="kg-image" alt="" loading="lazy"></figure>
	<p>Isso é tudo! Pressione Salvar e sua Sala de Espera estará pronta para uso!</p>
	<figure class="kg-card kg-image-card"><img src="https://blog.cloudflare.com/content/images/2021/01/image1-24.png" class="kg-image" alt="" loading="lazy"></figure>
	<p>O mesmo processo é seguido para clientes com mais tempo e maior capacidade técnica, com a exceção de que fornecemos aos nossos usuários recursos completos de personalização para que possam acrescentar sua marca à Sala de Espera para garantir que corresponda à aparência geral de seu produto.</p>
	<figure class="kg-card kg-image-card"><img src="https://blog.cloudflare.com/content/images/2021/01/image8-13.png" class="kg-image" alt="" loading="lazy"></figure>
	<p>Por fim, é incrivelmente fácil gerenciar Salas de Espera diferentes. Com a tabela Gerenciar Sala de Espera, você pode obter um instantâneo completo de quais salas estão criando filas ativamente, não estão criando filas e/ou estão desativadas.</p>
	<figure class="kg-card kg-image-card"><img src="https://blog.cloudflare.com/content/images/2021/01/image5-13.png" class="kg-image" alt="" loading="lazy"></figure>
	<p>Estamos muito entusiasmados com a disponibilização do poder da <a href="https://www.cloudflare.com/waiting-room/" target="_blank">Sala de Espera</a> para nossos clientes, para garantir que continuem se dedicando às suas empresas e seus clientes. Em breve, publicaremos outra postagem no blog com atualizações importantes no produto Sala de Espera para o plano Empresarial. Fique atento!</p>
</div>