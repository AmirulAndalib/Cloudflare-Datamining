{
	"locale": "en-us",
	"post": {
		"id": "610a6ca0000cd501bd61bd58",
		"uuid": "5b72e914-c512-4480-aff4-b3f2eef373d8",
		"title": "Modernizing a familiar approach to REST APIs, with PostgreSQL and Cloudflare Workers",
		"slug": "modernizing-a-familiar-approach-to-rest-apis-with-postgresql-and-cloudflare-workers",
		"html": "<p><a href=\"http://postgresql.com/\">Postgres</a> is a ubiquitous open-source database technology. It contains a vast number of features and offers rock-solid reliability. It's also one of the most popular SQL database tools in the industry. As the industry builds “modern” developer experience tools—real-time and highly interactive—Postgres has also served as a great foundation. Projects like <a href=\"https://hasura.io/\">Hasura</a>, which offers a real-time GraphQL engine, and <a href=\"https://supabase.io/\">Supabase</a>, an open-source Firebase alternative, use Postgres under the hood. This makes Postgres a technology that every developer should know, and consider using in their applications.</p><p>For many developers, REST APIs serve as the primary way we interact with our data. Language-specific libraries like <a href=\"https://node-postgres.com\"><code>pg</code></a> allow developers to connect with Postgres in their code, and directly interact with their databases. Yet in almost every case, developers reinvent the wheel, building the same connection logic on an app-by-app basis.</p><p>Many developers building applications with <a href=\"https://workers.cloudflare.com/\">Cloudflare Workers</a>, our serverless functions platform, have asked how they can use Postgres in Workers functions. Today, we're releasing<a href=\"https://developers.cloudflare.com/workers/tutorials/postgres\"> a new tutorial for Workers</a> that shows how to connect to Postgres inside Workers functions. Built on<a href=\"http://postgrest.com/\"> PostgREST</a>, you'll write a REST API that communicates directly with your database, on the edge.</p><p>This means that you can entirely build applications on Cloudflare’s edge — using Workers as a performant and globally-distributed API, and <a href=\"https://pages.cloudflare.com/\">Cloudflare Pages</a>, our Jamstack deployment platform, as the host for your frontend user interface. With Workers, you can add new API endpoints and handle authentication <em>in front</em> of your database without needing to alter your Postgres configuration. With features like Workers KV and Durable Objects, Workers can provide globally-distributed caching in front of your Postgres database.<a href=\"http://blog.cloudflare.com/introducing-websockets-in-workers/\"> Features like WebSockets</a> can be used to build real-time interactions for your applications, without having to migrate from Postgres to a new database-as-a-service platform.</p><p>PostgREST is an open-source tool that generates a standards-compliant REST API for your Postgres databases. Many growing database-as-a-service startups like<a href=\"https://retool.com/\"> Retool</a> and<a href=\"http://supabase.com/\"> Supabase</a> use PostgREST under the hood. PostgREST is fast and has great defaults, allowing you to access your Postgres data using standard REST conventions.</p><p>It’s great to be able to access your database directly from Workers, but do you really want to expose your database directly to the public Internet? Luckily, Cloudflare has a solution for this, and it works great with PostgREST: <a href=\"https://www.cloudflare.com/products/tunnel/\">Cloudflare Tunnel</a>. Cloudflare Tunnel is one of my personal favorite products at Cloudflare. It creates a secure tunnel between your local server and the Cloudflare network. We want to expose our PostgREST endpoint, without making our entire database available on the public internet. Cloudflare Tunnel allows us to do that securely.</p><figure class=\"kg-card kg-image-card\"><img src=\"http://blog.cloudflare.com/content/images/2021/08/image1-4.png\" class=\"kg-image\" alt loading=\"lazy\"></figure><p>By using PostgREST with Postgres, we can build REST API-based applications. In particular, it's an excellent fit for Cloudflare Workers, our serverless function platform. Workers is a great place to build REST APIs. With the open-source JavaScript library <a href=\"https://github.com/supabase/postgrest-js\"><code>postgrest-js</code></a>, we can interact with a PostgREST endpoint from inside our Workers function, using simple JS-based primitives.</p><p><em>By the way — if you haven't built a REST API with Workers yet,<a href=\"https://egghead.io/courses/build-a-serverless-api-with-cloudflare-workers-d67ca551?af=a54gwi\"> check out our free video course with Egghead: \"Building a Serverless API with Cloudflare Workers\"</a>.</em></p><p>Scaling applications built on Postgres is an incredibly common problem that developers face. Often, this means duplicating your Postgres database and distributing reads between your primary database, and a fleet of “read replicas”. With PostgREST and Workers, we can begin to explore a different approach to solving the scaling problem. <a href=\"https://developers.cloudflare.com/workers/learning/how-workers-works\">Workers' unique architecture</a> allows us to deploy hyper-performant functions <em>in front</em> of Postgres databases. With tools like Workers KV and Durable Objects, exposed in Workers as basic JavaScript APIs, we can build intelligent caches for our databases, without sacrificing performance or developer experience.</p><p>If you'd like to learn more about building REST APIs in Cloudflare Workers using PostgREST,<a href=\"https://developers.cloudflare.com/workers/tutorials/postgres\"> check out our new tutorial</a>! We've also provided two open-source libraries to help you get started. <a href=\"https://github.com/cloudflare/postgres-postgrest-cloudflared-example\"><code>cloudflare/postgres-postgrest-cloudflared-example</code></a> helps you set up a Cloudflare Tunnel-backed Postgres + PostgREST endpoint. <a href=\"https://github.com/cloudflare/postgrest-worker-example\"><code>postgrest-worker-example</code></a> is an example of using postgrest-js inside of Cloudflare Workers, to build REST APIs with your Postgres databases.</p><figure class=\"kg-card kg-image-card\"><img src=\"http://blog.cloudflare.com/content/images/2021/08/image2-4.png\" class=\"kg-image\" alt loading=\"lazy\"></figure><p>With <code>postgrest-js</code>, you can build dynamic queries and request data from your database using the JS primitives you know and love:</p><!--kg-card-begin: markdown--><pre><code class=\"language-js\">// Get all users with at least 100 followers\nconst { data: users, error } = await client\n.from('users')\n.select(‘*’)\n.gte('followers', 100)\n</code></pre>\n<!--kg-card-end: markdown--><p>You can also join our Cloudflare Developers Discord community! Learn more about what you can build with Cloudflare Workers, and meet our wonderful community of developers from around the world.<a href=\"https://discord.gg/cloudflaredev\"> Get your invite link here.</a></p>",
		"comment_id": "610a6ca0000cd501bd61bd58",
		"feature_image": "http://blog.cloudflare.com/content/images/2021/08/image1-5.png",
		"featured": false,
		"visibility": "public",
		"created_at": "2021-08-04T11:32:00.000+01:00",
		"updated_at": "2021-08-04T13:56:38.000+01:00",
		"published_at": "2021-08-04T13:56:38.000+01:00",
		"custom_excerpt": "By using PostgREST with Postgres, we can build REST API-based applications. In particular, it's an excellent fit for Cloudflare Workers, our serverless function platform. Workers is a great place to build REST APIs.",
		"codeinjection_head": null,
		"codeinjection_foot": null,
		"custom_template": null,
		"canonical_url": null,
		"authors": [
			{
				"id": "5d1644b141acde0011a95020",
				"name": "Kristian Freeman",
				"slug": "kristian",
				"profile_image": "http://blog.cloudflare.com/content/images/2019/05/2fGb07-c_400x400.jpg",
				"cover_image": "http://blog.cloudflare.com/content/images/2019/05/general@2x-13.png",
				"bio": "Manager, Developer Advocacy team at Cloudflare. We help developers build amazing apps on Cloudflare, with tools like Workers, Pages, and more!",
				"website": "https://www.signalnerve.com",
				"location": "Austin, TX",
				"facebook": null,
				"twitter": "@kristianf_",
				"meta_title": null,
				"meta_description": null,
				"url": "http://blog.cloudflare.com/author/kristian/"
			}
		],
		"tags": [
			{
				"id": "610a6e0b000cd501bd61bd7b",
				"name": "#BLOG-565",
				"slug": "hash-blog-565",
				"description": null,
				"feature_image": null,
				"visibility": "internal",
				"meta_title": null,
				"meta_description": null,
				"og_image": null,
				"og_title": null,
				"og_description": null,
				"twitter_image": null,
				"twitter_title": null,
				"twitter_description": null,
				"codeinjection_head": null,
				"codeinjection_foot": null,
				"canonical_url": null,
				"accent_color": null,
				"url": "http://blog.cloudflare.com/404/"
			},
			{
				"id": "609916252d012001babc67eb",
				"name": "Cloudflare Tunnel",
				"slug": "cloudflare-tunnel",
				"description": null,
				"feature_image": null,
				"visibility": "public",
				"meta_title": null,
				"meta_description": null,
				"og_image": null,
				"og_title": null,
				"og_description": null,
				"twitter_image": null,
				"twitter_title": null,
				"twitter_description": null,
				"codeinjection_head": null,
				"codeinjection_foot": null,
				"canonical_url": null,
				"accent_color": null,
				"url": "http://blog.cloudflare.com/tag/cloudflare-tunnel/"
			},
			{
				"id": "5d16450341acde0011a95253",
				"name": "Cloudflare Workers",
				"slug": "workers",
				"description": null,
				"feature_image": null,
				"visibility": "public",
				"meta_title": null,
				"meta_description": null,
				"og_image": null,
				"og_title": null,
				"og_description": null,
				"twitter_image": null,
				"twitter_title": null,
				"twitter_description": null,
				"codeinjection_head": null,
				"codeinjection_foot": null,
				"canonical_url": null,
				"accent_color": null,
				"url": "http://blog.cloudflare.com/tag/workers/"
			},
			{
				"id": "5d16450341acde0011a95261",
				"name": "Postgres",
				"slug": "postgres",
				"description": null,
				"feature_image": null,
				"visibility": "public",
				"meta_title": null,
				"meta_description": null,
				"og_image": null,
				"og_title": null,
				"og_description": null,
				"twitter_image": null,
				"twitter_title": null,
				"twitter_description": null,
				"codeinjection_head": null,
				"codeinjection_foot": null,
				"canonical_url": null,
				"accent_color": null,
				"url": "http://blog.cloudflare.com/tag/postgres/"
			}
		],
		"primary_author": {
			"id": "5d1644b141acde0011a95020",
			"name": "Kristian Freeman",
			"slug": "kristian",
			"profile_image": "http://blog.cloudflare.com/content/images/2019/05/2fGb07-c_400x400.jpg",
			"cover_image": "http://blog.cloudflare.com/content/images/2019/05/general@2x-13.png",
			"bio": "Manager, Developer Advocacy team at Cloudflare. We help developers build amazing apps on Cloudflare, with tools like Workers, Pages, and more!",
			"website": "https://www.signalnerve.com",
			"location": "Austin, TX",
			"facebook": null,
			"twitter": "@kristianf_",
			"meta_title": null,
			"meta_description": null,
			"url": "http://blog.cloudflare.com/author/kristian/"
		},
		"primary_tag": null,
		"url": "http://blog.cloudflare.com/modernizing-a-familiar-approach-to-rest-apis-with-postgresql-and-cloudflare-workers/",
		"excerpt": "By using PostgREST with Postgres, we can build REST API-based applications. In particular, it's an excellent fit for Cloudflare Workers, our serverless function platform. Workers is a great place to build REST APIs.",
		"reading_time": 3,
		"access": true,
		"comments": false,
		"og_image": null,
		"og_title": null,
		"og_description": null,
		"twitter_image": null,
		"twitter_title": null,
		"twitter_description": null,
		"meta_title": null,
		"meta_description": "By using PostgREST with Postgres, we can build REST API-based applications. In particular, it's an excellent fit for Cloudflare Workers, our serverless function platform. Workers is a great place to build REST APIs.",
		"email_subject": null,
		"frontmatter": null,
		"feature_image_alt": null,
		"feature_image_caption": null
	}
}