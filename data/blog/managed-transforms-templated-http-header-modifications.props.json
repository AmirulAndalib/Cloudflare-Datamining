{
	"post": {
		"id": "62bc85e8c9d4a0000af81e3e",
		"uuid": "79b2e327-291e-4987-aeea-804a1ca97d6c",
		"title": "Managed Transforms: templated HTTP header modifications",
		"slug": "managed-transforms-templated-http-header-modifications",
		"html": "<figure class=\"kg-card kg-image-card\"><img src=\"http://blog.cloudflare.com/content/images/2022/06/image5-19.png\" class=\"kg-image\" alt=\"Managed Transforms: templated HTTP header modifications\" loading=\"lazy\" title=\"Product icon for Transform Rules\"></figure><p><strong>Managed Transforms </strong>is the next step on a journey to make HTTP header modification a trivial task for our customers. In early 2021 the only way for Cloudflare customers to modify HTTP headers was by writing a <a href=\"https://workers.cloudflare.com/\">Cloudflare Worker</a>. We heard from numerous customers who wanted a simpler way.</p><p>In <a href=\"http://blog.cloudflare.com/transform-http-request-headers/\">June 2021</a> we introduced Transform Rules, giving customers a simple UI letting them specify what the custom HTTP header’s name and value is—either a static string (i.e. <code>X-My-CDN: Cloudflare</code>) or a dynamically populated value (i.e. <code>X-Bot-Score: cf.bot_management.score</code>).</p><p>This made the job much simpler, however there is still a good amount of thought required—with a number of potential drop-off points on the user journey. For example, in order to dynamically populate the bot score into the value of an HTTP request header, the user needs to know the correct <a href=\"https://developers.cloudflare.com/ruleset-engine/rules-language/fields\">field name</a>. To find that they'll need to go to the documentation site, find the correct section, etc.</p><p>When we analyzed how our customers use Transform Rules we found a set of very common use cases in the data. Four of the top eight fields used were relating to bot management; customers wanting to have the bot score, JA3 hash, etc. of each request added as an HTTP header. A further three of the top 10 fields were relating to the geographic location of the visitor (their city, country and ASN). We also saw over 400 Transform Rules being used just to remove <code>X-Powered-By</code>. That means potentially 400 users went to the same part of the dashboard, typed the same header name, read the same documentation and selected the same action.</p><p>Much as we set out to productize the common Cloudflare Worker use case of HTTP header modification into Transform Rules, we have now set out to productize and further simplify the common Transform Rules use cases into Managed Transforms.</p><p>The intention is to continue to identify common reasons for use of a Transform Rule and where possible package them up into a single click solution.</p><p>We always want to make our user’s lives as easy as possible, and finding a way to stop hundreds of people typing the same thing and clicking the same buttons, to achieve the exact same outcome, seems a great way to continue that mission.</p><h3 id=\"an-even-simpler-solution\">An even simpler solution</h3><p><strong>Managed Transforms </strong>is a dedicated section of Transform Rules offering one-click HTTP header modifications. Want to add relevant Cloudflare <a href=\"https://www.cloudflare.com/products/bot-management/\">Bot Management</a> information as custom HTTP headers? One click. Want to add geographic information (country, etc.) as custom HTTP headers? One click.</p><figure class=\"kg-card kg-image-card\"><img src=\"http://blog.cloudflare.com/content/images/2022/06/image4-28.png\" class=\"kg-image\" alt loading=\"lazy\"></figure><p>Managed Transforms can be found in 'Rules &gt; Transform Rules' and clicking on the 'Managed Transforms' button. To benefit from Managed Transforms, users simply toggle the appropriate settings, and we take care of the rest.</p><p>For example, to enrich every HTTP request with Cloudflare’s <a href=\"https://www.cloudflare.com/products/bot-management/\">Bot Management </a>information users would enable ‘Add bot protection headers’. This setting ensures we add <a href=\"https://developers.cloudflare.com/rules/transform/managed-transforms/reference/\">four new HTTP request headers</a> to <em>every</em> HTTP request. SIEM (Security Information and Event Management) products can then be configured to correctly collect and chart these new headers, allowing customers to see the bot score of every HTTP request, how many requests are coming from verified bots, and so on.</p><p>Another great use case is the ‘Add security headers’ toggle. On a completely standard, default zone, a user can improve their website's <a href=\"https://securityheaders.com/\">security score</a> from an F to a C in <strong>just one click</strong>. Enabling HSTS improves the score to a B (<em>scores correct as of June 7, 2022</em>).</p><figure class=\"kg-card kg-image-card kg-width-wide\"><img src=\"http://blog.cloudflare.com/content/images/2022/06/image3-35.png\" class=\"kg-image\" alt loading=\"lazy\"></figure><p>Adding a Content-Security-Policy (used to mitigate Cross-Site Scripting (‘XSS’) attacks) or a Permission-Policy (used to give websites the ability to allow or block the use of browser features) increases the score to an ‘A’; the addition of both improves the score to the maximum: A+.</p><figure class=\"kg-card kg-image-card kg-width-wide\"><img src=\"http://blog.cloudflare.com/content/images/2022/06/image1-58.png\" class=\"kg-image\" alt loading=\"lazy\"></figure><p>During the design of Managed Transforms we chose not to include default Content-Security-Policy and Permission-Policy HTTP response headers within the ‘Add security headers’ toggle as we found these particular headers to be very specific to each individual website. Any default policies we tried either caused incorrect loading of the website content, or were too open to be of any value. So we decided to remove them from scope.</p><p>However, users can still add these HTTP response headers and their appropriate values in a handful of clicks by creating a new Transform Rule:</p><figure class=\"kg-card kg-image-card kg-width-wide\"><img src=\"http://blog.cloudflare.com/content/images/2022/06/image2-50.png\" class=\"kg-image\" alt loading=\"lazy\"></figure><p>The HTTP response headers entered here will be added alongside the HTTP response headers added by Managed Transforms to give an A+ score.</p><h3 id=\"try-it-now\">Try it now</h3><p>Managed Transforms can be used to improve operations, remove sensitive data, and increase security, amongst other common use cases. </p><p>Try out <a href=\"https://dash.cloudflare.com/?to=/:account/:zone/rules/transform-rules\">Managed Transforms</a> yourself today.</p><!--kg-card-begin: markdown--><p>...<br>\n<em>We protect <a href=\"https://www.cloudflare.com/network-services/\">entire corporate networks</a>, help customers build <a href=\"https://workers.cloudflare.com/\">Internet-scale applications efficiently</a>, accelerate any <a href=\"https://www.cloudflare.com/performance/accelerate-internet-applications/\">website or Internet application</a>, ward off <a href=\"https://www.cloudflare.com/ddos/\">DDoS attacks</a>, keep <a href=\"https://www.cloudflare.com/application-security/\">hackers at bay</a>, and can help you on <a href=\"https://www.cloudflare.com/products/zero-trust/\">your journey to Zero Trust</a>.</em></p>\n<p><em>Visit <a href=\"https://1.1.1.1/\">1.1.1.1</a> from any device to get started with our free app that makes your Internet faster and safer.To learn more about our mission to help build a better Internet, start <a href=\"https://www.cloudflare.com/learning/what-is-cloudflare/\">here</a>. If you’re  looking for a new career direction, check out <a href=\"http://cloudflare.com/careers\">our open positions</a>.</em></p>\n<!--kg-card-end: markdown-->",
		"comment_id": "62bc85e8c9d4a0000af81e3e",
		"feature_image": "http://blog.cloudflare.com/content/images/2022/06/image5-18.png",
		"featured": false,
		"visibility": "public",
		"created_at": "2022-06-29T18:03:36.000+01:00",
		"updated_at": "2022-07-12T11:39:57.000+01:00",
		"published_at": "2022-06-30T13:55:19.000+01:00",
		"custom_excerpt": "Customize multiple HTTP headers with a single click using Cloudflare Managed Transforms",
		"codeinjection_head": null,
		"codeinjection_foot": null,
		"custom_template": null,
		"canonical_url": null,
		"tags": [
			{
				"id": "62bc8632c9d4a0000af81e44",
				"name": "#BLOG-1206",
				"slug": "hash-blog-1206",
				"description": null,
				"feature_image": null,
				"visibility": "internal",
				"meta_title": null,
				"meta_description": null,
				"og_image": null,
				"og_title": null,
				"og_description": null,
				"twitter_image": null,
				"twitter_title": null,
				"twitter_description": null,
				"codeinjection_head": null,
				"codeinjection_foot": null,
				"canonical_url": null,
				"accent_color": null,
				"url": "http://blog.cloudflare.com/404/"
			},
			{
				"id": "606d7e8f4b1e0f03f340f006",
				"name": "Transform Rules",
				"slug": "transform-rules",
				"description": null,
				"feature_image": null,
				"visibility": "public",
				"meta_title": null,
				"meta_description": null,
				"og_image": null,
				"og_title": null,
				"og_description": null,
				"twitter_image": null,
				"twitter_title": null,
				"twitter_description": null,
				"codeinjection_head": null,
				"codeinjection_foot": null,
				"canonical_url": null,
				"accent_color": null,
				"url": "http://blog.cloudflare.com/tag/transform-rules/"
			}
		],
		"authors": [
			{
				"id": "5f841ea008dda903f3414b34",
				"name": "Sam Marsh",
				"slug": "sam-marsh",
				"profile_image": "http://blog.cloudflare.com/content/images/2022/09/Screenshot-2022-09-27-at-12.55.51.png",
				"cover_image": null,
				"bio": "Group Product Manager at Cloudflare. Responsible for areas such as Rules, Cache, Protocols, Custom Error Pages and more.",
				"website": null,
				"location": "England, United Kingdom",
				"facebook": null,
				"twitter": "@marshnet_social",
				"meta_title": null,
				"meta_description": null,
				"url": "http://blog.cloudflare.com/author/sam-marsh/"
			}
		],
		"primary_author": {
			"id": "5f841ea008dda903f3414b34",
			"name": "Sam Marsh",
			"slug": "sam-marsh",
			"profile_image": "http://blog.cloudflare.com/content/images/2022/09/Screenshot-2022-09-27-at-12.55.51.png",
			"cover_image": null,
			"bio": "Group Product Manager at Cloudflare. Responsible for areas such as Rules, Cache, Protocols, Custom Error Pages and more.",
			"website": null,
			"location": "England, United Kingdom",
			"facebook": null,
			"twitter": "@marshnet_social",
			"meta_title": null,
			"meta_description": null,
			"url": "http://blog.cloudflare.com/author/sam-marsh/"
		},
		"primary_tag": null,
		"url": "http://blog.cloudflare.com/managed-transforms-templated-http-header-modifications/",
		"excerpt": "Customize multiple HTTP headers with a single click using Cloudflare Managed Transforms",
		"reading_time": 4,
		"access": true,
		"comments": false,
		"og_image": "http://blog.cloudflare.com/content/images/2022/06/Managed-Transforms--templated-HTTP-header-modifications-OG-1.png",
		"og_title": null,
		"og_description": null,
		"twitter_image": "http://blog.cloudflare.com/content/images/2022/06/Managed-Transforms--templated-HTTP-header-modifications-OG.png",
		"twitter_title": null,
		"twitter_description": null,
		"meta_title": null,
		"meta_description": "Customize multiple HTTP headers with a single click using Cloudflare Managed Transforms.",
		"email_subject": null,
		"frontmatter": null,
		"feature_image_alt": null,
		"feature_image_caption": null
	},
	"locale": "en-us"
}