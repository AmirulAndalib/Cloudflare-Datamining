<div class="mb2 gray5">9 min read</div>
<div class="post-content lh-copy gray1">
	<p>On January 7th, we <a href="https://www.cloudflare.com/press-releases/2020/cloudflare-enters-new-security-market-launches-cloudflare-for-teams-to-make">announced</a> Cloudflare for Teams, a new way to protect organizations and their employees globally, without sacrificing performance. Cloudflare for Teams centers around two core products - Cloudflare Access and Cloudflare Gateway. Cloudflare Access is already available and used by thousands of teams around the world to secure internal applications. Cloudflare Gateway solves the other end of the problem by <a href="https://www.cloudflare.com/products/zero-trust/threat-defense">protecting those teams from security threats</a> without sacrificing performance.</p>
	<p>Today, we’re excited to announce new secure DNS filtering capabilities in Cloudflare Gateway. Cloudflare Gateway protects teams from threats like malware, phishing, ransomware, crypto-mining and other security threats. You can start using Cloudflare Gateway at <a href="https://dash.teams.cloudflare.com">dash.teams.cloudflare.com</a>. Getting started takes less than five minutes.</p>
	<h2 id="why-cloudflare-gateway">Why Cloudflare Gateway?</h2>
	<p>We built Cloudflare Gateway to address key challenges our customers experience with managing and <a href="https://www.cloudflare.com/learning/network-layer/network-security">securing global networks</a>. The root cause of these challenges is architecture and inability to scale. Legacy network security models solved problems in the 1990s, but teams have continued to attempt to force the Internet of the 2020s through them.</p>
	<p>Historically, branch offices sent all of their Internet-bound traffic to one centralized data center at or &nbsp;near corporate headquarters. Administrators configured that to make sure all requests passed through a secure hardware firewall. The hardware firewall observed each request, performed inline SSL inspection, applied DNS filtering and made sure that the corporate network was safe from security threats. This solution worked when employees accessed business critical applications from the office, and when applications were not on the cloud.</p>
	<figure class="kg-card kg-image-card kg-card-hascaption"><img src="https://blog.cloudflare.com/content/images/2020/02/image1-4.png" class="kg-image" alt="" loading="lazy">
		<figcaption>Average SaaS spending per company since 2008 (<a href="https://www.blissfully.com/saas-trends/2019-annual">source</a>)</figcaption>
	</figure>
	<p>SaaS broke this model when cloud-delivered applications became the new normal for workforce applications. As business critical applications moved to the cloud, the number of Internet bound requests from all the offices went up. Costs went up, too. In the last 10 years, SaaS spending across all company size segments &nbsp;grew by more than <strong>1615%</strong>. The legacy model of backhauling all Internet traffic through centralized locations could not keep up with the digital transformation that all businesses are still going through.</p>
	<figure class="kg-card kg-image-card"><img src="https://blog.cloudflare.com/content/images/2020/02/image6-2.png" class="kg-image" alt="" loading="lazy"></figure>
	<h2 id="the-challenge-of-backhauling-traffic-for-a-global-workforce">The challenge of backhauling traffic for a global workforce</h2>
	<h3 id="expensive-and-slow">Expensive and slow</h3>
	<p>SaaS adoption is only one element that is breaking traditional network models. Geographically distributed offices and <a href="https://www.cloudflare.com/products/zero-trust/remote-workforces">remote workers</a> are playing a role, too.</p>
	<p>Cloudflare Gateway has been in beta use for some of our customers over the last few months. One of those customers had more than 50 branch offices, and sent all of their <a href="https://www.cloudflare.com/learning/dns/what-is-dns">DNS traffic</a> through one location. The customer’s headquarters is in New York, but they have offices all over the world, including in India. When someone from the office in India visits google.com, DNS requests travel all the way to New York.</p>
	<p>As a result, employees in India have a terrible experience using the Internet. The legacy approach to solve this problem is to add <a href="https://www.cloudflare.com/learning/network-layer/what-is-mpls">MPLS links</a> from branch offices to the headquarters. But MPLS links are expensive, and can take a long time to configure and deploy. Businesses end up spending millions of dollars on legacy solutions, or they remain slow, driving down employee productivity.</p>
	<figure class="kg-card kg-image-card"><img src="https://blog.cloudflare.com/content/images/2020/02/image2-6.png" class="kg-image" alt="" loading="lazy"></figure>
	<h3 id="slow-to-react-to-security-threats">Slow to react to security threats</h3>
	<p>When businesses backhaul traffic to a single location to inspect and filter malicious traffic using a hardware firewall. But, the legacy hardware appliances were not built for the modern Internet. The threat landscape for the Internet is constantly changing.</p>
	<p>For example: about 84% of phishing sites exist for less than 24 hours (<a href="https://www.infosecurity-magazine.com/news/84-of-phishing-sites-last-for-less">source</a>) and legacy hardware firewalls are not fast enough to update their static rules to thwart phishing attacks. When security threats on the Internet act like moving targets, legacy hardware appliances that rely on static models to filter malicious traffic cannot keep up. As a result, employees remain <a href="https://www.cloudflare.com/learning/email-security/what-is-email-fraud">vulnerable to new threats</a> even when businesses backhaul Internet bound traffic to a single location.</p>
	<h3 id="cloudflare-gateway">Cloudflare Gateway</h3>
	<p>Starting today, businesses of all sizes can secure all their Internet-bound traffic and make it faster with &nbsp;Cloudflare Gateway. Cloudflare has data centers in more than 200 cities around the world and all of our services run in every single data center. Therefore, when a business uses Cloudflare Gateway, instead of backhauling traffic to a single location (slow), all Internet-bound requests travel to the nearest data center (fast) from the end user where Cloudflare Gateway applies security policies to protect businesses from security threats. All of this is done without the need for expensive MPLS links.</p>
	<figure class="kg-card kg-image-card kg-card-hascaption"><img src="https://blog.cloudflare.com/content/images/2020/02/image7-2.png" class="kg-image" alt="" loading="lazy">
		<figcaption>(<a href="https://www.dnsperf.com/#!dns-resolvers">Source</a>)</figcaption>
	</figure>
	<p>Gateway’s secure DNS filtering capabilities are built on top of 1.1.1.1, the fastest public DNS resolver in the world. We took the pieces that made the 1.1.1.1 public DNS resolver the fastest and built Cloudflare Gateway’s secure DNS filtering capabilities for customers who want to secure their connection to the Internet. Combined with Cloudflare’s global presence of data centers in more than 200 cities and the fastest public DNS resolver in the world, Cloudflare Gateway secures every connection from every device to every destination on the Internet without sacrificing performance.</p>
	<figure class="kg-card kg-image-card"><img src="https://blog.cloudflare.com/content/images/2020/02/image11-1.png" class="kg-image" alt="" loading="lazy"></figure>
	<h2 id="why-secure-dns-filtering">Why Secure DNS Filtering?</h2>
	<p>More than <a href="https://www.infosecurity-magazine.com/webinars/dns-based-attacks-1-1-1-1-1-1-1">90%</a> of malware use DNS to perform command &amp; control attacks and exfiltrate sensitive data. Here’s an example of how a malware can infect a device or a data center and perform a command &amp; control (also known as C2C or C&amp;C) attack:</p>
	<figure class="kg-card kg-image-card"><img src="https://blog.cloudflare.com/content/images/2020/03/Screen-Shot-2020-03-16-at-5.55.30-PM.png" class="kg-image" alt="" loading="lazy"></figure><!--kg-card-begin: markdown-->
	<ol>
		<li>Imagine Bob receives an email from someone impersonating his manager with a link to ‘Box’ that looks harmless. The email looks legitimate but in reality it is a phishing email intended to steal valuable information from Bob’s computer or infected with malware.</li>
		<li>When Bob clicks on the link, the website phishing ‘Box’ delivers an exploit and installs malware onto Bob’s computer.</li>
		<li>The downloaded malware sends a request to the Command &amp; Control server signaling that the malware is ready to receive instructions from the server.</li>
		<li>Once the connection between the malware and Command &amp; Control server is established, the server sends instructions to the malware to steal proprietary data, control the state of the machine to reboot it, shut it down or perform DDoS attacks against other websites.</li>
	</ol>
	<!--kg-card-end: markdown-->
	<p>If Bob’s computer was using DNS filtering, it could have prevented the attack in two places. </p>
	<p>First, when Bob clicked on the phishing link (2). The browser sends a DNS request to resolve the domain of the phishing link. If that domain was identified by DNS filtering as a phishing domain, it would have blocked it right away.</p>
	<p>Second, when malware initiated the connection with the Command &amp; Control server, the malware also needed to make a DNS request to learn about the Command &amp; Control server’s IP address. This is another place where a secure DNS filtering service can detect the domain as malware and block access to it. </p>
	<p>Secure DNS filtering acts as the first layer of defence against most security threats and prevents corporate networks and devices from getting infected by malicious software in the first place. According to a <a href="https://www.darkreading.com/network-and-perimeter-security/dns-firewalls-could-save-companies-billions/d/d-id/1334965">security report</a> by Global Cyber Alliance, companies could have prevented losses of more than <strong>$200B</strong> using DNS filtering.</p>
	<h2 id="how-does-gateway-s-secure-dns-filtering-work">How does Gateway’s secure DNS filtering work?</h2>
	<p>The primary difference between the 1.1.1.1 public DNS resolver and Gateway’s secure DNS filtering is that the 1.1.1.1 public DNS resolver does not block any DNS queries. When a browser requests <a href="http://example.com">example.com</a>, the 1.1.1.1 public DNS resolver simply looks up the answer for the DNS query either in cache or by performing a full recursive query.</p>
	<p>Cloudflare Gateway adds one new step to introduce security into this flow. Instead of allowing all DNS queries, Gateway first checks the name being queried against the intelligence Cloudflare has about threats on the Internet. If that query matches a known threat, or is requesting a blocked category, Gateway stops it before the site could load for the user - and potentially execute code or phish that team member.</p>
	<figure class="kg-card kg-image-card"><img src="https://blog.cloudflare.com/content/images/2020/02/image10-1.png" class="kg-image" alt="" loading="lazy"></figure>
	<p>For example, if a customer is using Cloudflare Gateway, and sends a DNS query to<a href="http://example.com"> example.com</a>, first, Gateway checks if the DNS query is coming from a customer. Second, if it is coming from a customer Gateway checks if the DNS query matches with any of the policies setup by the customer. The policy could be a domain that the customer is manually blocking or it could be part of a broader security category that the customer enabled. If the domain matches one of those cases, Cloudflare Gateway will block access to the domain. This will prevent the end user from going to example.com.</p>
	<h2 id="encrypted-dns-from-day-one">Encrypted DNS from day one</h2>
	<p>Gateway supports DNS over HTTPS today and will also support DNS over TLS in the future. You can use <a href="https://developers.cloudflare.com/gateway/locations/setup-instructions/firefox">Firefox</a> to start sending DNS queries to Gateway in an encrypted fashion. It will also support other DNS over HTTPS clients as long as you can change the hostname in your preferred DNS over HTTPS client.</p>
	<p>Here’s how DNS over HTTPS for Cloudflare Gateway works:</p>
	<figure class="kg-card kg-image-card"><img src="https://blog.cloudflare.com/content/images/2020/02/image5-4.png" class="kg-image" alt="" loading="lazy"></figure>
	<p>The DNS over HTTPS client encrypts the DNS request and sends it to the closest Cloudflare’s data center. Upon receiving the encrypted DNS request, it will decrypt it and send it to Cloudflare Gateway. Cloudflare Gateway will apply the required security policies and return the response to our edge. Our edge will encrypt the response and send it back to the DNS over HTTPS client.</p>
	<p>By encrypting your DNS queries you will make sure that ISPs cannot snoop on your DNS queries and at the same time filter DNS requests that are malicious.</p>
	<h2 id="cloudflare-gateway-is-for-everyone">Cloudflare Gateway is for everyone</h2>
	<p>One of our customers, Algolia, is a fast growing startup. Algolia grew by 1005% in 2019 (<a href="https://www.globenewswire.com/news-release/2019/11/07/1943413/0/en/Algolia-Ranked-Number-125-Fastest-Growing-Company-in-North-America-on-Deloitte-s-2019-Technology-Fast-500.html">source</a>). As the company experienced rapid growth, Cloudflare Gateway helped maintain their corporate security without slowing them down:</p>
	<blockquote>“<em>Algolia is growing pretty fast. At Algolia, we needed a way to have visibility across our corporate network without slowing things down for our employees. Cloudflare Gateway gave us a simple way to do that</em>” <br><strong>Adam Surak</strong> (Director of Infrastructure &amp; Security Algolia)</blockquote>
	<p>But Gateway isn’t just for fast growing startups. Anyone with a Cloudflare account can start using Cloudflare Gateway today. Gateway has a free tier where we wanted to make sure even small businesses, teams and households who cannot afford expensive security solutions can use Cloudflare Gateway to protect themselves from security threats on the Internet. We offer a free plan to our customers because we have a paid tier for this product with additional functionality that are more suited towards super users. Features like longer data retention for analytics, more granular security and content categories, individual DNS query logs, logpush to a cloud storage bucket etc. are features that are only available to our paid customers. You can learn more about Gateway in our <a href="https://teams.cloudflare.com/gateway">product page</a>.</p>
	<h2 id="how-can-you-get-started">How can you get started?</h2>
	<p>If you already have a Cloudflare account get started by visiting the <a href="https://dash.teams.cloudflare.com">Teams dashboard</a>.</p>
	<p>The onboarding will walk you through how to configure your router, or device to send DNS queries to Gateway. The onboarding will help you setup a location. A location is usually a physical entity like your office, retail location, data center or home.</p>
	<figure class="kg-card kg-image-card"><img src="https://blog.cloudflare.com/content/images/2020/02/image9.gif" class="kg-image" alt="" loading="lazy"></figure>
	<p>Once you finish onboarding, start by configuring a policy. A policy will allow you to block access to malicious websites when anyone is using the Internet from the location that you just created.</p>
	<figure class="kg-card kg-image-card"><img src="https://blog.cloudflare.com/content/images/2020/02/image4.gif" class="kg-image" alt="" loading="lazy"></figure>
	<p>You can choose from the categories of policy that we have created. You can also manually add a domain to block it using Gateway. </p>
	<figure class="kg-card kg-image-card"><img src="https://blog.cloudflare.com/content/images/2020/02/image3-4.png" class="kg-image" alt="" loading="lazy"></figure>
	<p>Once you start sending DNS queries to Gateway, you will see analytics on the team's dashboard. The analytics dashboard will help you understand if there are any anomalies in your network.</p>
	<h3 id="what-s-next">What’s next</h3>
	<p>Cloudflare's mission is to help create a better Internet. We have achieved this by protecting millions of websites around the world and securing millions of devices using WARP. With Cloudflare Access, we helped secure and protect internal applications. Today, with Cloudflare Gateway’s secure DNS filtering capabilities we have extended our mission to also protect the people who use the Internet every day. The product you are seeing today is a glimpse of what we are building for the future. Our team is incredibly proud of what we have built and we are just getting started.</p>
</div>