<div class="mb2 gray5">8 min read</div>
<div class="post-content lh-copy gray1">
	<figure class="kg-card kg-image-card"><img src="https://blog.cloudflare.com/content/images/2022/06/image-1.png" class="kg-image" alt="" loading="lazy"></figure>
	<p>Hoy anunciamos los tokens de autenticación privados, un método completamente imperceptible y privado para verificar que quienes visitan tu sitio son usuarios reales. Los visitantes que utilicen sistemas operativos compatibles con estos tokens, incluidas las <a href="https://developer.apple.com/wwdc22/10077">próximas versiones de macOS o iOS</a>, podrán demostrar ahora que son humanos sin tener que completar un desafío CAPTCHA ni facilitar datos personales. De esta manera, se eliminará casi el 100 % de los desafíos CAPTCHA que se muestran a estos usuarios.</p>
	<p>¿Cómo te afecta? </p>
	<p>Si eres usuario de Internet:</p>
	<ul>
		<li>Estamos haciendo que tu experiencia web móvil sea más agradable y más privada que la de otras redes al mismo tiempo.</li>
		<li>No verás un desafío CAPTCHA en un dispositivo iOS o Mac compatible (¡más dispositivos próximamente!) que acceda a la red de Cloudflare.</li>
	</ul>
	<p>Si eres un desarrollador web o de aplicaciones:</p>
	<ul>
		<li>Sabrás que tus usuarios provienen de dispositivos auténticos y aplicaciones firmadas, verificadas por los proveedores de dispositivos directamente.</li>
		<li>Podrás validar a los usuarios sin mantener SDK complicados.</li>
	</ul>
	<p>Si eres cliente de Cloudflare:</p>
	<ul>
		<li>¡No tienes que hacer nada! Cloudflare solicitará y utilizará automáticamente tokens de autenticación privados</li>
		<li>Tus visitantes no verán desafíos CAPTCHA y les solicitaremos menos datos de sus dispositivos.</li>
	</ul>
	<h3 id="tokens-de-autenticaci-n-privados">Tokens de autenticación privados </h3>
	<p>Durante el último año, Cloudflare ha colaborado con Apple, Google y otros líderes del sector para ampliar el <a href="https://www.ietf.org/archive/id/draft-ietf-privacypass-auth-scheme-01.html">protocolo Privacy Pass</a> con la compatibilidad de un nuevo token criptográfico. Estos tokens simplifican la seguridad de las aplicaciones para los desarrolladores y los equipos de seguridad, y eliminan los enfoques heredados obsoletos basados en SDK de terceros para determinar si es una persona quien está utilizando un dispositivo. Funcionan para los navegadores, las llamadas API de los navegadores y las llamadas API dentro de las aplicaciones. A estos nuevos tokens los llamamos Tokens de autenticación privados. Esta mañana, <a href="https://developer.apple.com/wwdc22/10077">Apple ha anunciado que va a incorporar estos tokens </a> a iOS 16, iPad 16 y macOS 13, y esperamos que otros proveedores anuncien su compatibilidad en un futuro próximo.</p>
	<p>Cloudflare ya ha incorporado los tokens de autenticación privados a nuestra <a href="https://blog.cloudflare.com/end-cloudflare-captcha">plataforma Managed Challenge</a>, por lo que cualquier cliente que utilice esta función se aprovechará automáticamente de esta nueva tecnología para mejorar la experiencia de navegación de los dispositivos compatibles.</p>
	<figure class="kg-card kg-image-card"><img src="https://blog.cloudflare.com/content/images/2022/06/image2-4.png" class="kg-image" alt="" loading="lazy"></figure>
	<p><br>Los desafíos CAPTCHA no funcionan en entornos móviles, pero los tokens de autenticación privados eliminan la necesidad de usar este recurso</p>
	<p>Hemos <a href="https://blog.cloudflare.com/end-cloudflare-captcha">escrito</a> <a href="https://blog.cloudflare.com/introducing-cryptographic-attestation-of-personhood">en numerosas</a> <a href="https://blog.cloudflare.com/moving-from-recaptcha-to-hcaptcha">ocasiones</a> sobre cómo los CAPTCHA son una experiencia de usuario pésima. Sin embargo, no hemos hablado específicamente de lo mucho que empeora la experiencia del usuario en un dispositivo móvil. La tecnología CAPTCHA se desarrolló y optimizó para un mundo basado en el navegador. Se despliegan a través de un widget o iframe que generalmente es de tamaño único, lo que acarrea problemas de representación, o que la ventana de entrada solo sea parcialmente visible en un dispositivo. El espacio reducido de las pantallas de los móviles hace que la tecnología sea menos accesible y que la resolución de cualquier CAPTCHA sea más difícil. Además, la necesidad de representar archivos de JavaScript e imágenes ralentiza la carga de imágenes y consume un ancho de banda del cliente excesivo. <br></p>
	<figure class="kg-card kg-image-card"><img src="https://blog.cloudflare.com/content/images/2022/06/image5-2.png" class="kg-image" alt="" loading="lazy"></figure>
	<p>Dejando a un lado la usabilidad, los entornos móviles presentan un reto adicional, ya que cada vez se basan más en las API. Los CAPTCHA simplemente no pueden funcionar en un entorno de API en el que no se puede representar JavaScript o no se puede llamar a una WebView. Por lo tanto, los desarrolladores de aplicaciones móviles a menudo no tienen una opción fácil para desafiar a un usuario cuando es necesario. A veces recurren al uso de un SDK complicado para insertar un CAPTCHA directamente en una aplicación. Esta labor requiere insertar y personalizar el CAPTCHA, exige un mantenimiento y supervisión continuos, y aumenta la tasa de abandono. Por estas razones, cuando nuestros clientes deciden mostrar un CAPTCHA hoy en día, solo se muestra en el móvil el 20 % de las veces.</p>
	<p>Hace poco publicamos cómo utilizamos nuestra plataforma Managed Challenge para <a href="https://blog.cloudflare.com/end-cloudflare-captcha">reducir un 91 % el uso de desafíos CAPTCHA</a>. Sin embargo, debido a que la experiencia CAPTCHA es mucho peor en el móvil, hemos estado trabajando de manera independiente en otras formas para reducir aún más el uso de desafíos CAPTCHA en el móvil.</p>
	<h3 id="cuando-los-sitios-no-pueden-desafiar-a-un-visitante-recopilan-m-s-datos">Cuando los sitios no pueden desafiar a un visitante, recopilan más datos</h3>
	<p>Así que, o bien no puedes usar un desafío CAPTCHA para proteger una API, o la experiencia del usuario es demasiado deficiente para usarla en tu sitio web móvil. ¿Qué opciones quedan para verificar si un visitante es real? Una de las más comunes es mirar los datos específicos del cliente, lo que se conoce como huella digital. </p>
	<p>Se puede pedir el IMEI del dispositivo y las versiones de los parches de seguridad, mirar el tamaño de la pantalla o las fuentes, comprobar la presencia de las API que indiquen un comportamiento humano, como los eventos interactivos de la pantalla táctil y compararlos con los resultados esperados para el cliente indicado. Sin embargo, toda esta recopilación de datos es cara y, en última instancia, no respeta al usuario final. Como empresa que se preocupa significativamente por la privacidad y por ayudar a mejorar Internet, queremos utilizar la menor cantidad de datos posible sin comprometer la seguridad de los servicios que ofrecemos.</p>
	<p>Otra alternativa es utilizar las API a nivel de sistema que ofrecen comprobaciones de validación de dispositivos. Aquí se incluyen <a href="https://developer.apple.com/documentation/devicecheck">DeviceCheck</a> en las plataformas de Apple y <a href="https://developer.android.com/training/safetynet/attestation">SafetyNet</a> en Android. Los servicios para aplicaciones pueden utilizar estas API de cliente con sus propios servicios para afirmar que los clientes con los que se comunican son dispositivos válidos. Sin embargo, la adopción de estas API requiere cambios tanto en la aplicación como en el servidor, y puede ser tan difícil de mantener como los SDK. </p>
	<h3 id="los-tokens-de-acceso-privados-mejoran-sustancialmente-la-privacidad-al-validar-sin-huella-digital">Los tokens de acceso privados mejoran sustancialmente la privacidad al validar sin huella digital</h3>
	<p>Este es el punto fuerte de los tokens de autenticación privados. Al asociarnos con terceros, como los fabricantes de dispositivos, que ya tienen los datos que nos ayudarían a validar un dispositivo, podemos aislar partes del proceso de validación y confirmar los datos <em><strong>sin que nosotros tengamos que recopilarlos</strong>, <strong>tocarlos o almacenarlos</strong></em>. En lugar de interrogar directamente a un dispositivo, pedimos al proveedor del mismo que lo haga por nosotros. </p>
	<p>En una configuración de sitio web tradicional con el proveedor de servicios CAPTCHA más común:</p>
	<ul>
		<li>El sitio web que visitas conoce la URL, tu dirección IP y algunos datos adicionales del agente de usuario.</li>
		<li>El proveedor de servicios CAPTCHA sabe qué sitio web visitas, tu dirección IP, la información de tu dispositivo, recaba datos de interacción en la página, y vincula estos datos a otros sitios donde Google te ha visto. De este modo, se crea un perfil de tu actividad de navegación tanto en los sitios como en los dispositivos, además de cómo interactúas personalmente con una página.<br></li>
	</ul>
	<figure class="kg-card kg-image-card"><img src="https://blog.cloudflare.com/content/images/2022/06/image3-2.png" class="kg-image" alt="" loading="lazy"></figure>
	<p><br>Cuando se utilizan los tokens de autenticación privados, los datos del dispositivo se aíslan y NO se intercambian explícitamente entre las partes implicadas (el fabricante y Cloudflare).</p>
	<ul>
		<li>El sitio web solo conoce tu URL y dirección IP, datos que tiene que conocer para establecer una conexión.</li>
		<li>El fabricante del dispositivo (verificador) solo conoce los datos del dispositivo necesarios para verificar tu dispositivo, pero no puede saber qué sitio web has visitado, y no conoce tu dirección IP.</li>
		<li>Cloudflare conoce el sitio que has visitado, pero ignora cualquier información sobre tu dispositivo o interacción.<br></li>
	</ul>
	<figure class="kg-card kg-image-card"><img src="https://blog.cloudflare.com/content/images/2022/06/image3-2.png" class="kg-image" alt="" loading="lazy"></figure>
	<p>En realidad, no necesitamos ni queremos los datos subyacentes que se recaban para este proceso, solo queremos verificar si un visitante está falsificando su dispositivo o agente de usuario. Los tokens de autenticación privados nos permiten capturar ese estado de validación directamente, sin necesitar ninguno de los datos subyacentes. Nos permiten estar más seguros de la autenticidad de las señales importantes, sin obligarnos a analizar esas señales directamente.</p>
	<h3 id="c-mo-los-tokens-de-acceso-privados-compartimentan-los-datos">Cómo los tokens de acceso privados compartimentan los datos</h3>
	<p>Con los <a href="https://www.ietf.org/archive/id/draft-ietf-privacypass-auth-scheme-01.html#name-security-considerations">tokens de acceso privados</a>, cuatro partes se ponen de acuerdo para trabajar en conjunto con un marco común para generar e intercambiar tokens anónimos e infalsificables. Sin las cuatro partes en el proceso, los tokens de autenticación privados no funcionarán.</p>
	<ol>
		<li>Un <strong>origen</strong>. Un sitio web, una aplicación o una API que recibe solicitudes de un cliente. Cuando un sitio web recibe una solicitud a su origen, este debe saber buscar y solicitar un token al cliente que realiza la solicitud. Para los clientes de Cloudflare, funcionamos como origen (en nombre de los clientes) y nos encargamos de solicitar y procesar los tokens.</li>
		<li>Un <strong>cliente</strong>. Cualquier herramienta que el visitante esté utilizando para intentar acceder al origen. Normalmente será un navegador web o una aplicación móvil. En nuestro ejemplo, digamos que el cliente es un <a href="https://developer.apple.com/wwdc22/10077">navegador Safari móvil</a>.</li>
		<li>Un <strong>verificador</strong>. Es la persona a la que el cliente pide que demuestre algo (por ejemplo, que un dispositivo móvil tiene un IMEI válido) antes de que se pueda emitir un token. En nuestro ejemplo, el verificador es Apple, el proveedor del dispositivo.</li>
		<li>Un <strong>emisor</strong>. Es el único en el proceso que realmente genera, o emite, un token. El verificador hace una llamada API al emisor en el que el origen ha decidido confiar, indicándole que genere un token. En nuestro caso, Cloudflare será también el emisor. <br></li>
	</ol>
	<figure class="kg-card kg-image-card"><img src="https://blog.cloudflare.com/content/images/2022/06/Screen-Shot-2022-06-07-at-2.01.38-PM.png" class="kg-image" alt="" loading="lazy"></figure>
	<p>En el ejemplo anterior, un visitante abre el navegador Safari en su iPhone e intenta visitar ejemplo.com.</p>
	<ol>
		<li>Dado que Ejemplo utiliza Cloudflare para alojar su origen, Cloudflare solicitará al navegador un token.</li>
		<li>Safari admite tokens de autenticación privados, por lo que hará una llamada API al verificador de Apple, pidiéndole que verifique.</li>
		<li>El verificador de Apple comprobará varios componentes del dispositivo, confirmará que son válidos y luego hará una llamada API al emisor de Cloudflare (ya que Cloudflare, como origen, elige utilizar el emisor de Cloudflare).</li>
		<li>El emisor de Cloudflare genera un token, lo envía al navegador, que a su vez lo envía al origen.</li>
		<li>A continuación, Cloudflare recibe el token, y lo utiliza para determinar que no necesitamos mostrar a este usuario un desafío CAPTCHA.<br></li>
	</ol>
	<p>Puede sonar un poco complicado, pero la mejor parte es que <em><strong>el sitio web no realizó ninguna acción</strong></em> en este proceso. La solicitud de un token, la validación, la generación del token y la aprobación se realizan en segundo plano por terceros que son invisibles tanto para el usuario como para el sitio web. Juntos, Apple y Cloudflare acaban de hacer esta solicitud más segura, han reducido los datos que van y vuelven y han evitado un desafío CAPTCHA al usuario. Y hemos hecho todo ello, recopilando e intercambiando menos datos del usuario que en el pasado.</p>
	<h3 id="la-mayor-a-de-los-clientes-no-tendr-n-que-hacer-nada-para-utilizar-los-tokens-de-acceso-privados">La mayoría de los clientes no tendrán que hacer nada para utilizar los tokens de acceso privados</h3>
	<p>Para aprovechar los tokens de autenticación privados, todo lo que tienes que hacer es elegir Managed Challenge en lugar de Legacy CAPTCHA como opción de respuesta en una regla del firewall. Más del 65 % de los clientes de Cloudflare ya lo están haciendo. Nuestra plataforma Managed Challenge solicitará automáticamente un token a cada solicitud, y cuando el cliente sea compatible con los tokens de acceso privados, recibiremos uno. Cualquiera de tus visitantes que utilice un dispositivo iOS o macOS empezará a ver automáticamente menos desafíos CAPTCHA una vez que haya actualizado su sistema operativo. </p>
	<p>Esto es solo el primer paso. Estamos trabajando activamente para que otros clientes y fabricantes de dispositivos utilicen también el marco de tokens de autenticación privados. Cada vez que un nuevo cliente empiece a utilizar el marco de tokens de autenticación privados, el tráfico que llegue a su sitio desde ese cliente empezará a solicitar tokens automáticamente, y sus visitantes verán menos desafíos CAPTCHA. </p>
	<p>Muy pronto incorporaremos los tokens de autenticación privados a otros productos de seguridad. No te pierdas nuestros próximos anuncios. <br></p>
</div>