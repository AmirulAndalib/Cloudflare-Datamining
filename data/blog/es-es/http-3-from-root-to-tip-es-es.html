<div class="post-content lh-copy gray1">
	<p>HTTP es el protocolo de aplicación que impulsa la web. Inició sus pasos conociéndose como protocolo HTTP/0.9 en 1991 y para 1999 había evolucionado a HTTP/1.1, que se estandarizó en el IETF (Internet Engineering Task Force o, en español, Grupo de Trabajo de Ingeniería de Internet). HTTP/1.1 bastó durante mucho tiempo, pero las necesidades siempre cambiantes de la web requerían un protocolo más adecuado y HTTP/2 surgió en el año 2015. Más recientemente, se anunció que el IETF tenía la intención de lanzar una nueva versión: HTTP/3. Para algunas personas ha sido una sorpresa y ha causado algo de confusión. Si no se sigue de cerca el trabajo del IETF, podría parecer que HTTP/3 ha salido de la nada. Sin embargo, podemos rastrear sus orígenes a través de una serie de experimentos y de la evolución de los protocolos web; específicamente el protocolo de transporte QUIC.</p>
	<p>Si no conoces QUIC, mis compañeros han hecho un gran trabajo que lo aborda desde diferentes ángulos. El <a href="https://blog.cloudflare.com/the-quicening/">blog</a> de John describe algunas complicaciones que HTTP trae hoy en la vida real; el <a href="https://blog.cloudflare.com/the-road-to-quic/">blog</a> de Alessandro aborda los detalles esenciales de la capa de transporte y el <a href="https://blog.cloudflare.com/head-start-with-quic/">blog</a> de Nick trata sobre cómo realizar algunas pruebas en la práctica. Hemos recopilado estos y más en <a href="https://cloudflare-quic.com/" target="_blank">https://cloudflare-quic.com</a>. Y si el tema te interesa, no olvides mirar <a href="https://blog.cloudflare.com/enjoy-a-slice-of-quic-and-rust/">quiche</a>, nuestra propia implementación de código abierto del protocolo QUIC escrita en Rust.</p>
	<p>HTTP/3 es la asignación de aplicación HTTP a la capa de transporte QUIC. Este nombre se hizo oficial en la versión 17, la más reciente del borrador (<a href="https://tools.ietf.org/html/draft-ietf-quic-http-17" target="_blank">draft-ietf-quic-http-17</a>), propuesta a finales de octubre de 2018, con la discusión y consenso aproximado de la reunión 103 del IETF en Bangkok en noviembre. HTTP/3 era conocido previamente como HTTP sobre QUIC, que antes era conocido como HTTP/2 sobre QUIC. Antes de eso, tuvimos HTTP/2 sobre gQUIC y mucho antes tuvimos SPDY sobre gQUIC. La verdad, sin embargo, es que HTTP/3 es solo una nueva sintaxis HTTP que funciona en IETF QUIC, un transporte multiplexado y seguro basado en UDP.</p>
	<p>En esta publicación del blog exploraremos la historia de algunos de los nombres anteriores de HTTP/3 y presentaremos el motivo del último cambio de nombre. Regresaremos a los inicios de HTTP y aludiremos al buen trabajo que se ha hecho en el camino. Si te interesa una visión completa de ello, puedes saltar hasta el final del artículo o abrir esta <a href="https://blog.cloudflare.com/content/images/2019/01/web_timeline_large1.svg">versión SVG muy detallada</a>.</p>
	<figure class="kg-card kg-image-card kg-card-hascaption"><img src="https://blog.cloudflare.com/content/images/2019/01/http3-stack.png" class="kg-image">
		<figcaption>Una tarta con capas HTTP/3</figcaption>
	</figure>
	<h2 id="nos-ponemos-en-situaci-n"><strong>Nos ponemos en situación</strong></h2>
	<p>Antes de que nos centremos en HTTP, merece la pena recordar que hay dos protocolos que comparten el nombre QUIC. Como ya explicamos <a href="https://blog.cloudflare.com/the-road-to-quic/">antes</a>, gQUIC se utiliza comúnmente para identificar a Google QUIC (el protocolo original) y QUIC se utiliza comúnmente para referirse a la versión estándar en desarrollo del IETF que se desvía de gQUIC.</p>
	<p>Desde sus inicios en los años 90, las necesidades de la web han cambiado. Hemos tenido nuevas versiones de HTTP y hemos añadido seguridad del usuario mediante la Seguridad de la capa de transporte (Transport Layer Security o TLS por sus siglas en inglés). Solo mencionaremos la TLS en este post; nuestras otras <a href="https://blog.cloudflare.com/tag/tls/">publicaciones del blog</a> son un gran recurso si quieres profundizar en el tema.</p>
	<p>Para explicar mejor la historia de HTTP y TLS, empecé a recopilar información de las especificaciones y las fechas del protocolo. Esta información se presenta generalmente en forma textual como una lista de elementos que indican títulos de documentos, ordenados por fecha. Sin embargo, hay estándares que se ramifican, que se superponen en el tiempo, así que una simple lista no puede mostrar la verdadera complejidad de las relaciones. En HTTP, ha habido trabajo paralelo que refactoriza las definiciones básicas del protocolo para facilitar el consumo, que amplía el protocolo a nuevos usos y que redefine cómo el protocolo intercambia datos en Internet para un mayor rendimiento. Cuando se trata de unir los puntos de casi 30 años de historia de Internet a través de diferentes flujos de trabajo ramificados hace falta visualizarlos. Y eso fue lo que hice: creé la Cronología de la web segura de Cloudflare. (Nota: técnicamente es un <a href="https://en.wikipedia.org/wiki/Cladogram" target="_blank">cladograma</a>, pero el término cronología es más conocido).</p>
	<p>Me he tomado algunas licencias artísticas al crearla, centrándome en las ramificaciones con éxito en el espacio del IETF. Algunas de las cosas que no se muestran son la labor del Grupo de Trabajo de <a href="https://www.w3.org/Protocols/HTTP-NG/" target="_blank">HTTP-NG</a> del Consorcio W3, junto con algunas ideas extrañas cuya pronunciación les encanta explicar a sus autores: &nbsp;<a href="https://blog.jgc.org/2012/12/speeding-up-http-with-minimal-protocol.html" target="_blank">HMURR (pronunciado "hammer")</a> y <a href="https://github.com/HTTPWorkshop/workshop2017/blob/master/talks/waka.pdf" target="_blank">WAKA (pronunciado "waka")</a>.<br></p>
	<p>En las siguiente secciones recorreré esta cronología para explicar capítulos importantes de la historia de HTTP. Para disfrutar de las lecciones de este post, conviene saber apreciar los beneficios de la estandarización y cómo la aborda el IETF. Por lo tanto, comenzaremos con un breve resumen de este tema antes de regresar a la cronología. No dudes en saltar a la próxima sección si ya conoces el IETF.</p>
	<h2 id="tipos-de-est-ndares-de-internet"><strong>Tipos de estándares de Internet</strong></h2>
	<p>Generalmente, los estándares definen términos comunes de referencia, alcance, restricciones, aplicabilidad y otras consideraciones. Existen estándares de muchas formas y tamaños, que puede ser informales (también conocidos como <em>de facto</em>) o formales (acordados/publicados por un organismo de normalización de estándares como IETF, ISO o MPEG). Los estándares se utilizan en muchas áreas, incluso hay un estándar británico formal para preparar té: BS 6008.</p>
	<p>La web inicialmente utilizaba las definiciones de protocolo HTTP y SSL que fueron publicadas fuera del IETF y se marcan como <strong>líneas rojas</strong> en la Cronología de la web segura. La adopción de estos protocolos por parte de clientes y servidores los convirtió en estándares <em>de facto</em>.</p>
	<p>En algún momento, se decidió formalizar estos protocolos (algunas de las razones para ello se describen en una sección posterior). Los estándares de Internet se definen comúnmente en el IETF, que se guía por el principio informal de "consenso aproximado y código en ejecución". Este se basa en la experiencia de desarrollar y desplegar cosas en Internet. Contrasta además con el enfoque de "sala limpia", que trata de desarrollar protocolos perfectos de forma aislada.</p>
	<p>Los estándares de Internet del IETF se conocen comúnmente como RFC (Request for Comments o, en español, Petición de comentarios). Es algo complejo de explicar, por lo que recomiendo leer la publicación del blog "<a href="https://www.ietf.org/blog/how-read-rfc/" target="_blank">Cómo leer una RFC</a>" del copresidente del Grupo de trabajo de QUIC Mark Nottingham. Un Grupo de trabajo es más o menos una lista de correo.</p>
	<p>Cada año, el IETF celebrar tres reuniones donde se pone a disposición de los Grupos de trabajo el momento y el lugar para conocerse en persona si así lo desean. La agenda para esas semanas puede estar muy llena, con escaso tiempo disponible para discutir en profundidad las áreas muy técnicas. Para compensar eso, algunos Grupos de trabajo realizan también reuniones intermedias además de las reuniones generales del IETF. Así se contribuye a mantener el impulso en el desarrollo de especificaciones. El Grupo de Trabajo de QUIC ha celebrado varias reuniones intermedias desde 2017. Se puede acceder a la lista completa en su <a href="https://datatracker.ietf.org/wg/quic/meetings/" target="_blank">página de reuniones</a>.</p>
	<p>Estas reuniones del IETF también son oportunidades para que otras agrupaciones de personas relacionadas con el IETF se reúnan, como el <a href="https://www.iab.org/" target="_blank">Consejo de arquitectura de Internet</a> o el <a href="https://irtf.org/" target="_blank">Grupo de trabajo de investigación de Internet</a>. En los últimos años, se ha celebrado un <a href="https://www.ietf.org/how/runningcode/hackathons/" target="_blank">Hackathon del IETF</a> el fin de semana anterior a la reunión del IETF. Con ello, se da una oportunidad para que la comunidad desarrolle código en ejecución y, también importante, para que se realicen pruebas de interoperabilidad en la misma sala con otras personas. Eso permite encontrar problemas en especificaciones, que pueden discutirse los días siguientes.</p>
	<p>Para los propósitos de este blog, lo que conviene entender es que las RFC no salen de la nada. Mejor dicho, pasan por un proceso que generalmente comienza con un borrador de Internet (Internet Draft o I-D) del IETF que se considera para su adopción. En casos donde ya hay una especificación publicada, la preparación de un borrador de Internet podría ser un simple ejercicio de reformateo. Los borradores de Internet están activos seis meses a partir de la fecha de publicación. Para mantenerlos activos, deben publicarse nuevas versiones. En la práctica, no sucede nada si se deja que un borrador de Internet se pase, pues ocurre muy a menudo. Los documentos continúan alojados en el <a href="https://datatracker.ietf.org/doc/recent" target="_blank">sitio web de documentos del IETF</a> para que cualquiera pueda leerlos.</p>
	<p>Los borradores de Internet aparecen en la Cronología de la web segura representados como <strong>líneas violetas</strong>. Cada uno tiene un único nombre formado por <em>proyecto-{nombre de autor}-{grupo de trabajo}-{tema}-{versión}</em>. El campo del Grupo de trabajo es opcional, puede predecir el grupo del IETF que trabajará en el borrador y a veces puede cambiar. Si un borrador de Internet es aprobado por el IETF, o si el borrador se inició directamente en el IETF, el nombre es <em>draft-ietf-{grupo de trabajo}-{tema}-{versión}</em>. Los borradores de Internet pueden ramificarse, fusionarse o caer en saco roto. La versión empieza con 00 y aumenta en 1 cada vez que se lanza un nuevo borrador. Por ejemplo, la cuarta versión de un borrador de Internet será la versión 03. Cada vez que se cambia el nombre de un borrador de Internet, su versión se reinicia con 00.</p>
	<p>Es importante tener en cuenta que cualquier persona puede presentar un borrador de Internet para el IETF; estos no deben considerarse como normas. Sin embargo, si el proceso de estandarización de un borrador de Internet por parte del IETF no llega a un consenso y el documento final pasa a revisión, finalmente se llega a una RFC. El nombre se cambia de nuevo en esta etapa. Cada RFC tiene un número exclusivo, por ejemplo, <a href="https://tools.ietf.org/html/rfc7230" target="_blank">RFC 7230</a>. Estos se representan mediante <strong>líneas azules</strong> en la Cronología de la web segura.</p>
	<p>Las RFC son documentos inmutables. Por ello, los cambios en una RFC requieren un número completamente nuevo. Se podrían hacer cambios para incorporar correcciones de erratas (errores editoriales o técnicos que se encontraron y registraron) o simplemente para refactorizar la especificación para mejorar el diseño. Las RFC pueden dejar <strong>obsoletas</strong> versiones anteriores (sustitución completa), o simplemente <strong>actualizarlas</strong> (cambiarlas sustancialmente).</p>
	<p>Todos los documentos del IETF están disponibles al público en <a href="http://tools.ietf.org/" target="_blank">http://tools.ietf.org</a>. Personalmente, me parece que el <a href="https://datatracker.ietf.org/" target="_blank">Rastreador de datos del IETF</a> es un poco más intuitivo, ya que permite visualizar el avance de los documentos, desde el borrador de Internet hasta la RFC.</p>
	<p>A continuación hay un ejemplo que muestra el desarrollo de la <a href="https://tools.ietf.org/html/rfc1945" target="_blank">RFC 1945</a>-HTTP/1.0 y es una clara fuente de inspiración de la Cronología de la web segura.</p>
	<figure class="kg-card kg-image-card kg-card-hascaption"><img src="https://blog.cloudflare.com/content/images/2019/01/RFC-1945-datatracker.png" class="kg-image">
		<figcaption>Vista de la RFC 1945 en el Rastreador de datos del IETF</figcaption>
	</figure>
	<p>Curiosamente, a lo largo de mi trabajo me di cuenta de que el diagrama anterior es incorrecto. Falta <a href="https://tools.ietf.org/html/draft-ietf-http-v10-spec-05" target="_blank">draft-ietf-http-v10-spec-05</a> por alguna razón. Puesto que la duración de un borrador de Internet es de 6 meses, parece que hay un lapso antes de que se convierta en una RFC, mientras que en realidad el borrador 05 siguió activo hasta agosto de 1996.</p>
	<h2 id="explorar-la-cronolog-a-de-la-web-segura"><strong>Explorar la Cronología de la web segura</strong></h2>
	<p>Tras esta pequeña apreciación de cómo los documentos de los estándares de Internet llegan a buen término, podemos comenzar a recorrer la Cronología de la web segura. En esta sección hay una serie de extractos de diagramas que muestran una parte importante de la cronología. Cada punto representa la fecha cuando un documento o capacidad empezó a estar disponible. En los documentos del IETF, los números del borrador se omiten para mayor claridad. Sin embargo, si quieres ver todos los datos, mira la <a href="https://blog.cloudflare.com/content/images/2019/01/web_timeline_large1.svg">Cronología completa</a>.</p>
	<p>Cuando empezó HTTP en 1991, se conocía como protocolo HTTP/0.9 y en 1994 se publicó el borrador de Internet <a href="https://tools.ietf.org/html/draft-fielding-http-spec-00" target="_blank">draft-fielding-http-spec-00</a>. Este fue aprobado por el IETF poco después, lo que provocó el cambio de nombre a <a href="https://tools.ietf.org/html/draft-ietf-http-v10-spec-00" target="_blank">draft-ietf-http-v10-spec-00</a>. Hubo seis versiones del borrador de Internet antes de que se publicara como <a href="https://tools.ietf.org/html/rfc1945" target="_blank">RFC 1945</a>-HTTP/1.0 en 1996.</p>
	<p></p>
	<figure class="kg-card kg-image-card"><img src="https://blog.cloudflare.com/content/images/2019/01/http11-standardisation.png" class="kg-image"></figure>
	<p></p>
	<p>Sin embargo, incluso antes de que el trabajo del HTTP/1.0 concluyera, se inició la actividad para el HTTP/1.1. separadamente. El borrador de Internet <a href="https://tools.ietf.org/html/draft-ietf-http-v11-spec-00" target="_blank">draft-ietf-http-v11-spec-00</a> se publicó en noviembre de 1995 y se publicó formalmente como <a href="https://tools.ietf.org/html/rfc2068" target="_blank">RFC 2068</a> en 1997. Los más atentos se darán cuenta de que la Cronología de la web segura no recoge completamente la secuencia de eventos; es un desafortunado efecto secundario de las herramientas usadas para generar el diagrama. He tratado de minimizar estos problemas cuando era posible.</p>
	<p>Un ejercicio de revisión de HTTP/1.1 se inició a mediados de 1997 en el <a href="https://tools.ietf.org/html/draft-ietf-http-v11-spec-rev-00" target="_blank">draft-ietf-http-v11-spec-rev-00</a>. Terminó en 1999 con la publicación de la <a href="https://tools.ietf.org/html/rfc2616" target="_blank">RFC 2616</a>. Las cosas se calmaron en el mundo del HTTP del IETF hasta 2007. Volveremos a eso más adelante.</p>
	<h2 id="una-historia-de-ssl-y-tls"><strong>Una historia de SSL y TLS</strong></h2>
	<p></p>
	<figure class="kg-card kg-image-card"><img src="https://blog.cloudflare.com/content/images/2019/01/ssl-tls-standardisation.png" class="kg-image"></figure>
	<p></p>
	<p>Cambiamos ahora a SSL. Vemos que la especificación de SSL 2.0 se lanzó en algún momento de 1995 y SSL 3.0 se lanzó en noviembre de 1996. Curiosamente, SSL 3.0 se describe en la <a href="https://tools.ietf.org/html/rfc6101" target="_blank">RFC 6101</a>, publicada en agosto de 2011. Se encuentra en la categoría <strong>Histórico</strong>, que "normalmente se usa para ideas de documentos que fueron considerados y descartados, o protocolos que ya eran históricos cuando se decidió documentarlos", según el <a href="https://www.ietf.org/blog/iesg-statement-designating-rfcs-historic/?primary_topic=7&amp;" target="_blank">IETF</a>. En este caso, conviene tener un documento propio del IETF que describa SSL 3.0, porque puede utilizarse como referencia canónica en otros lugares.</p>
	<p>Para nosotros, tiene más interés cómo SSL inspiró el desarrollo de TLS, que vio la luz como <a href="https://tools.ietf.org/html/draft-ietf-tls-protocol-00" target="_blank">draft-ietf-tls-protocol-00</a> en noviembre de 1996. Se hicieron 6 versiones y se publicó como <a href="https://tools.ietf.org/html/rfc2246" target="_blank">RFC 2246</a>-TLS 1.0 a principios de 1999.</p>
	<p>Entre 1995 y 1999, se utilizaron los protocolos SSL y TLS para asegurar comunicaciones HTTP en Internet. Funcionó bien como estándar <em>de facto</em>. No fue hasta enero de 1998 cuando el proceso de normalización formal para HTTPS se inició con la publicación del borrador de Internet <a href="https://tools.ietf.org/html/draft-ietf-tls-https-00" target="_blank">draft-ietf-tls-https-00</a>. El trabajo concluyó en mayo de 2000 con la publicación de la <a href="https://tools.ietf.org/html/rfc2616" target="_blank">RFC 2616</a>-HTTP sobre TLS.</p>
	<p>TLS continuó evolucionando entre 2000 y 2007, con la estandarización de TLS 1.1 y 1.2. Hubo un lapso de 7 años hasta que comenzó el trabajo de la siguiente versión de TLS, que se aprobó como <a href="https://tools.ietf.org/html/draft-ietf-tls-tls13-00" target="_blank">draft-ietf-tls-tls13-00</a> en abril del de 2014 y, después de 28 borradores, se completó con la <a href="https://tools.ietf.org/html/rfc8446" target="_blank">RFC 8446</a>-TLS 1.3 en agosto de 2018.</p>
	<h2 id="proceso-de-estandarizaci-n-de-internet"><strong>Proceso de estandarización de Internet</strong></h2>
	<p>Después de haberle echado un vistazo a la cronología, espero que tengas una idea de cómo funciona el IETF. Una generalización de la manera en que los estándares de Internet toman forma es que los investigadores o ingenieros diseñan protocolos experimentales que se adaptan a su caso de uso específico. Experimentan con los protocolos, en público o en privado, a diversos niveles de escala. Los datos contribuyen a identificar mejoras o problemas. El trabajo puede publicarse para explicar el experimento, obtener más valoraciones o tratar de encontrar más implementadores. Si el trabajo inicial se asume por parte de otros, puede convertirse en estándar <em>de facto</em>; finalmente puede haber suficiente impulso para que haya opción de estandarización formal.</p>
	<p>El estado de un protocolo puede ser una consideración importante para las organizaciones que estarían planteándose implementarlo, desplegarlo o usarlo de alguna manera. Un proceso de estandarización formal puede hacer un estándar <em>de facto</em> más atractivo porque tiende a dar estabilidad. La administración y la guía las proporciona una organización, como el IETF, que refleja experiencias muy diferentes. Sin embargo, cabe destacar que no todos los estándares formales tienen éxito.</p>
	<p>El proceso de creación de un estándar final es casi tan importante como el propio estándar. Tomar una idea inicial y fomentar la contribución de personas con conocimientos, experiencia y casos de uso más amplios puede contribuir a producir algo que sea de más utilidad para una población más extensa. Sin embargo, el proceso de estandarización no siempre es fácil. Hay trampas y obstáculos. A veces el proceso toma tanto tiempo que el resultado ya no es relevante.</p>
	<p>Cada organización de definición de estándares tiende a tener su propio proceso orientado alrededor de su campo y sus participantes. Explicar todos los detalles del funcionamiento del IETF va más allá del alcance de este blog. La página "<a href="https://www.ietf.org/how/" target="_blank">Cómo trabajamos</a>" del IETF es un excelente punto de partida que trata muchos aspectos. Como de costumbre, la mejor manera de hacerse una idea es implicarse personalmente. Es tan fácil como unirse a una lista de correo o participar en la discusión de un repositorio de GitHub pertinente.</p>
	<h2 id="c-digo-en-ejecuci-n-de-cloudflare"><strong>Código en ejecución de Cloudflare</strong></h2>
	<p>Cloudflare se enorgullece de haber adoptado tempranamente protocolos nuevos y cambiantes. Tenemos un largo historial de adopción de nuevos estándares, como <a href="https://blog.cloudflare.com/introducing-http2/">HTTP/2</a>. También probamos funciones experimentales o aún no definitivas, como <a href="https://blog.cloudflare.com/introducing-tls-1-3/">TLS 1.3</a> y <a href="https://blog.cloudflare.com/introducing-spdy/">SPDY</a>.</p>
	<p>En relación con el proceso de estandarización del IETF, desplegar código en ejecución en redes reales a través de un conjunto diverso de sitios web nos ayuda a entender cómo funcionará el protocolo en la práctica. Combinamos nuestros conocimientos actuales con información experimental para ayudar a mejorar el código en ejecución y, si es necesario, las respuestas a problemas o las mejoras del Grupo de trabajo que está estandarizando un protocolo.</p>
	<p>Probar cosas nuevas no es la única prioridad. Una parte de ser innovadores consiste en saber cuándo es el momento de avanzar y poner innovaciones anteriores en perspectiva. A veces, eso se relaciona con protocolos orientados a la seguridad, por ejemplo, <a href="https://blog.cloudflare.com/sslv3-support-disabled-by-default-due-to-vulnerability/">el SSLv3 de Cloudflare desactivado por defecto</a>debido a la vulnerabilidad de POODLE. En otros casos, los protocolos se reemplazan por otros más avanzados tecnológicamente; Cloudflare <a href="https://blog.cloudflare.com/deprecating-spdy/">dejó en desuso SPDY</a> en favor de HTTP/2.</p>
	<p>La introducción y el abandono de los protocolos correspondientes se representa en la Cronología de la web segura con <strong>líneas naranjas</strong>. Las líneas punteadas verticales ayudan a correlacionar los eventos de Cloudflare con los documentos relevantes del IETF. Por ejemplo, Cloudflare introdujo soporte TLS 1.3 en septiembre de 2016, mientras que el documento final, <a href="https://tools.ietf.org/html/rfc8446" target="_blank">RFC 8446</a>, se publicó casi dos años después, en agosto de 2018.</p>
	<p></p>
	<figure class="kg-card kg-image-card"><img src="https://blog.cloudflare.com/content/images/2019/01/cf-events.png" class="kg-image"></figure>
	<p></p>
	<h2 id="refactorizar-en-httpbis"><strong>Refactorizar en HTTPbis</strong></h2>
	<p>HTTP/1.1 es un protocolo muy acertado y la Cronología muestra que no hubo mucha actividad en el IETF después de 1999. Sin embargo, la verdad es que los años de uso activo proporcionaron la experiencia de implementación que desveló problemas latentes en la <a href="https://tools.ietf.org/html/rfc2616" target="_blank">RFC 2616</a>, que causaban algunos problemas de interoperabilidad. Además, el protocolo se extendió a otras RFC, como la 2817 y la 2818. Se decidió en 2007 impulsar una nueva actividad para mejorar la especificación del protocolo HTTP. Se llamó HTTPbis ("bis" en latín significa "dos", "dos veces" o "repetición") y tomó la forma de un nuevo Grupo de trabajo. El <a href="https://tools.ietf.org/wg/httpbis/charters?item=charter-httpbis-2007-10-23.txt" target="_blank">cuadro</a> original es bastante claro en su descripción de los problemas que se intentaban resolver.</p>
	<p>En definitiva, HTTPbis optó por refactorizar la <a href="https://tools.ietf.org/html/rfc2616" target="_blank">RFC 2616</a>. Incorporaría correcciones de erratas e incluiría algunos elementos de otras especificaciones que habían sido publicadas mientras tanto. Se decidió dividir el documento en partes. Esto dio lugar a 6 borradores de Internet publicados en diciembre de 2007:</p>
	<ul>
		<li>draft-ietf-httpbis-p1-messaging</li>
		<li>draft-ietf-httpbis-p2-semantics</li>
		<li>draft-ietf-httpbis-p4-conditional</li>
		<li>draft-ietf-httpbis-p5-range</li>
		<li>draft-ietf-httpbis-p6-cache</li>
		<li>draft-ietf-httpbis-p7-auth</li>
	</ul>
	<p></p>
	<figure class="kg-card kg-image-card"><img src="https://blog.cloudflare.com/content/images/2019/01/http11-refactor.png" class="kg-image"></figure>
	<p></p>
	<p>El diagrama muestra cómo este trabajo avanzó a lo largo de un prolongado proceso de redacción de 7 años, con 27 versiones publicadas, antes de la estandarización final. En junio de 2014, se lanzó la llamada serie RFC 723x (donde la x iba de 0 a 5). El presidente del Grupo de trabajo de HTTPbis celebró este logro con la aclamación: "la <a href="https://www.mnot.net/blog/2014/06/07/rfc2616_is_dead" target="_blank">RFC2616 ha muerto</a>". Si no estaba ya claro, estos nuevos documentos dejaban obsoletas las antiguas <a href="https://tools.ietf.org/html/rfc2616" target="_blank">RFC 2616</a>.</p>
	<h2 id="-qu-tiene-esto-que-ver-con-http-3"><strong>¿Qué tiene esto que ver con HTTP/3?</strong></h2>
	<p>Mientras que el IETF estaba ocupado trabajando en la serie 723x de la RFC, el mundo no se paró. La gente continuó mejorando, ampliando y experimentando con HTTP en Internet. Entre ellos se encontraba Google, que había comenzado a experimentar con algo llamado SPDY (pronunciado "speedy"). Este protocolo se promocionó como una mejora del rendimiento de la navegación web, un caso de uso principal de HTTP. A finales de 2009 se anunció SPDY v1, y fue seguido rápidamente por SPDY v2 en 2010.</p>
	<p>Quiero evitar entrar en los detalles técnicos de SPDY. Dejaremos el tema para otro día. Lo importante es entender que SPDY tomó los paradigmas básicos de HTTP y modificó ligeramente el formato de intercambio para obtener mejoras. En retrospectiva, podemos ver que HTTP ha delimitado claramente la semántica y la sintaxis. La semántica describe el concepto de los intercambios de solicitud y respuesta incluyendo métodos, códigos de estado, campos de encabezado (metadatos) y cuerpos (carga). La sintaxis describe cómo asignar la semántica a los bytes en la conexión.</p>
	<p>HTTP/0.9, 1.0 y 1.1 comparten mucha semántica. También comparten la sintaxis en forma de cadenas de caracteres que se envían mediante conexiones TCP. SPDY tomó la semántica de HTTP/1.1 y cambió la sintaxis de cadenas a binario. Este es un tema muy interesante, pero hoy no nos enredaremos más en él.</p>
	<p>Los experimentos de Google con SPDY mostraron que el cambio de la sintaxis HTTP prometía y que convenía mantener la semántica existente de HTTP. Por ejemplo, mantener el formato de URL al utilizar https:// evitaba muchos problemas que podrían haber afectado a la adopción.</p>
	<p>Después de haber visto algunos de los resultados positivos, el IETF decidió que era tiempo de considerar cómo podría ser HTTP/2.0. Las <a href="https://github.com/httpwg/wg-materials/blob/gh-pages/ietf83/HTTP2.pdf" target="_blank">diapositivas</a> de la sesión de HTTPbis celebrada durante la reunión 83 del IETF en marzo de 2012 muestra los requisitos, objetivos y mediciones del éxito que se establecieron. También se afirma claramente que "HTTP/2.0 solo indica que el formato de transferencia no es compatible con el de HTTP/1.x".</p>
	<p></p>
	<figure class="kg-card kg-image-card"><img src="https://blog.cloudflare.com/content/images/2019/01/http2-standardisation.png" class="kg-image"></figure>
	<p></p>
	<p>Durante esa reunión, se invitó a la comunidad a compartir propuestas. Los borradores de Internet que se sometieron a examen incluían <a href="https://tools.ietf.org/html/draft-mbelshe-httpbis-spdy-00" target="_blank">draft-mbelshe-httpbis-spdy-00</a>, <a href="https://tools.ietf.org/html/draft-montenegro-httpbis-speed-mobility-00" target="_blank">draft-montenegro-httpbis-speed-mobility-00 </a> y <a href="https://tools.ietf.org/html/draft-tarreau-httpbis-network-friendly-00" target="_blank">draft-tarreau-httpbis-network-friendly-00</a>. En definitiva, se aprobó el borrador SPDY y en noviembre de 2012 se inició <a href="https://tools.ietf.org/html/draft-ietf-httpbis-http2-00" target="_blank">draft-ietf-httpbis-http2-00</a>. Después de 18 borradores a lo largo de un período de 2 años, <a href="https://tools.ietf.org/html/rfc7540" target="_blank">RFC 7540</a>-HTTP/2 se publicó en el año 2015. Durante este período de especificación, la sintaxis precisa de HTTP/2 divergió lo suficiente para hacer HTTP/2 y SPDY incompatibles.</p>
	<p>Estos años fueron un período de mucha actividad en el trabajo relacionado con el HTTP en el IETF, con la refactorización de HTTP/1.1 y la estandarización de HTTP/2 llevándose a cabo en paralelo. Eso contrasta claramente con los muchos años de silencio de la primera década del 2000. Consulta la cronología completa para apreciar realmente la cantidad de trabajo que se llevó a cabo.</p>
	<p>Aunque HTTP/2 estaba en proceso de estandarización, todavía había beneficios que obtener al utilizar y experimentar con SPDY. Cloudflare <a href="https://blog.cloudflare.com/spdy-now-one-click-simple-for-any-website/">introdujo soporte para SPDY</a> en agosto de 2012 y solamente lo dejó en desuso en febrero de 2018, cuando nuestras estadísticas demostraron que menos del 4 % de los clientes de web continuaban queriendo SPDY. Mientras tanto, <a href="https://blog.cloudflare.com/introducing-http2/">introdujimos soporte para HTTP/2</a> en diciembre de 2015, no mucho tiempo después de que se publicara la RFC, cuando nuestro análisis indicó que una proporción significativa de clientes de web podría beneficiarse de ello.</p>
	<p>El soporte de los clientes de web de los protocolos SPDY y HTTP/2 dio preferencia a la opción segura de usar TLS. La introducción de <a href="https://blog.cloudflare.com/introducing-universal-ssl/">Universal SSL</a> en septiembre de 2014 ayudó a asegurar que todos los sitios web registrados en Cloudflare pudieran beneficiarse de estos nuevos protocolos cuando los introdujimos.</p>
	<h3 id="gquic"><strong>gQUIC</strong></h3>
	<p>Google continuó experimentando entre 2012 y 2015; lanzó SPDY v3 y v3.1. También comenzó a trabajar en gQUIC (que se pronunciaba entonces "quick") y la especificación pública inicial estuvo disponible a principios de 2012.</p>
	<p>Las versiones tempranas del gQUIC hacían uso de la forma SPDY v3 de sintaxis HTTP. Esta elección era lógica porque HTTP/2 todavía no estaba terminado. La sintaxis binaria SPDY se empaquetaba en paquetes QUIC que podían enviarse en datagramas UDP. Era una salida del transporte TCP del que tradicionalmente había dependido HTTP. Uniendo todo esto, teníamos lo siguiente:</p>
	<p></p>
	<figure class="kg-card kg-image-card kg-card-hascaption"><img src="https://blog.cloudflare.com/content/images/2019/01/gquic-stack.png" class="kg-image">
		<figcaption>SPDY sobre la capa de la tarta de gQUIC</figcaption>
	</figure>
	<p></p>
	<p>gQUIC usaba trucos ingeniosos para lograr rendimiento. Uno de ellos fue romper la clara estratificación entre la aplicación y el transporte. En la práctica, esto significaba que gQUIC solamente era compatible con HTTP. Hasta el punto que gQUIC, entonces denominado "QUIC", era sinónimo de la próxima versión candidata a HTTP. A pesar de los cambios de QUIC en los últimos años, que revisaremos en breve, hoy en día, la gente entiende hoy que el término QUIC significa esa variante inicial solo de HTTP. Lamentablemente, esto suele llevar a confusión cuando se habla del protocolo.</p>
	<p>gQUIC continuó experimentando y finalmente cambió a una sintaxis mucho más cercana a HTTP/2. Era tan cercana que, de hecho, la mayoría de la gente simplemente la llamaba "HTTP/2 sobre QUIC". Sin embargo, debido a las limitaciones técnicas, había algunas diferencias muy sutiles. Un ejemplo se relaciona con cómo los encabezados HTTP se serializaron e intercambiaron. Es una diferencia menor, pero en la práctica significa que HTTP/2 sobre gQUIC era incompatible con el HTTP/2 del IETF.</p>
	<p>Por último, pero no menos importante, siempre debemos considerar las cuestiones de seguridad de los protocolos de Internet. gQUIC optó por no utilizar TLS para proporcionar seguridad. En cambio, Google desarrolló un enfoque diferente denominado QUIC Crypto. Uno de los aspectos interesantes de este fue un nuevo método para acelerar los protocolos de enlace de seguridad. Un cliente que previamente había establecido una sesión segura con un servidor podía reutilizar la información para un protocolo de enlace "de ida y vuelta en tiempo cero", o 0-RTT (<em>0 round-trip time</em> en inglés). El 0-RTT se incorporó después a TLS 1.3.</p>
	<h2 id="-ya-podr-as-explicar-lo-que-es-http-3"><strong>¿Ya podrías explicar lo que es HTTP/3?</strong></h2>
	<p>Casi.</p>
	<p>Ya debes haber comprendido cómo funciona la estandarización y gQUIC no es muy diferente. Había bastante interés en que las especificaciones de Google se redactaran en formato de borrador de Internet. En junio de 2015 se envió <a href="https://tools.ietf.org/html/draft-tsvwg-quic-protocol-00" target="_blank">draft-tsvwg-quic-protocol-00</a>, titulado "QUIC: un transporte seguro y fiable basado en UDP para HTTP/2". Ten en cuenta mi anterior afirmación de que la sintaxis era casi la de HTTP/2.</p>
	<p>Google <a href="https://groups.google.com/a/chromium.org/forum/#!topic/proto-quic/otGKB4ytAyc" target="_blank">anunció</a> que se celebraría un Bar BoF en el IETF 93 en Praga. Quienes tengan curiosidad sobre qué es un "Bar BoF" pueden consultar <a href="https://tools.ietf.org/html/rfc6771" target="_blank">RFC 6771</a>. Pista: BoF significa pájaros de igual plumaje (<em>birds of a feathe</em>r en inglés).</p>
	<p></p>
	<figure class="kg-card kg-image-card"><img src="https://blog.cloudflare.com/content/images/2019/01/quic-standardisation.png" class="kg-image"></figure>
	<p></p>
	<p>El resultado de este compromiso con el IETF era, en resumen, que QUIC parecía ofrecer muchas ventajas en la capa de transporte y que debía disociarse de HTTP. La separación clara entre las capas debía reintroducirse. Además, se prefería regresar a un enlace de seguridad basado en TLS (que no estaba tan mal, ya que TLS 1.3 estaba en marcha en esta etapa y ya incorporaba enlaces de seguridad de 0-RTT).</p>
	<p>Un año después, en 2016, se presentó un nuevo conjunto de borradores de Internet:</p>
	<ul>
		<li><a href="https://tools.ietf.org/html/draft-hamilton-quic-transport-protocol-00" target="_blank">draft-hamilton-quic-transport-protocol-00</a></li>
		<li><a href="https://tools.ietf.org/html/draft-thomson-quic-tls-00" target="_blank">draft-thomson-quic-tls-00</a></li>
		<li><a href="https://tools.ietf.org/html/draft-iyengar-quic-loss-recovery-00" target="_blank">draft-iyengar-quic-loss-recovery-00</a></li>
		<li><a href="https://tools.ietf.org/html/draft-shade-quic-http2-mapping-00" target="_blank">draft-shade-quic-http2-mapping-00</a></li>
	</ul>
	<p>Aquí es donde aparece otra fuente de confusión sobre HTTP y QUIC. <a href="https://tools.ietf.org/html/draft-shade-quic-http2-mapping-00" target="_blank">draft-shade-quic-http2-mapping-00</a> se titula "La semántica de HTTP/2 utilizando el protocolo de transporte QUIC" y se describe como "una asignación de la semántica de HTTP/2 sobre QUIC". Sin embargo, es un nombre poco apropiado. HTTP/2 cambiaba la sintaxis pero mantenía la semántica. Además, "HTTP/2 sobre gQUIC" tampoco fue nunca una descripción precisa de la sintaxis, por las razones que mencioné anteriormente. No pierdas esto de vista.</p>
	<p>Esta versión de QUIC del IETF iba a ser un protocolo de transporte completamente nuevo. Sería un proyecto muy amplio, y antes de meterse de lleno en tales compromisos, al IETF le gusta medir el interés real de sus miembros. Para ello, se llevó a cabo un encuentro formal de <a href="https://www.ietf.org/how/bofs/" target="_blank">BoF</a> en la reunión del IETF 96 en Berlín, en el año 2016. Tuve la suerte de participar en la sesión en persona y las <a href="https://datatracker.ietf.org/meeting/96/materials/slides-96-quic-0" target="_blank">diapositivas</a> no le hacen justicia. Cientos de personas asistieron a la reunión, como se ve en la <a href="https://www.flickr.com/photos/adam-roach/28343796722/in/photostream/" target="_blank">foto</a> de Adam Roach. Al final de la sesión se llegó a un consenso; QUIC se adoptaría y normalizaría en el IETF.</p>
	<p>El primer borrador de Internet de QUIC del IETF para la asignación de HTTP a QUIC, <a href="https://tools.ietf.org/html/draft-ietf-quic-http-00" target="_blank">draft-ietf-quic-http-00</a>, usó el enfoque de Ronseal y simplificó su nombre a "HTTP sobre QUIC". Por desgracia, no se terminó el trabajo completamente y el término HTTP/2 aparecía por todo el texto. Mike Bishop, el nuevo editor de borradores de Internet, se dio cuenta y comenzó a corregir las referencias incorrectas a HTTP/2. En el borrador 01, la descripción se cambió a "una asignación de la semántica de HTTP sobre QUIC".</p>
	<p>Poco a poco, con el tiempo y las versiones, el uso del término "HTTP/2" disminuyó y las instancias se convirtieron en meras referencias a partes de la <a href="https://tools.ietf.org/html/rfc7540" target="_blank">RFC 7540</a>. Si avanzamos dos años hasta octubre de 2018, el borrador de Internet está ahora en la versión 16. Si bien HTTP sobre QUIC guarda parecido con HTTP/2, finalmente es una sintaxis HTTP independiente y compatible que no retrocede. Sin embargo, para quienes no siguen muy de cerca el desarrollo del IETF (un porcentaje muy muy grande de población de la Tierra), el nombre del documento no recoge esta diferencia. Uno de los propósitos principales de la estandarización es facilitar la comunicación y la interoperabilidad. Sin embargo, algo tan simple como un nombre puede contribuir significativamente a la confusión en la comunidad.</p>
	<p>Recordemos lo dicho en el 2012, "HTTP/2.0 solo significa que el formato de transferencia no es compatible con el de HTTP/1.x". El IETF había seguido esa pista inicial. Después de mucha deliberación antes y durante la reunión del IETF 103, se llegó a un consenso para cambiar el nombre "HTTP sobre QUIC" a HTTP/3. El mundo está ahora mejor ubicado y podemos pasar a debates más importantes.</p>
	<h2 id="-pero-las-rfc-7230-y-7231-no-confirman-tu-definici-n-de-la-sem-ntica-y-la-sintaxis-"><strong>¡Pero las RFC 7230 y 7231 no confirman tu definición de la semántica y la sintaxis!</strong></h2>
	<p>A veces los títulos de los documentos pueden ser confusos. Los documentos HTTP actuales que describen la sintaxis y la semántica son:</p>
	<ul>
		<li><a href="https://tools.ietf.org/html/rfc7230" target="_blank">RFC 7230</a> - Protocolo de transferencia de hipertexto (HTTP/1.1): sintaxis de mensaje y enrutamiento</li>
		<li><a href="https://tools.ietf.org/html/rfc7231" target="_blank">RFC 7231</a> - Protocolo de transferencia de hipertexto (HTTP/1.1): semántica y contenido</li>
	</ul>
	<p>Existe la posibilidad de que se interpreten equivocadamente estos nombres y creo que la semántica fundamental de HTTP es específica para las versiones de HTTP, como HTTP/1.1. Sin embargo, es un efecto secundario involuntario del árbol genealógico de HTTP. La buena noticia es que el Grupo de trabajo de HTTPbis está tratando de solucionar esto. Algunos valientes miembros están realizando otra ronda de revisión del documento. Como dijo Roy Fielding: "¡Una vez más!". Este trabajo está en marcha ahora mismo y se conoce como la actividad principal de HTTP (también puedes haber oído de ello con el apodo de HTTPtre o HTTPter; es difícil poner nombre a ciertas cosas). Así, se condensarán los seis borradores en tres:</p>
	<ul>
		<li>Semántica de HTTP (draft-ietf-httpbis-semantics)</li>
		<li>Caché de HTTP (draft-ietf-httpbis-caching)</li>
		<li>Sintaxis de mensaje y enrutamiento de HTTP/1.1 (draft-ietf-httpbis-messaging)</li>
	</ul>
	<p>Bajo esta nueva estructura, se hace más evidente que HTTP/2 y HTTP/3 son definiciones de sintaxis para la semántica común de HTTP. Eso no significa que no tengan sus propias características más allá de la sintaxis, pero ayudará a enmarcar la a discusión en el futuro.</p>
	<h2 id="tirando-de-todo-juntos"><strong>Tirando de todo, juntos</strong></h2>
	<p>Esta entrada de blog ha dado un repaso superficial al proceso de estandarización de HTTP en el IETF en las últimas tres décadas. Sin entrar en muchos detalles técnicos, he intentado explicar cómo hemos llegado a HTTP/3 hoy. Si te has saltado las partes del centro y quieres un resumen, aquí lo tienes: HTTP/3 es solo una nueva sintaxis HTTP que funciona en QUIC del IETF, un transporte multiplexado y seguro bastado en UDP. Hay muchas áreas técnicas interesantes para continuar explorando, pero habrá que esperar a otro día.</p>
	<p>A lo largo de esta publicación, hemos explorado capítulos importantes en el desarrollo de HTTP y TLS de manera aislada. Cerramos el blog añadiéndolos todos a la Cronología de la web segura completa, presentada abajo. Puedes usarla para investigar la historia en detalle a tu manera. Y para súper detectives, no olvidéis consultar la <a href="https://blog.cloudflare.com/content/images/2019/01/web_timeline_large1.svg">versión completa que incluye los números de los borradores</a>.</p>
	<figure class="kg-card kg-image-card"><img src="https://blog.cloudflare.com/content/images/2019/01/cf-secure-web-timeline-1.png" class="kg-image"></figure>
	<p>Etiquetado con <a href="https://blog.cloudflare.com/tag/ietf/">IETF</a>, <a href="https://blog.cloudflare.com/tag/quic/">QUIC</a>, <a href="https://blog.cloudflare.com/tag/tls/">TLS</a>, Seguridad<br></p>
</div>