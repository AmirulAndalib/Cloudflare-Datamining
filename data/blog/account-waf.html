<div class="mb2 gray5">3 min read</div>
<div class="post-content lh-copy gray1">
	<figure class="kg-card kg-image-card ">

		<img src="https://cf-assets.www.cloudflare.com/slt3lc6tev37/2b6xAn6NnDqYyz7fWXQ5Zw/875ae0acf6c57dab32bd5adf5662bf6f/image2-10.png" alt="Account WAF now available to Enterprise customers" class="kg-image" width="1800" height="1013" loading="lazy">

	</figure>
	<p>Do you manage more than a single domain? If the answer is yes, now you can manage a single WAF configuration for all your enterprise domains.</p>
	<p>Cloudflare has been built around the concept of <i>zone</i>, which is broadly equivalent to a domain. Customers can add multiple domains to a Cloudflare account, and every domain has its own independent security configuration. If you deploy a rule to block bots on <i>example.com</i>, you will need to rewrite the same rule on <i>example.org</i>. You’ll then need to visit the dashboard of every zone when you want to update it. This applies to all WAF products including Managed, Firewall and Rate Limiting rules.</p>
	<p>If you have just two domains that’s not a big deal. But if you manage hundreds or thousands of domains like most large organizations do. Dealing with individual domains becomes time-consuming, expensive or outright impractical. Of course, you could build automation relying on our API or Terraform. This will work seamlessly but not all organizations have the capabilities to manage this level of complexity. Furthermore, having a Terraform integration doesn’t fully replicate the experience or give the confidence provided by interacting with a well-designed UI.</p>
	<p>Following Cloudflare ​​philosophy of making it easy to deploy security products, we are launching Account WAF.</p>
	<figure class="kg-card kg-image-card ">

		<img src="https://cf-assets.www.cloudflare.com/slt3lc6tev37/4wnQ6CRlZQDgACYUfPRSBQ/d2516e7a016d4e11abec826a21d50e86/s0YK5qRTeaWI5GYi4Aq8dcUxUOSc2YPUSWmefJKouPIGMk6nP4Uma_VKbqYeF4LyzdMoUtY2NYsSubkeUMajuPHp_suz38WN4gxwC4Y3vjzNHD9teHQtVfola-ck.png" alt="With Account WAF, you can deploy rulesets on multiple domains so you can manage a single (or just a few) WAF configuration for your entire account." class="kg-image" width="1600" height="627" loading="lazy">

	</figure>
	<p><i>Customers can now have a single WAF deployment for all their enterprise domains.</i>&nbsp;</p>
	<h3>Welcome to the simpler world of Account WAF</h3>
	<p>You might wonder why an organization might have thousands of domains, but this is actually very common.</p>
	<p>For example, an <a href="https://www.cloudflare.com/ecommerce">e-commerce business</a> can have tens of marketing domains for all its brands localized in different countries, they’ll have APIs that power their e-commerce sites and mobile applications, applications integrated with partners, logistics services or payment systems, domains used by employees, and so on and so forth. The structure of these accounts can be very complex.</p>
	<p>Now, let’s imagine that you need to deal with the simple use case of deploying Cloudflare Managed ruleset across all your production domains.</p>
	<p>Without Account WAF you’d need to track down all the correct domains and visit the WAF page of each one of them, deploy the ruleset and possibly add overrides to select only the attack vectors you are interested in. This is messy and mistakes are easy.</p>
	<p>With Account WAF, you can now deploy a managed ruleset just once while providing the list of hostnames where you want it on. With <i>deploying</i> here we refer to writing a filter that defines what requests we should run (or execute) the ruleset on. The filter works like a normal WAF Custom Rule, where you can take advantage of the power of the <a href="https://developers.cloudflare.com/ruleset-engine/rules-language">Wirefilter syntax</a> and use any parameter of the HTTP request, metadata and computed values, such as Bot Score or our new WAF Attack Score. For example, you can run a ruleset only on traffic with a specific User Agent, or only on your API traffic.</p><!--kg-card-begin: html-->
	<div style="position: relative; padding-top: 79.6875%;"><iframe src="https://customer-eq7kiuol0tk9chox.cloudflarestream.com/0aed83b35c605cbe92406f2197510a80/iframe?preload=true&amp;poster=https%3A%2F%2Fcustomer-eq7kiuol0tk9chox.cloudflarestream.com%2F0aed83b35c605cbe92406f2197510a80%2Fthumbnails%2Fthumbnail.jpg%3Ftime%3D32s%26height%3D600" style="border: none; position: absolute; top: 0; left: 0; height: 100%; width: 100%;" allow="accelerometer; gyroscope; autoplay; encrypted-media; picture-in-picture;" allowfullscreen="true"></iframe></div><!--kg-card-end: html-->
	<p>You can deploy these rulesets multiple times on your account, so you can have different settings for different groups of domains. For example, you might want to deploy OWASP with different sensitivity levels for your staging domains versus your production domains, or enforce a minimum level of security across all zones (e.g. for legal protection or compliance), before tailoring the security posture of the most sensitive domains. Furthermore, if in the future you are going to add a new domain to your production environment, you can simply add it to the rule filter, and we will start protecting these requests too.</p>
	<h3>It works for all WAF features</h3>
	<p>You can follow a similar flow if you want to deploy WAF Custom or Rate Limiting rules. However, in this case, to simplify management of large numbers of rules, we introduced the concept of Custom Rulesets. Like with managed rules, a ruleset is a group of rules, this time they are user defined. Like in the example above, you can deploy a custom ruleset on a user-defined filter to scope on what portion of your traffic you want to run these rules.</p>
	<p>For example, consider the situation where you want to create two rules for all your domains: one that blocks traffic from a set of countries and then one rule to only allow requests with a non-malicious WAF Attack Score. You will create a custom ruleset with these two rules and then deploy it across your entire account.</p><!--kg-card-begin: html-->
	<div style="position: relative; padding-top: 58.4375%;"><iframe src="https://customer-eq7kiuol0tk9chox.cloudflarestream.com/be754338b633a78d85146ce7f421e2db/iframe?preload=true&amp;poster=https%3A%2F%2Fcustomer-eq7kiuol0tk9chox.cloudflarestream.com%2Fbe754338b633a78d85146ce7f421e2db%2Fthumbnails%2Fthumbnail.jpg%3Ftime%3D53s%26height%3D600" style="border: none; position: absolute; top: 0; left: 0; height: 100%; width: 100%;" allow="accelerometer; gyroscope; autoplay; encrypted-media; picture-in-picture;" allowfullscreen="true"></iframe></div><!--kg-card-end: html-->
	<p>One thing to note is that Account WAF rulesets (Managed, Custom and Rate Limiting) can be deployed on traffic to domains on Enterprise plans. You won’t be able to run rulesets on traffic of Free, Pro or Biz domains. This condition is enforced by the UI when writing a deployment filter.</p>
	<p>Finally, you can follow the same flow to deploy custom rulesets that contain rate limiting rules. Custom rulesets are designed to contain either custom or rate limiting rules, at this stage these rules cannot be combined in the same ruleset. Please note that the Rate Limiting section will be available in October.</p>
	<h3>Who gets it?</h3>
	<p>Account WAF is an Enterprise only feature. If you are an Enterprise customer on our new Advanced plan, you will get access to the new feature automatically this week. If you are not on our Advanced plan, please reach out to your account team to learn more.</p>
	<h3>Watch on Cloudflare TV</h3><!--kg-card-begin: html-->
	<div style="position: relative; padding-top: 56.25%;"><iframe src="https://customer-rhnwzxvb3mg4wz3v.cloudflarestream.com/15a28a27c4f115533951f075b1fad6b5/iframe?poster=https%3A%2F%2Fcustomer-rhnwzxvb3mg4wz3v.cloudflarestream.com%2F15a28a27c4f115533951f075b1fad6b5%2Fthumbnails%2Fthumbnail.jpg%3Ftime%3D2s%26height%3D600" style="border: none; position: absolute; top: 0; left: 0; height: 100%; width: 100%;" allow="accelerometer; gyroscope; autoplay; encrypted-media; picture-in-picture;" allowfullscreen="true"></iframe></div><!--kg-card-end: html-->
</div>