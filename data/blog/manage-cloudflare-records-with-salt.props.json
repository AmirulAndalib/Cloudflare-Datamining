{
	"locale": "en-us",
	"localesAvailable": [],
	"post": {
		"authors": [
			{
				"name": "Ivan Babrou",
				"slug": "ivan",
				"bio": null,
				"profile_image": "https://cf-assets.www.cloudflare.com/slt3lc6tev37/2PiutF6RYsPG4R5cGpKJgf/c7a9bb4f652a645aa7599524c62503d5/ivan.png",
				"location": null,
				"website": null,
				"twitter": null,
				"facebook": null
			}
		],
		"excerpt": "We use Salt to manage our ever growing global fleet of machines. Salt is great for managing configurations and being the source of truth. We use it for remote command execution and for network automation tasks.",
		"feature_image": "https://cf-assets.www.cloudflare.com/slt3lc6tev37/6G5zavviaQgpTpaH2j7rWN/88d3968c4cc4e8252026ef6c8b99c83b/manage-cloudflare-records-with-salt.jpg",
		"featured": false,
		"html": "<p>We use <a href=\"https://github.com/saltstack/salt\">Salt</a> to manage our ever growing global fleet of machines. Salt is great for managing configurations and being the source of truth. We use it for remote command execution and for <a href=\"/the-internet-is-hostile-building-a-more-resilient-network/\">network automation tasks</a>. It allows us to grow our infrastructure quickly with minimal human intervention.</p>\n            <figure class=\"kg-card kg-image-card \">\n            \n            <Image src=\"https://cf-assets.www.cloudflare.com/slt3lc6tev37/5HTPX88whBMGq7gOYzrjhw/e36a024bc81bba9d326c25e76b5f1cd7/grains.jpg\" alt=\"Salt\" class=\"kg-image\" width=\"1024\" height=\"770\" loading=\"lazy\"/>\n            \n            </figure><p><a href=\"https://creativecommons.org/licenses/by/2.0/\">CC-BY 2.0</a> <a href=\"https://secure.flickr.com/photos/pagedooley/2769134850/\">image</a> by <a href=\"https://secure.flickr.com/photos/pagedooley/\">Kevin Dooley</a></p><p>We got to thinking. Are DNS records not just a piece of the configuration? We concluded that they are and decided to manage our own records from Salt too.</p><p>We are strong believers in <a href=\"https://en.wikipedia.org/wiki/Eating_your_own_dog_food\">eating our own dog food</a>, so we make our employees use the next version of our service before rolling it to everyone else. That way if there&#39;s a problem visiting one of the 5 million websites that use Cloudflare it&#39;ll get spotted quickly internally. This is also why we keep our own DNS records on Cloudflare itself.</p><p>Cloudflare has an <a href=\"https://api.cloudflare.com/\">API</a> that allows you to manage your zones programmatically without ever logging into the dashboard. Until recently, we were using handcrafted scripts to manage our own DNS records via our API. These scripts were in exotic languages like PHP for historical reasons and had interesting behavior that not everybody enjoyed. While we were dogfooding our own APIs, these scripts were pushing the source of truth for DNS out of Salt.</p><p>When we decided to move some zones to Salt, we had a few key motivations:</p><ol><li><p>Single source of truth</p></li><li><p>Peer-reviewed, audited and versioned changes</p></li><li><p>Making things that our customers would want to use</p></li></ol><p>Points 1 and 2 were achieved by having DNS records in a Salt repo. The Salt configuration is itself in git, so we get peer reviews and audit trail for free. We think that we made progress on point 3 also.</p><p>After extensive internal testing and finding a few bugs in our API (that&#39;s what we wanted!), we are happy to announce the public availability of <a href=\"https://github.com/cloudflare/salt-cloudflare\">Cloudflare Salt module</a>.</p><p>If you are familiar with Salt, it should be easy to see how to configure your records via Salt. All you need is the following:</p><p>Create the state <code>cloudflare</code> to deploy your zones:</p>\n            <pre class=\"language-bash\"><code class=\"language-bash\">example.com:\n  cloudflare.manage_zone_records:\n    - zone: {{ pillar[\"cloudflare_zones\"][\"example.com\"]|yaml }}</pre></code>\n            <p>Add a pillar to configure your zone:</p>\n            <pre class=\"language-bash\"><code class=\"language-bash\">cloudflare_zones:\n  example.com:\n    auth_email: ivan@example.com\n    auth_key: auth key goes here\n    zone_id: 0101deadbeefdeadbeefdeadbeefdead\n    records:\n      - name: blog.example.com\n        content: 93.184.216.34\n        proxied: true</pre></code>\n            <p>Here we configure zone <code>example.com</code> to only have one record <code>blog.example.com</code> pointing to <code>93.184.216.34</code> behind Cloudflare.</p><p>You can test your changes before you deploy:</p>\n            <pre class=\"language-bash\"><code class=\"language-bash\">salt-call state.apply cloudflare test=true</pre></code>\n            <p>And then deploy if you are happy with the dry run:</p>\n            <pre class=\"language-bash\"><code class=\"language-bash\">salt-call state.apply cloudflare</pre></code>\n            <p>After the initial setup, all you need is to change the <code>records</code> array in pillar and re-deploy the state. See the <a href=\"https://github.com/cloudflare/salt-cloudflare\">README</a> for more details.</p><p>DNS records are only one part of configuration you may want to change for your Cloudflare domain. We have plans to &quot;saltify&quot; other settings like WAF, caching, page rules and others too.</p><p><a href=\"https://www.cloudflare.com/join-our-team/\">Come work with us</a> if you want to help!</p>",
		"id": "7cpWAbZAOswJhWNOR3oex8",
		"localeList": {
			"name": "Manage Cloudflare records with Salt Config",
			"enUS": "English for Locale",
			"zhCN": "No Page for Locale",
			"zhHansCN": "No Page for Locale",
			"zhTW": "No Page for Locale",
			"frFR": "No Page for Locale",
			"deDE": "No Page for Locale",
			"itIT": "No Page for Locale",
			"jaJP": "No Page for Locale",
			"koKR": "No Page for Locale",
			"ptBR": "No Page for Locale",
			"esLA": "No Page for Locale",
			"esES": "No Page for Locale",
			"enAU": "No Page for Locale",
			"enCA": "No Page for Locale",
			"enIN": "No Page for Locale",
			"enGB": "No Page for Locale",
			"idID": "No Page for Locale",
			"ruRU": "No Page for Locale",
			"svSE": "No Page for Locale",
			"viVN": "No Page for Locale",
			"plPL": "No Page for Locale",
			"arAR": "No Page for Locale",
			"nlNL": "No Page for Locale",
			"thTH": "No Page for Locale",
			"trTR": "No Page for Locale",
			"heIL": "No Page for Locale",
			"lvLV": "No Page for Locale",
			"etEE": "No Page for Locale",
			"ltLT": "No Page for Locale"
		},
		"meta_description": null,
		"metadata": {
			"imgPreview": ""
		},
		"primary_author": {},
		"published_at": "2016-12-14T14:25:52.000+00:00",
		"reading_time": 2,
		"slug": "manage-cloudflare-records-with-salt",
		"tags": [
			{
				"id": "1giXdvOjnUzv03BX3o7XBx",
				"name": "GitHub",
				"slug": "github"
			},
			{
				"id": "5x72ei67SoD11VQ0uqFtpF",
				"name": "API",
				"slug": "api"
			},
			{
				"id": "5fZHv2k9HnJ7phOPmYexHw",
				"name": "DNS",
				"slug": "dns"
			},
			{
				"id": "6QVJOBzgKXUO9xAPEpqxvK",
				"name": "Reliability",
				"slug": "reliability"
			},
			{
				"id": "34hvWpGrMifdjKOSyi3610",
				"name": "Salt",
				"slug": "salt"
			}
		],
		"title": "Manage Cloudflare records with Salt",
		"updated_at": "2024-08-27T02:32:10.959Z",
		"url": "https://blog.cloudflare.com/manage-cloudflare-records-with-salt"
	},
	"translations": {
		"posts.by": "By",
		"footer.gdpr": "GDPR",
		"lang_blurb1": "This post is also available in {lang1}.",
		"lang_blurb2": "This post is also available in {lang1} and {lang2}.",
		"lang_blurb3": "This post is also available in {lang1}, {lang2} and {lang3}.",
		"footer.blurb": "Cloudflare's connectivity cloud protects <a target='_blank' href='https://www.cloudflare.com/network-services/' rel='noreferrer'>entire corporate networks</a>, helps customers build <a target='_blank' href='https://workers.cloudflare.com/' rel='noreferrer'>Internet-scale applications efficiently</a>, accelerates any <a target='_blank' href='https://www.cloudflare.com/performance/accelerate-internet-applications/' rel='noreferrer'>website or Internet application</a>, <a target='_blank' href='https://www.cloudflare.com/ddos/' rel='noreferrer'>wards off DDoS attacks</a>, keeps <a target='_blank' href='https://www.cloudflare.com/application-security/' rel='noreferrer'>hackers at bay</a>, and can help you on <a target='_blank' href='https://www.cloudflare.com/products/zero-trust/' rel='noreferrer'>your journey to Zero Trust</a>.<br/><br/>Visit <a target='_blank' href='https://one.one.one.one/' rel='noreferrer'>1.1.1.1</a> from any device to get started with our free app that makes your Internet faster and safer.<br/><br/>To learn more about our mission to help build a better Internet, <a target='_blank' href='https://www.cloudflare.com/learning/what-is-cloudflare/' rel='noreferrer'>start here</a>. If you&apos;re looking for a new career direction, check out <a target='_blank' href='http://www.cloudflare.com/careers' rel='noreferrer'>our open positions</a>.",
		"footer.press": "Press",
		"header.title": "The Cloudflare Blog",
		"footer.careers": "Careers",
		"footer.company": "Company",
		"footer.support": "Support",
		"footer.the_net": "theNet",
		"footer.our_team": "Our team",
		"footer.webinars": "Webinars",
		"page.more_posts": "More posts",
		"posts.time_read": "{time} min read",
		"footer.community": "Community",
		"footer.resources": "Resources",
		"footer.solutions": "Solutions",
		"footer.trademark": "Trademark",
		"header.subscribe": "Subscribe",
		"footer.compliance": "Compliance",
		"footer.free_plans": "Free plans",
		"footer.impact_ESG": "Impact/ESG",
		"posts.follow_on_X": "Follow on X",
		"footer.help_center": "Help center",
		"footer.network_map": "Network Map",
		"header.please_wait": "Please Wait",
		"page.related_posts": "Related posts",
		"footer.case_studies": "Case Studies",
		"footer.connect_2024": "Connect 2024",
		"footer.terms_of_use": "Terms of Use",
		"footer.white_papers": "White Papers",
		"footer.cloudflare_tv": "Cloudflare TV",
		"footer.community_hub": "Community Hub",
		"footer.compare_plans": "Compare plans",
		"footer.contact_sales": "Contact Sales",
		"header.contact_sales": "Contact Sales",
		"header.email_address": "Email Address",
		"page.error.not_found": "Page not found",
		"footer.developer_docs": "Developer docs",
		"footer.privacy_policy": "Privacy Policy",
		"footer.request_a_demo": "Request a demo",
		"page.continue_reading": "Continue reading",
		"footer.analysts_report": "Analyst reports",
		"footer.for_enterprises": "For enterprises",
		"footer.getting_started": "Getting Started",
		"footer.learning_center": "Learning Center",
		"footer.project_galileo": "Project Galileo",
		"pagination.newer_posts": "Newer Posts",
		"pagination.older_posts": "Older Posts",
		"posts.social_buttons.x": "Discuss on X",
		"footer.about_cloudflare": "About Cloudflare",
		"footer.athenian_project": "Athenian Project",
		"footer.become_a_partner": "Become a partner",
		"footer.cloudflare_radar": "Cloudflare Radar",
		"footer.network_services": "Network services",
		"footer.trust_and_safety": "Trust & Safety",
		"header.get_started_free": "Get Started Free",
		"page.search.placeholder": "Search Cloudflare",
		"footer.cloudflare_status": "Cloudflare Status",
		"footer.cookie_preference": "Cookie Preferences",
		"header.valid_email_error": "Must be valid email.",
		"footer.connectivity_cloud": "Connectivity cloud",
		"footer.developer_services": "Developer services",
		"footer.investor_relations": "Investor relations",
		"page.not_found.error_code": "Error Code: 404",
		"footer.logos_and_press_kit": "Logos & press kit",
		"footer.application_services": "Application services",
		"footer.get_a_recommendation": "Get a recommendation",
		"posts.social_buttons.reddit": "Discuss on Reddit",
		"footer.sse_and_sase_services": "SSE and SASE services",
		"page.not_found.outdated_link": "You may have used an outdated link, or you may have typed the address incorrectly.",
		"footer.report_security_issues": "Report Security Issues",
		"page.error.error_message_page": "Sorry, we can't find the page you are looking for.",
		"header.subscribe_notifications": "Subscribe to receive notifications of new posts:",
		"footer.cloudflare_for_campaigns": "Cloudflare for Campaigns",
		"header.subscription_confimation": "Subscription confirmed. Thank you for subscribing!",
		"posts.social_buttons.hackernews": "Discuss on Hacker News",
		"footer.diversity_equity_inclusion": "Diversity, equity & inclusion",
		"footer.critical_infrastructure_defense_project": "Critical Infrastructure Defense Project"
	}
}