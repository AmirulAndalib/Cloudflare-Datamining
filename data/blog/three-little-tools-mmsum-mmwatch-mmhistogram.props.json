{
	"locale": "en-us",
	"post": {
		"id": "5d16453b41acde0011a95629",
		"uuid": "4fae06b8-67c9-40b1-981c-0ee37d8a9c25",
		"title": "Three little tools: mmsum, mmwatch, mmhistogram",
		"slug": "three-little-tools-mmsum-mmwatch-mmhistogram",
		"html": "<!--kg-card-begin: markdown--><p>In a recent blog post, my colleague <a href=\"http://blog.cloudflare.com/author/marek-majkowski/\">Marek</a> talked about some <a href=\"http://blog.cloudflare.com/ssdp-100gbps/\">SSDP-based DDoS</a> activity we'd been seeing recently. In that blog post he used a tool called <code>mmhistogram</code> to output an ASCII histogram.</p>\n<p>That tool is part of a small suite of command-line tools that can be handy when messing with data. Since a reader asked for them to be open sourced... here they are.</p>\n<h3 id=\"mmhistogram\">mmhistogram</h3>\n<p>Suppose you have the following CSV of the ages of major Star Wars characters at the time of Episode IV:</p>\n<pre><code>Anakin Skywalker (Darth Vader),42\nBoba Fett,32\nC-3PO,32\nChewbacca,200\nCount Dooku,102\nDarth Maul,54\nHan Solo,29\nJabba the Hutt,600\nJango Fett,66\nJar Jar Binks,52\nLando Calrissian,31\nLeia Organa (Princess Leia),19\nLuke Skywalker,19\nMace Windu,72\nObi-Wan Kenobi,57\nPalpatine,82\nQui-Gon Jinn,92\nR2-D2,32\nShmi Skywalker,72\nWedge Antilles,21\nYoda,896\n</code></pre>\n<p>You can get an ASCII histogram of the ages as follows using the <code>mmhistogram</code> tool.</p>\n<pre><code>$ cut -d, -f2 epiv | mmhistogram -t &quot;Age&quot;\nAge min:19.00 avg:123.90 med=54.00 max:896.00 dev:211.28 count:21\nAge:\n value |-------------------------------------------------- count\n     0 |                                                   0\n     1 |                                                   0\n     2 |                                                   0\n     4 |                                                   0\n     8 |                                                   0\n    16 |************************************************** 8\n    32 |                         ************************* 4\n    64 |             ************************************* 6\n   128 |                                            ****** 1\n   256 |                                                   0\n   512 |                                      ************ 2\n</code></pre>\n<p>Handy for getting a quick sense of the data. (These charts are inspired by the <a href=\"http://blog.cloudflare.com/revenge-listening-sockets/\">ASCII output from systemtap</a>).</p>\n<h3 id=\"mmwatch\">mmwatch</h3>\n<p>The <code>mmwatch</code> tool is handy if you want to look at output from a command-line tool that provides some snapshot of values, but need to have a rate.</p>\n<p>For example, here's <code>df -H</code> on my machine:</p>\n<pre><code>$ df -H\nFilesystem             Size   Used  Avail Capacity  iused   ifree %iused  Mounted on\n/dev/disk1             250G   222G    28G    89% 54231161 6750085   89%   /\ndevfs                  384k   384k     0B   100%     1298       0  100%   /dev\nmap -hosts             0B     0B     0B   100%        0       0  100%   /net\nmap auto_home          0B     0B     0B   100%        0       0  100%   /home\n/dev/disk4             7.3G    50M   7.2G     1%    12105 1761461    1%   \n/Volumes/LANGDON\n</code></pre>\n<p>Now imagine you were interested in understanding the rate of change in iused and ifree. You can with <code>mmwatch</code>. It's just like <code>watch</code> but looks for changing numbers and interprets them as rates:</p>\n<pre><code>$ mmwatch 'df -H'\n</code></pre>\n<p>Here's a short GIF showing it working:</p>\n<p><img src=\"http://blog.cloudflare.com/content/images/2017/07/mmwatch.gif\" alt=\"\" loading=\"lazy\"></p>\n<h3 id=\"mmsum\">mmsum</h3>\n<p>And the final tool is <code>mmsum</code> that simply sums a list of floating point numbers (one per line).</p>\n<p>Suppose you are downloading real-time rainfall data from the UK's Environment Agency and would like to know the total current rainfall. <code>mmsum</code> can help:</p>\n<pre><code>$ curl -s 'https://environment.data.gov.uk/flood-monitoring/id/measures?parameter=rainfall' | jq -e '.items[].latestReading.value+0' | ./mmsum\n40.2\n</code></pre>\n<p>All these tools can be found on the Cloudflare <a href=\"https://github.com/cloudflare/cloudflare-blog/blob/master/2017-06-29-ssdp/\">Github</a>.</p>\n<!--kg-card-end: markdown-->",
		"comment_id": "4971",
		"feature_image": null,
		"featured": false,
		"visibility": "public",
		"created_at": "2017-07-04T10:13:16.000+01:00",
		"updated_at": "2018-08-29T02:28:17.000+01:00",
		"published_at": "2017-07-04T11:32:20.000+01:00",
		"custom_excerpt": "In a recent blog post, my colleague Marek talked about some SSDP-based DDoS activity we'd been seeing recently. In that blog post he used a tool called mmhistogram to output an ASCII histogram.",
		"codeinjection_head": null,
		"codeinjection_foot": null,
		"custom_template": null,
		"canonical_url": null,
		"authors": [
			{
				"id": "5d1644b141acde0011a94f2c",
				"name": "John Graham-Cumming",
				"slug": "john-graham-cumming",
				"profile_image": "http://blog.cloudflare.com/content/images/2017/03/url-2.jpg",
				"cover_image": "http://blog.cloudflare.com/content/images/2023/05/Twitter-Header-@cloudflare-US.png",
				"bio": null,
				"website": null,
				"location": "Lisbon, Portugal",
				"facebook": null,
				"twitter": null,
				"meta_title": null,
				"meta_description": null,
				"url": "http://blog.cloudflare.com/author/john-graham-cumming/"
			}
		],
		"tags": [
			{
				"id": "5d16450341acde0011a951a0",
				"name": "Tools",
				"slug": "tools",
				"description": null,
				"feature_image": null,
				"visibility": "public",
				"meta_title": null,
				"meta_description": null,
				"og_image": null,
				"og_title": null,
				"og_description": null,
				"twitter_image": null,
				"twitter_title": null,
				"twitter_description": null,
				"codeinjection_head": null,
				"codeinjection_foot": null,
				"canonical_url": null,
				"accent_color": null,
				"url": "http://blog.cloudflare.com/tag/tools/"
			},
			{
				"id": "5d16450341acde0011a95214",
				"name": "Programming",
				"slug": "programming",
				"description": null,
				"feature_image": null,
				"visibility": "public",
				"meta_title": null,
				"meta_description": null,
				"og_image": null,
				"og_title": null,
				"og_description": null,
				"twitter_image": null,
				"twitter_title": null,
				"twitter_description": null,
				"codeinjection_head": null,
				"codeinjection_foot": null,
				"canonical_url": null,
				"accent_color": null,
				"url": "http://blog.cloudflare.com/tag/programming/"
			},
			{
				"id": "5d16450341acde0011a95262",
				"name": "ASCII",
				"slug": "ascii",
				"description": null,
				"feature_image": null,
				"visibility": "public",
				"meta_title": null,
				"meta_description": null,
				"og_image": null,
				"og_title": null,
				"og_description": null,
				"twitter_image": null,
				"twitter_title": null,
				"twitter_description": null,
				"codeinjection_head": null,
				"codeinjection_foot": null,
				"canonical_url": null,
				"accent_color": null,
				"url": "http://blog.cloudflare.com/tag/ascii/"
			},
			{
				"id": "5d16450341acde0011a951e3",
				"name": "DDoS",
				"slug": "ddos",
				"description": null,
				"feature_image": null,
				"visibility": "public",
				"meta_title": null,
				"meta_description": null,
				"og_image": null,
				"og_title": null,
				"og_description": null,
				"twitter_image": null,
				"twitter_title": null,
				"twitter_description": null,
				"codeinjection_head": null,
				"codeinjection_foot": null,
				"canonical_url": null,
				"accent_color": null,
				"url": "http://blog.cloudflare.com/tag/ddos/"
			},
			{
				"id": "5d16450341acde0011a95169",
				"name": "Attacks",
				"slug": "attacks",
				"description": null,
				"feature_image": null,
				"visibility": "public",
				"meta_title": null,
				"meta_description": null,
				"og_image": null,
				"og_title": null,
				"og_description": null,
				"twitter_image": null,
				"twitter_title": null,
				"twitter_description": null,
				"codeinjection_head": null,
				"codeinjection_foot": null,
				"canonical_url": null,
				"accent_color": null,
				"url": "http://blog.cloudflare.com/tag/attacks/"
			},
			{
				"id": "5d16450341acde0011a95265",
				"name": "Security",
				"slug": "security",
				"description": null,
				"feature_image": "http://blog.cloudflare.com/content/images/2020/10/Security.png",
				"visibility": "public",
				"meta_title": "Cloudflare Blog: Security",
				"meta_description": "Collection of Cloudflare blog posts tagged 'Security'.",
				"og_image": null,
				"og_title": null,
				"og_description": null,
				"twitter_image": null,
				"twitter_title": null,
				"twitter_description": null,
				"codeinjection_head": null,
				"codeinjection_foot": null,
				"canonical_url": null,
				"accent_color": null,
				"url": "http://blog.cloudflare.com/tag/security/"
			},
			{
				"id": "5d16450341acde0011a951ce",
				"name": "Reliability",
				"slug": "reliability",
				"description": null,
				"feature_image": null,
				"visibility": "public",
				"meta_title": null,
				"meta_description": null,
				"og_image": null,
				"og_title": null,
				"og_description": null,
				"twitter_image": null,
				"twitter_title": null,
				"twitter_description": null,
				"codeinjection_head": null,
				"codeinjection_foot": null,
				"canonical_url": null,
				"accent_color": null,
				"url": "http://blog.cloudflare.com/tag/reliability/"
			}
		],
		"primary_author": {
			"id": "5d1644b141acde0011a94f2c",
			"name": "John Graham-Cumming",
			"slug": "john-graham-cumming",
			"profile_image": "http://blog.cloudflare.com/content/images/2017/03/url-2.jpg",
			"cover_image": "http://blog.cloudflare.com/content/images/2023/05/Twitter-Header-@cloudflare-US.png",
			"bio": null,
			"website": null,
			"location": "Lisbon, Portugal",
			"facebook": null,
			"twitter": null,
			"meta_title": null,
			"meta_description": null,
			"url": "http://blog.cloudflare.com/author/john-graham-cumming/"
		},
		"primary_tag": {
			"id": "5d16450341acde0011a951a0",
			"name": "Tools",
			"slug": "tools",
			"description": null,
			"feature_image": null,
			"visibility": "public",
			"meta_title": null,
			"meta_description": null,
			"og_image": null,
			"og_title": null,
			"og_description": null,
			"twitter_image": null,
			"twitter_title": null,
			"twitter_description": null,
			"codeinjection_head": null,
			"codeinjection_foot": null,
			"canonical_url": null,
			"accent_color": null,
			"url": "http://blog.cloudflare.com/tag/tools/"
		},
		"url": "http://blog.cloudflare.com/three-little-tools-mmsum-mmwatch-mmhistogram/",
		"excerpt": "In a recent blog post, my colleague Marek talked about some SSDP-based DDoS activity we'd been seeing recently. In that blog post he used a tool called mmhistogram to output an ASCII histogram.",
		"reading_time": 2,
		"access": true,
		"comments": false,
		"og_image": null,
		"og_title": null,
		"og_description": null,
		"twitter_image": null,
		"twitter_title": null,
		"twitter_description": null,
		"meta_title": null,
		"meta_description": null,
		"email_subject": null,
		"frontmatter": null,
		"feature_image_alt": null,
		"feature_image_caption": null
	}
}