<div class="post-content lh-copy gray1">
	<figure class="kg-card kg-image-card"><img src="https://blog.cloudflare.com/content/images/2022/03/image5-4.png" class="kg-image" alt="Announcing the Cloudflare API Gateway" loading="lazy"></figure>
	<p>Negli ultimi dieci anni, Internet ha subito un cambiamento tettonico. Un tempo era composto da siti Web statici: con testo, immagini e occasionalmente filmati incorporati. Ma Internet è cresciuto enormemente. Ora ci affidiamo alle applicazioni basate su API per aiutare con quasi ogni aspetto della vita. Invece di limitarci a scaricare file, siamo in grado di <em>interagire</em> con le app scambiando dati avanzati. Tracciamo gli allenamenti e inviamo i risultati al cloud. Utilizziamo blocchi intelligenti e tutti i tipi di dispositivi IoT. E interagiamo con i nostri amici online.</p>
	<p>Tutto questo è meraviglioso, ma arriva con un'esplosione di complessità sul back-end. Come mai? Gli sviluppatori devono gestire le API per supportare questa funzionalità. Hanno bisogno di monitorare e autenticare ogni singola richiesta. E poiché queste attività sono così difficili, di solito vengono esternalizzate a un provider di gateway API.</p>
	<p>Sfortunatamente, i gateway di oggi lasciano molto a desiderare. Primo: non sono economici. Poi c'è l'impatto sulle prestazioni. E infine, c'è un rischio per i dati e la privacy, dal momento che <a href="https://blog.cloudflare.com/landscape-of-api-traffic">più del 50% del traffico</a> raggiunge le API (e presumibilmente viene inviato tramite un gateway di terze parti). Che confusione.</p>
	<p>Oggi annunciamo il gateway API Cloudflare. <strong>Sostituiremo completamente il tuo gateway esistente a una frazione del costo.</strong> E la nostra soluzione utilizza la tecnologia alla base di <a href="https://workers.cloudflare.com" target="_blank">Workers</a>, <a href="https://www.cloudflare.com/products/bot-management" target="_blank">Bot Management</a>, <a href="https://www.cloudflare.com/products/zero-trust/access" target="_blank">Access</a> e <a href="https://developers.cloudflare.com/rules/transform" target="_blank">Transform Rules</a> per fornire il set di strumenti API più avanzato sul mercato.</p>
	<h2 id="cos-api-gateway">Cos'è API Gateway?</h2>
	<p>In breve, è un pacchetto di funzionalità che lavoreranno per le tue API. Questo suddividiamo in tre categorie:</p>
	<p><strong>Sicurezza</strong><br>Questi sono i prodotti di cui abbiamo già scritto sul blog. Strumenti come <a href="https://developers.cloudflare.com/api-shield/products/api-discovery" target="_blank">Discovery</a>, <a href="https://developers.cloudflare.com/api-shield/products/schema-validation" target="_blank">Schema Validation</a>, <a href="https://developers.cloudflare.com/api-shield/products/volumetric-abuse-detection" target="_blank">Abuse Detection</a> e altri. Abbiamo dedicato molto tempo ad applicare la nostra esperienza di sicurezza al mondo delle API.</p>
	<p><strong>Gestione e monitoraggio</strong><br>Questi sono gli strumenti fondamentali che mantengono in ordine le tue API. Alcuni esempi: analisi, routing e autenticazione. Siamo già in grado di fare queste cose con prodotti esistenti come <a href="https://www.cloudflare.com/products/zero-trust/access" target="_blank">Cloudflare Access</a> e altre funzionalità sono in arrivo.</p>
	<p><strong>Tutto il resto</strong><br>Questi sono i piccoli (ma cruciali) elementi che fanno funzionare tutto. Cloudflare offre già terminazione SSL/TLS, bilanciamento del carico e servizi proxy che possono essere eseguiti per impostazione predefinita.</p>
	<p>Il post del blog di oggi descrive ogni funzionalità in dettaglio. Siamo lieti di annunciare che <em>tutte</em> le funzionalità di sicurezza sono adesso disponibili, quindi iniziamo discutendo di quelle.</p>
	<h2 id="discovery">Discovery</h2>
	<p>I nostri clienti sono desiderosi di proteggere le loro API. Sfortunatamente, questi endpoint non sono sempre documentati o, peggio, <em>credono</em> che tutto sia documentato ma hanno inconsapevolmente perso o modificato gli endpoint. Questi endpoint nascosti sono talvolta chiamati <a href="https://www.bearer.com/resources/shadow-apis-detect-business-risk" target="_blank">API shadow</a>. Dobbiamo iniziare il nostro viaggio con un quadro esauriente (e accurato) della superficie dell'API.</p>
	<p>È qui che entra in gioco Discovery. Vai al dashboard di Cloudflare, seleziona la scheda <strong>Sicurezza</strong> quindi "API Shield". Attiva la funzione e dicci come vuoi identificare il tuo traffico API. La maggior parte degli utenti fornisce un'intestazione (disponibile oggi), ma possiamo anche utilizzare il corpo della richiesta o il cookie (disponibile a breve).</p>
	<figure class="kg-card kg-image-card kg-width-wide kg-card-hascaption"><img src="https://blog.cloudflare.com/content/images/2022/03/image7.jpg" class="kg-image" alt="The Cloudflare API Shield tab, showing various endpoints that have been discovered and a set of recommended rate limiting thresholds." loading="lazy">
		<figcaption>La scheda Cloudflare API Shield, che mostra vari endpoint che sono stati rilevati e una serie di soglie di limitazione della frequenza consigliate.</figcaption>
	</figure>
	<p>Forniamo un elenco completo dei tuoi endpoint API. Cloudflare elenca ogni metodo, percorso e metadati aggiuntivi per aiutarti a comprendere la tua superficie. <em>Riduciamo</em> anche gli endpoint che includono le variabili (ad esempio, <em>/account/<strong>217</strong></em>) in modo che possano essere applicati più in generale (ad esempio, <em>/account/<strong>{var1}</strong></em>).</p>
	<p>Discovery è una potente contromisura all'entropia. I nostri clienti spesso si aspettano di trovare 30 endpoint, ma sono sorpresi nell'apprendere che hanno oltre <em>100</em> endpoint attivi.</p>
	<h2 id="convalida-schema">Convalida schema</h2>
	<p>Forse hai già uno schema per i tuoi endpoint API. Uno schema è come un modello: fornisce i percorsi, i metodi e i dati aggiuntivi che ti aspetti che le richieste API includano. Molti sviluppatori seguono lo <a href="https://swagger.io/specification" target="_blank">standard OpenAPI</a> per generare (e gestire) uno schema.</p>
	<p>Per rafforzare la tua sicurezza, possiamo <em>convalidare</em> il traffico in entrata rispetto a questo schema. Questo è un ottimo modo per fermare gli attacchi di base. Cloudflare respingerà le richieste non conformi, scartando il traffico senza senso che ha ignorato il codice di abbigliamento. Carica semplicemente il tuo schema nella dashboard, seleziona le azioni che vuoi intraprendere e distribuiscilo:</p>
	<figure class="kg-card kg-image-card kg-width-wide kg-card-hascaption"><img src="https://blog.cloudflare.com/content/images/2022/03/image9.jpg" class="kg-image" alt="A step in the schema upload process, after a schema has already been provided. Cloudflare lists out each endpoint with path, query, header, cookies, and body provided as metadata." loading="lazy">
		<figcaption>Un passaggio nel processo di caricamento dello schema, dopo che uno schema è già stato fornito. Cloudflare elenca ogni endpoint con percorso, query, intestazione, cookie e corpo forniti come metadati.</figcaption>
	</figure>
	<p>Schema Validation ha già controllato il traffico per alcuni dei più grandi siti crittografici, servizi di consegna e piattaforme di pagamento del mondo. È ora disponibile e presto aggiungeremo la convalida del corpo.</p>
	<h2 id="abuse-detection">Abuse Detection</h2>
	<p>Un solido approccio alla sicurezza utilizzerà Schema Validation <em>e</em> Discovery insieme, verificando che il traffico corrisponda al formato previsto. Ma che dire del traffico abusivo che riesce a sopravvivere?</p>
	<p>Man mano che Cloudflare scopre nuovi endpoint API, noi <em>suggeriamo limiti di frequenza</em> per ciascuno di essi. Questo è il ruolo di Abuse Detection e apre le porte a un tipo di sicurezza più sofisticato.</p>
	<p>Considera un endpoint API che restituisce aggiornamenti meteo. In particolare, l'endpoint restituirà "sì" se è probabile che nevichi nell'ora successiva e "no" in caso contrario. Il nostro algoritmo potrebbe rilevare che l'utente medio richiede questi dati una volta ogni 10 minuti. Un piccolo gruppo di scraper, invece, effettua 37 richieste ogni 10 minuti. Cloudflare consiglia automaticamente una soglia intermedia, ponderata per fornire agli utenti normali un po' di respiro. Ciò impedirebbe ai servizi di scraping abusivi di recuperare il meteo troppo spesso.</p>
	<figure class="kg-card kg-image-card"><img src="https://blog.cloudflare.com/content/images/2022/03/image3-18.png" class="kg-image" alt="" loading="lazy"></figure>
	<p>Forniamo la possibilità di creare una regola utilizzando il nostro nuovo motore <a href="https://blog.cloudflare.com/advanced-rate-limiting">Advanced Rate Limiting</a>. Puoi utilizzare cookie, intestazioni e altro per ottimizzare le soglie. Utilizziamo Abuse Detection per proteggere <a href="https://api.cloudflare.com" target="_blank">api.cloudflare.com</a> già da qualche mese ormai.</p>
	<p>La nostra parte preferita di questa funzionalità è che si basa sull'approccio di apprendimento automatico per cui utilizziamo <a href="https://www.cloudflare.com/products/bot-management" target="_blank">Bot Management</a>. Solo un altro modo in cui i nostri prodotti possono alimentarsi (e trarne vantaggio) l'uno dall'altro.</p>
	<p>Abuse Detection è ora disponibile. Se sei interessato in <em>Sequential</em> Abuse Detection, che utilizziamo per segnalare flussi di richieste anomali, consulta il nostro <a href="https://blog.cloudflare.com/api-abuse-detection">post del blog precedente</a>. La parte sequenziale è in accesso anticipato e stiamo continuando a regolarlo prima del lancio ufficiale.</p>
	<h2 id="mtls">mTLS</h2>
	<p>Il TLS reciproco porta la sicurezza a un nuovo livello. Puoi utilizzare i certificati per convalidare il traffico in entrata quando raggiunge le tue API, cosa particolarmente utile per i dispositivi mobili e IoT. Inoltre, questo è un eccellente modello di sicurezza positivo che può (e dovrebbe) essere adottato per la maggior parte degli ecosistemi di dispositivi.</p>
	<figure class="kg-card kg-image-card"><img src="https://blog.cloudflare.com/content/images/2022/03/image1-48.png" class="kg-image" alt="" loading="lazy"></figure>
	<p><br>Come esempio, torniamo alla nostra API meteo. Forse questo servizio include un secondo endpoint che <em>riceve</em> la temperatura corrente da un termometro. Ma c'è un problema: chiunque può fare richieste false, fornendo letture imprecise all'endpoint. Per evitare ciò, utilizza mTLS per installare un certificato client sul termometro <em>ufficiale</em>, quindi lascia che Cloudflare convalidi quel certificato. Eventuali altre richieste verranno respinte. Problema risolto!</p>
	<p>Offriamo già una serie di certificati gratuiti a ogni cliente Cloudflare. Questo continuerà. Ma a partire da oggi, i clienti di API Gateway possono ottenere certificati <em>illimitati</em> per impostazione predefinita.</p>
	<h2 id="autenticazione">Autenticazione</h2>
	<p>Numerose API moderne richiedono l'autenticazione. In effetti, l'autenticazione sblocca tutti i tipi di funzionalità: consente sessioni (con accesso), scambio di dati personali ed efficienza dell'infrastruttura. E, naturalmente, Cloudflare protegge il traffico autenticato mentre passa attraverso la nostra rete.</p>
	<p>Ma con API Gateway, Cloudflare svolge un ruolo più attivo nell'autenticazione del traffico, consentendo di <strong>emettere</strong> e <strong>verificare</strong> quanto riportato di seguito:</p>
	<ul>
		<li>Chiavi API</li>
		<li>Token Web JSON (JWT)</li>
		<li>Token OAuth 2.0</li>
	</ul>
	<p>Grazie agli elenchi di controllo accessi, ti aiutiamo a gestire diversi gruppi di utenti con autorizzazioni diverse. E questo è importante, perché il tuo attuale provider sta introducendo tonnellate di latenza e scambi di dati non necessari. Se una richiesta deve arrivare da qualche parte <em>all'esterno</em> dell'ecosistema Cloudflare, sta viaggiando più lontano del necessario:</p>
	<figure class="kg-card kg-image-card kg-width-wide kg-card-hascaption"><img src="https://blog.cloudflare.com/content/images/2022/03/image2-39.png" class="kg-image" alt="Additional latency incurred by sending requests out of the Cloudflare network for authentication." loading="lazy">
		<figcaption>Latenza aggiuntiva sostenuta dall'invio di richieste dalla rete Cloudflare per l'autenticazione.</figcaption>
	</figure>
	<p>Cloudflare può autenticarsi sulla nostra rete globale e gestire le richieste in una frazione del tempo. Questo tipo di tecnologia è difficile da implementare, ma abbiamo ritenuto che fosse troppo importante per ignorarlo. Come abbiamo fatto a costruirlo così velocemente? <a href="https://www.cloudflare.com/products/zero-trust/access" target="_blank">Cloudflare Access</a>. Abbiamo preso la nostra esperienza operativa con i provider di identità e, ancora una volta, l'abbiamo trasferita nel mondo delle API. Il nostro gateway include autenticazione illimitata e scambio di token. Queste funzionalità saranno presto disponibili.</p>
	<h2 id="routing-e-gestione">Routing e gestione</h2>
	<p>Parliamo brevemente dei <a href="https://www.cloudflare.com/learning/serverless/glossary/serverless-microservice" target="_blank">microservizi</a>. Le applicazioni moderne sono dei colossi, quindi gli sviluppatori le suddividono in blocchi più piccoli chiamati "microservizi".</p>
	<p>Consideriamo un'applicazione che ti aiuti a prenotare una camera d'albergo. Potrebbe utilizzare un microservizio per recuperare le date disponibili, un altro per recuperare i prezzi e un altro ancora per recuperare i tipi di camere. Forse un team diverso gestisce ogni microservizio, ma devono essere tutti disponibili da un unico punto di ingresso pubblico:</p>
	<figure class="kg-card kg-image-card kg-card-hascaption"><img src="https://blog.cloudflare.com/content/images/2022/03/image8.png" class="kg-image" alt="Various steps in an architecture that relies on microservices. A visitor makes a request to a hotel API, which is then routed towards available dates, prices, or room types." loading="lazy">
		<figcaption>Vari passaggi in un'architettura che si basa sui microservizi. Un visitatore fa una richiesta all'API di un hotel, che viene quindi indirizzata verso le date, i prezzi o i tipi di camere disponibili.</figcaption>
	</figure>
	<p>Quel singolo punto d'ingresso, normalmente gestito da un API gateway, è responsabile per il 1<em>routing</em> di ogni richiesta al microservizio giusto. Molti dei nostri clienti pagano da anni servizi autonomi per farlo. Non è più necessario. Abbiamo progettato il nostro <a href="https://blog.cloudflare.com/introducing-transform-rules-with-url-rewriting-at-the-edge">Transform Rules</a> product per riscrivere e reindirizzare dinamicamente al nostro perimetro. È facile da configurare, veloce da implementare e integrato in modo nativo in API Gateway. Cloudflare può ora essere l'unico punto di accesso della tua API.</p>
	<p>È un po' come la punta dell'iceberg. API Gateway può <em>sostituire</em> i tuoi microservizi tramite una integrazione con il nostro <a href="https://workers.cloudflare.com" target="_blank">Workers</a>. Come? Prendi in considerazione la possibilità di scrivere un Worker che esegua qualche azione, ad esempio restituire i prezzi dell'hotel, che sono memorizzati con <a href="https://blog.cloudflare.com/durable-objects-ga">Durable Objects</a> sulla nostra rete. Con API Gateway, le richieste arrivano alla nostra rete, vengono instradate al microservizio corretto con le regole di trasformazione e quindi vengono completamente servite con i lavoratori (ancora sulla nostra rete). Questi Worker possono contattare la tua origine per ulteriori informazioni, ove necessario.</p>
	<figure class="kg-card kg-image-card kg-card-hascaption"><img src="https://blog.cloudflare.com/content/images/2022/03/image4-3.png" class="kg-image" alt="Cloudflare’s simplified API architecture. With authentication, routing, management, and storage handled at the edge, several hops are eliminated." loading="lazy">
		<figcaption>Architettura dell'API semplificata di Cloudflare. Con l'autenticazione, il routing, la gestione e l'archiviazione gestite sul perimetro, vengono eliminati diversi hop.</figcaption>
	</figure>
	<p>I Worker sono più veloci, più economici e più semplici delle alternative di microservizi. Questa integrazione sarà disponibile a breve.</p>
	<h2 id="api-analytics">API Analytics</h2>
	<p>I clienti ci dicono che <em>vedere</em> il traffico API a volte è più importante che agire su di esso. In effetti, questa tendenza non è specifica per le API. Abbiamo pubblicato <a href="https://blog.cloudflare.com/envoy-media-machine-learning-bot-management">un altro post del blog</a> oggi in cui viene che esplora come un cliente utilizza la nostra bot intelligence per registrare passivamente le informazioni sulle minacce.</p>
	<figure class="kg-card kg-image-card"><img src="https://blog.cloudflare.com/content/images/2022/03/image6.png" class="kg-image" alt="" loading="lazy"></figure>
	<p>Con API Analytics, abbiamo attinto ai nostri altri prodotti per mostrare dati utili in tempo reale. Puoi visualizzare gli endpoint più diffusi, filtra in base a informazioni dettagliate basate sul ML, visualizza gli istogrammi delle soglie di abuso e acquisisci le tendenze.</p>
	<p>API Analytics sarà disponibile a breve. Quando ciò accade, sarai anche in grado di esportare rapporti personalizzati e condividere approfondimenti all'interno della tua organizzazione.</p>
	<h2 id="registrazione-gestione-quote-e-altro">Registrazione, gestione quote e altro</h2>
	<p><em>Tutte</em> le nostre funzionalità consolidate, come la memorizzazione nella cache, il bilanciamento del carico e le integrazioni dei log, funzionano in modo nativo con API Gateway. Queste non dovrebbero essere trascurate come funzionalità di gateway primitive; sono essenziali. E poiché Cloudflare esegue tutte queste funzioni nello stesso posto, ottieni i vantaggi della latenza senza dover fare nulla.</p>
	<p>Stiamo inoltre espandendo la nostra funzionalità Enterprise Logs per eseguire la registrazione in tempo reale. Se scegli di autenticarti sulla rete di Cloudflare, puoi visualizzare i log dettagliati di ogni utente che ha effettuato l'accesso a un'API. Allo stesso modo, teniamo traccia della durata di ogni richiesta man mano che viene ricevuta, convalidata, instradata e risposta. Tutto viene registrato.</p>
	<p>Infine, stiamo costruendo Quota Management, una funzionalità che conta le richieste API su un periodo di tempo più lungo (come un mese) e ti consente di gestire le soglie per i tuoi utenti. Abbiamo lanciato anche <a href="https://blog.cloudflare.com/advanced-rate-limiting">Advanced Rate Limiting</a> per aiutare con casi più sofisticati (compresa l'ispezione del corpo per GraphQL).</p>
	<h2 id="conclusione">Conclusione</h2>
	<p>Tutte le nostre funzionalità di sicurezza, Discovery, Schema Validation, Abuse Detection e mTLS, sono ora disponibili! Queste funzionalità sono dette <a href="https://developers.cloudflare.com/api-shield" target="_blank">API Shield</a> perché costituiscono lo scudo che protegge le restanti funzioni del gateway. I clienti aziendali possono chiedere l'accesso ai loro team di account oggi.</p>
	<p>Molte delle altre parti di API Gateway sono ora in accesso anticipato. Secondo Gartner®, "entro il 2025, meno del 50% delle API aziendali sarà gestito, poiché la crescita esplosiva delle API supera le capacità degli strumenti di gestione delle API". Il nostro obiettivo è offrire un gateway conveniente che combatta questa tendenza. Se hai una funzionalità specifica che desideri testare, informa il team dell'account in modo che possiamo registrarti il prima possibile.</p><!--kg-card-begin: markdown-->
	<p><small>Fonte: Gartner, “Predicts 2022: APIs Demand Improved Security and Management”, Shameen Pillai, Jeremy D'Hoinne, John Santoro, Mark O'Neill, Sham Gill, 6 dicembre 2021. GARTNER è un marchio registrato di Gartner, Inc. e/o delle sue affiliate negli Stati Uniti e a livello internazionale e viene qui utilizzato previa autorizzazione. Tutti i diritti riservati.<br>
		</small></p>
	<!--kg-card-end: markdown-->
</div>