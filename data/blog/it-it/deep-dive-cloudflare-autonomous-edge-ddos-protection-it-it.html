<div class="mb2 gray5">6 min read</div>
<div class="post-content lh-copy gray1">
	<figure class="kg-card kg-image-card"><img src="https://blog.cloudflare.com/content/images/2021/03/image1-25.png" class="kg-image" alt="A deep-dive into Cloudflare’s autonomous edge DDoS protection" loading="lazy"></figure>
	<p>Oggi sono lieto di parlare del nostro sistema di protezione da attacchi DDoS (<a href="https://www.cloudflare.com/it-it/learning/ddos/what-is-a-ddos-attack">Distributed Denial of Service</a>) autonomo. Questo sistema è stato distribuito a livello globale in tutti i nostri oltre 200 datacenter e protegge attivamente tutti i nostri clienti dagli attacchi DDoS tra i livelli da 3 a 7 (nel <a href="https://www.cloudflare.com/it-it/learning/ddos/glossary/open-systems-interconnection-model-osi">modello OSI</a>) senza richiedere alcun intervento umano. Come parte del nostro <a href="https://blog.cloudflare.com/it-it/unmetered-mitigation-it-it">impegno illimitato per la protezione dagli attacchi DDoS</a>, non addebiteremo di più a un cliente solo perché è stato colpito da un DDoS.</p>
	<h3 id="protezione-autonoma-sul-perimetro">Protezione autonoma sul perimetro</h3>
	<p>Per proteggere i nostri clienti in modo rapido e preciso dagli attacchi DDoS, abbiamo creato un sistema autonomo di rilevamento e mitigazione del perimetro in grado di prendere decisioni da solo senza cercare un consenso centralizzato. Tale sistema è basato completamente su un software e viene eseguito sul nostro perimetro su server di base. È alimentato dal nostro daemon denial of service (dosd) che è stato originariamente attivato a metà del 2019 per la protezione dagli attacchi DDoS L3/4. Da quel momento, abbiamo investito nel potenziamento e nel miglioramento delle sue capacità per stare al passo con gli autori degli attacchi e interromperne l'economia. L'ultima serie di miglioramenti ha ampliato il nostro componente di mitigazione del perimetro per proteggere dagli attacchi L7 e non solo da quelli L3/4.</p>
	<p>Questo sistema funziona su ogni singolo server in tutti i nostri datacenter perimetrali. Analizza costantemente i pacchetti e le richieste HTTP, scansionando gli attacchi DDoS. Al rilevamento, invia immediatamente una regola di mitigazione con una firma generata in tempo reale nella posizione più ottimale nello stack Linux in cui è possibile applicare la mitigazione più efficiente in termini di costi.</p>
	<figure class="kg-card kg-image-card kg-width-wide kg-card-hascaption"><img src="https://blog.cloudflare.com/content/images/2021/03/DDoS-mitigation-diagram@2x-1.png" class="kg-image" alt="A conceptual diagram of Cloudflare DDoS mitigation systems" loading="lazy">
		<figcaption>Un diagramma concettuale dei sistemi di mitigazione DDoS di Cloudflare</figcaption>
	</figure>
	<p>Le nostre nuove capacità di rilevamento perimetrale completano il meccanismo di rilevamento delle minacce globale esistente, <a href="https://blog.cloudflare.com/meet-gatebot-a-bot-that-allows-us-to-sleep">Gatebot</a>, che risiede nel cuore della nostra rete. Il rilevamento degli attacchi al core della rete con Gatebot è ottimo per attacchi volumetrici più grandi e distribuiti che richiedono il coordinamento sull'intero perimetro di Cloudflare, ma gli attacchi localizzati più piccoli richiedono un approccio diverso. Il rilevamento degli attacchi a livello di rete e HTTP sul perimetro significa che possiamo campionare a una velocità maggiore, rilevare attacchi piccoli e grandi e generare immediatamente una regola di mitigazione. Negli ultimi mesi, il 98,6% di tutti gli attacchi DDoS L3/4 è stato rilevato da dosd. Allo stesso modo, da quando è stata implementata la versione estesa di dosd, è stato mitigato l'81% di tutti gli attacchi L7.</p>
	<p>Abbiamo già trattato <a href="https://blog.cloudflare.com/meet-gatebot-a-bot-that-allows-us-to-sleep">Gatebot</a> e <a href="https://blog.cloudflare.com/announcing-flowtrackd">flowtrackd</a> nei post del blog precedenti, pertanto adesso ci concentreremo sulle funzionalità dosd ampliate.</p>
	<h3 id="sfruttare-la-rete-linux-per-eliminare-pacchetti-e-richieste-alla-velocit-del-cavo">Sfruttare la rete Linux per eliminare pacchetti e richieste alla velocità del cavo</h3>
	<p>Dieci anni fa, la rete Linux era lenta. Oggi stiamo rilasciando pacchetti alla velocità del cavo grazie a Linux, in particolare con iptables e eXpress Data Path (XDP).</p>
	<h3 id="la-vita-di-un-pacchetto">La vita di un pacchetto</h3>
	<p>Un pacchetto destinato a un cliente protetto da Cmloudflare arriva al <a href="https://www.cloudflare.com/it-it/network">datacenter Cloudflare</a> più vicino tramite <a href="https://www.cloudflare.com/learning/cdn/glossary/anycast-network">BGP Anycast</a>. Una volta arrivato, viene passato dal router a un server utilizzando un algoritmo di gruppi di routing multi-percorso a parità di costo (<a href="https://en.wikipedia.org/wiki/Equal-cost_multi-path_routing">ECMP</a>) tramite switch di rete. Quando arriva a un server, il pacchetto viene inviato a un gruppo di programmi eXpress Data Path (<a href="https://en.wikipedia.org/wiki/Express_Data_Path">XDP</a>). Il primo gruppo di programmi XDP, <a href="https://blog.cloudflare.com/l4drop-xdp-ebpf-based-ddos-mitigations">L4Drop</a>, applica regole di mitigazione da attacchi rilevati in precedenza e trasmette campioni di pacchetti a dosd per ulteriori analisi.</p>
	<p>Se un pacchetto non viene eliminato perché dannoso, viene quindi passato a <a href="https://blog.cloudflare.com/unimog-cloudflares-edge-load-balancer">Unimog</a>, il nostro bilanciatore del carico L4 proprietario. Utilizzando parametri di integrità e prestazioni del server, Unimog decide se mantenere il pacchetto nello stesso server o trasmetterlo a un altro server nel data center in grado di gestirlo meglio. Dopo Unimog, viene passato attraverso il firewall iptables e quindi, se mira a un'applicazione L7, ad esempio un servizio protetto da Cloudflare WAF, al nostro proxy inverso HTTP. Il proxy inverso viene eseguito nello spazio utente e le richieste HTTP passano attraverso il nostro <a href="https://www.cloudflare.com/it-it/waf">Web Application Firewall</a>, le regole del firewall di applicazioni e ulteriori configurazioni del cliente. Se il pacchetto è invece destinato a un'applicazione TCP/UDP (Spectrum) o a una destinazione IP che viene instradata anziché proxy (Magic Transit), passerebbe attraverso quei sistemi anziché il nostro proxy HTTP.</p>
	<figure class="kg-card kg-image-card kg-width-wide kg-card-hascaption"><img src="https://blog.cloudflare.com/content/images/2021/04/L7-ddos-diagram@2x-1-1.png" class="kg-image" alt="Life of a packet" loading="lazy">
		<figcaption>La vita di un pacchetto</figcaption>
	</figure>
	<p>Oltre a L4Drop, il nostro proxy HTTP trasmette a dosd anche campioni e metadati delle richieste HTTP. Questo campionamento del perimetro avviene a una velocità 10 volte maggiore del campionamento del core, poiché i segnali ora possono essere analizzati (e gestiti) in locale anziché essere spediti a un datacenter principale. Allo stesso modo, i pacchetti vengono campionati da dosd a una velocità 81 volte più veloce di gatebot.</p>
	<p>Insieme, dosd, gatebot e flowtrack analizzano i campioni che ricevono e applicano regole di mitigazione quando vengono rilevati attacchi DDoS. Inseriscono le regole di mitigazione nel proxy Web per mitigare gli attacchi HTTP. Le richieste di attacco vengono gestite con un'azione di blocco, limite di velocità o sfida, a seconda della decisione del sistema. Tuttavia, se l'attacco è altamente volumetrico, la regola di mitigazione viene trasferita in basso nello stack nel firewall iptables e gli attacchi L7 vengono eliminati su L4 utilizzando <a href="https://blog.cloudflare.com/rolling-with-the-punches-shifting-attack-tactics-dropping-packets-faster-cheaper-at-the-edge/#jails">IP Jails,</a> per una mitigazione più efficiente in termini di costi. Allo stesso modo, gli attacchi L3/4 vengono mitigati nel firewall iptables utilizzando programmi Berkeley Packet Filter estesi (<a href="https://blog.cloudflare.com/cloudflare-architecture-and-how-bpf-eats-the-world">eBPF</a>) all'interno di L4Drop. L'uso di questi componenti ci consente di mitigare automaticamente gli attacchi DDoS su larga scala.</p>
	<h3 id="interruzione-dell-economia-dell-attacco">Interruzione dell'economia dell'attacco</h3>
	<p>Il nostro sistema autonomo ampliato, descritto sopra, insieme ai nostri componenti di mitigazione delle minacce esistenti, è stato sviluppato per proteggere i nostri clienti dagli attacchi DDoS che sono diventati molto facili ed economici da lanciare. Questi attacchi vengono utilizzati da attori malintenzionati che mirano a eliminare un sito Web, un'app mobile, un gioco o qualsiasi proprietà connessa a Internet. Queste protezioni estese erano un passaggio necessario poiché durante l'ultimo anno il numero di attacchi è aumentato, come abbiamo riportato nei nostri <a href="https://blog.cloudflare.com/network-layer-ddos-attack-trends-for-q3-2020">report sulle tendenze DDoS</a>. Inoltre, gli attacchi stanno diventando più grandi e sempre più <a href="https://blog.cloudflare.com/beat-an-acoustics-inspired-ddos-attack">sofisticati</a>, come l'attacco che imitava i battimenti acustici. Altrettanto importanti sono i piccoli attacchi che potrebbero distruggere una piccola proprietà Web: noi vogliamo bloccare allo stesso modo i grandi attacchi e quelli piccoli.</p>
	<p>In molti casi, gli autori di attacchi possono lanciare attacchi DDoS gratuitamente utilizzando strumenti disponibili al pubblico o con un piccolo compenso assumendo una <a href="https://www.cloudflare.com/learning/ddos/what-is-a-ddos-botnet">botnet</a> DDoS-as-a-service come <a href="https://blog.cloudflare.com/moobot-vs-gatebot-cloudflare-automatically-blocks-botnet-ddos-attack-topping-at-654-gbps">Moobot</a> sul dark Web. Secondo quanto riportato nel <a href="https://www.privacyaffairs.com/dark-web-price-index-2020">Dark Web Price Index per il 2020</a>, il prezzo di un attacco DDoS parte da 10 $ per un attacco di un'ora a una velocità di 10-50.000 richieste al secondo. Gli attacchi sono molto più economici da lanciare rispetto ai danni che provocano. Causando un'interruzione delle operazioni o anche <em>solo </em>riducendo le prestazioni del servizio, gli autori di attacchi possono mettere a dura prova le loro vittime. Ad esempio, la rimozione di un sito di e-commerce significa che gli utenti non possono accedere ed effettuare acquisti. Anche una maggiore latenza può far sì che gli utenti abbandonino i loro carrelli della spesa e si avvicinino alla concorrenza. Un minuto di inattività può facilmente tradursi nella perdita di <a href="https://www.gremlin.com/ecommerce-cost-of-downtime">decine di migliaia di dollari</a>.</p>
	<p>La frequenza, la sofisticatezza e le dimensioni degli attacchi DDoS richiedono un nuovo approccio: veloce, accurato e preciso. Ed è per questo che abbiamo sviluppato le protezioni estese descritte in questo post.</p>
	<h3 id="costruire-un-internet-migliore">Costruire un Internet migliore</h3>
	<p>La missione di Cloudflare è aiutare a costruire un Internet migliore, sicuro, più veloce e più affidabile per tutti. La visione del team DDoS deriva da questa missione: il nostro obiettivo è rendere l'impatto degli attacchi DDoS un ricordo del passato. Negli anni '90 e 2000, le <a href="https://en.wikipedia.org/wiki/History_of_email_spam">e-mail di spam</a> sono diventate un problema serio. Oggi i servizi di posta elettronica li filtrano per noi e il nostro obiettivo è fare lo stesso per gli attacchi DDoS.</p>
	<p>Per ulteriori informazioni sulla protezione da attacchi DDoS di Cloudflare, <a href="https://www.cloudflare.com/it-it/enterprise">contattaci</a> oppure prova con una valutazione pratica del piano gratuito di Cloudflare <a href="https://dash.cloudflare.com/sign-up">qui</a>.</p>
	<p>A proposito, se sei interessato a lavorare nel team di ingegneri della protezione DDoS, stiamo attualmente assumendo nei nostri uffici di Londra e Austin. Invia qui la tua candidatura:</p>
	<p>Austin: <a href="https://boards.greenhouse.io/cloudflare/jobs/2291040?gh_jid=2291040">https://boards.greenhouse.io/cloudflare/jobs/2291040?gh_jid=2291040</a></p>
	<p>Londra: <a href="https://boards.greenhouse.io/cloudflare/jobs/2291038?gh_jid=2291038">https://boards.greenhouse.io/cloudflare/jobs/2291038?gh_jid=2291038</a></p>
</div>