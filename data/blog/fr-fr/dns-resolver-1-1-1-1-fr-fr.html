<div class="mb2 gray5 ">10 min. de lecture</div>
<div class="post-content lh-copy gray1">
	<p>La mission de Cloudflare est d'aider à bâtir un internet toujours plus performant et aujourd'hui, nous lançons notre résolveur DNS, <a href="https://1.1.1.1">1.1.1.1</a>,un service DNS récursif. Avec cette offre, nous remettons sur pied le fondement d'internet en construisant un résolveur DNS public plus rapide, plus sûr et plus axé sur la confidentialité. Le résolveur DNS 1.1.1.1.1 est accessible au public. Il s'agit du premier service de Cloudflare s'adressant avant tout au grand public.</p>
	<p></p>
	<figure class="kg-card kg-image-card"><img src="https://blog.cloudflare.com/content/images/2019/04/1.1.1.1.svg" class="kg-image" alt="" loading="lazy"></figure>
	<p></p>
	<p>Nous utilisons les adresses IPv4 suivantes pour notre résolveur : <strong>1.1.1.1</strong> et <strong>1.0.0.1</strong>. Plutôt facile à retenir. Ces adresses ont été fournies à Cloudflare par l'APNIC pour la recherche conjointe et pour ce service. Pour mieux connaître leur travail, vous pouvez consulter le <a href="https://labs.apnic.net/?p=1127">blog de l’APNIC</a>.</p>
	<p>Le résolveur DNS 1.1.1.1. est géré par le <a href="https://www.cloudflare.com/network"> réseau</a> mondial Anycast de Cloudflare.</p>
	<h2 id="historique-un-bref-rappel-concernant-le-r-le-du-r-solveur-dans-le-syst-me-dns"><strong>Historique &nbsp;: Un bref rappel concernant le rôle du résolveur dans le système DNS</strong></h2>
	<p>Nos amis de chez <a href="https://dnsimple.com">DNSimple</a> ont réalisé cet excellent tutoriel destiné à quiconque souhaite combler ses lacunes dans sa connaissance du <a href="https://howdns.works">fonctionnement des DNS</a>. Ils expliquent de manière très complète tout ce qu'il faut savoir sur les résolveurs, les serveurs racine, et bien plus encore.</p>
	<p></p>
	<figure class="kg-card kg-image-card"><img src="https://blog.cloudflare.com/content/images/2019/04/dnsimple-howdns-works.png" class="kg-image" alt="" loading="lazy"></figure>
	<p></p>
	<p>Lors de la résolution d'un nom de domaine, une requête passe de votre système final (c'est-à-dire votre navigateur) à un service DNS récursif. Si l'enregistrement DNS n'est pas dans le cache local du service, le Recursor interrogera la hiérarchie DNS de référence pour trouver les informations d'adresse IP que vous recherchez. Le résolveur DNS, 1.1.1.1.1 joue le rôle du Recursor. Il doit être rapide et, de nos jours, il doit aussi être sécurisé !</p>
	<h2 id="objectifs-du-r-solveur-dns-1-1-1-1-1"><strong>Objectifs du résolveur DNS 1.1.1.1.1</strong></h2>
	<p>Nos objectifs avec le résolveur public sont simples : Cloudflare entend mettre en place le résolveur public le plus rapide du monde tout en améliorant la protection de la vie privée des utilisateurs. Pour rendre internet plus rapide, nous construisons déjà des centres de traitement de données dans le monde entier pour réduire la distance (c'est-à-dire la latence) entre les utilisateurs et le contenu. Nous souhaitons que chacun soit à moins de 10 millisecondes d'au moins un de nos sites.</p>
	<p></p>
	<figure class="kg-card kg-image-card"><img src="https://blog.cloudflare.com/content/images/2019/04/Cloudflare_and_world-population-map.png" class="kg-image" alt="" loading="lazy"></figure>
	<p></p>
	<p>Au cours du seul mois de mars, nous avons permis la création de 31 nouveaux centres de traitement de données à l'échelle mondiale (<a href="https://blog.cloudflare.com/istanbul-not-constantinople">Istanbul</a>, <a href="https://blog.cloudflare.com/reykjavik-cloudflares-northernmost-location">Reykjavík</a>, <a href="https://blog.cloudflare.com/riyadh">Riyad</a>, <a href="https://blog.cloudflare.com/macau">Macao</a>, <a href="https://blog.cloudflare.com/baghdad">Bagdad</a>, <a href="https://blog.cloudflare.com/usa-expansion">Houston, Indianapolis, Montgomery, Pittsburgh, Sacramento</a>, <a href="https://blog.cloudflare.com/mexico-city">Mexico City</a>, <a href="https://blog.cloudflare.com/tel-aviv">Tel-Aviv </a>, <a href="https://blog.cloudflare.com/durban-and-port-louis">Durban, Port-Louis</a>, <a href="https://blog.cloudflare.com/cebu">Cebu City</a>, <a href="https://blog.cloudflare.com/edinburgh"> Edinburgh</a>, <a href="https://blog.cloudflare.com/riga-tallinn-vilnius">Riga, Tallinn, Vilnius</a>, <a href="https://blog.cloudflare.com/welcome-calgary-saskatoon-and-winnipeg">Calgary, Saskatoon, Winnipeg </a>, <a href="https://blog.cloudflare.com/more-us-data-centers">Tallahassee Jacksonville, Memphis,</a>, <a href="https://blog.cloudflare.com/bogota">Bogotá</a>, <a href="https://blog.cloudflare.com/luxembourg-chisinau">Ville de Luxembourg et Chișinău</a>) et, comme toutes les autres villes de notre réseau, les nouveaux sites utilisent le résolveur DNS 1.1.1.1.1 depuis le premier jour !</p>
	<p>Notre réseau rapide et bien distribué est conçu pour supporter n'importe quel protocole et nous sommes actuellement le fournisseur DNS de référence le plus rapide sur internet, ce dont bénéficient plus de sept millions de sites internet. De plus, nous fournissons déjà un service anycast à deux des treize serveurs racines. L'étape logique suivante consistait à fournir un service DNS récursif plus rapide aux utilisateurs. Notre Recursor peut tirer profit des serveurs de référence qui cohabitent avec nous, ce qui accélère les recherches pour tous les noms de domaine.</p>
	<p>Bien que DNSSEC assure l'intégrité des données entre un résolveur et un serveur de référence, il ne protège pas la confidentialité lors de la dernière phase de transfert vers vous. Le résolveur DNS 1.1.1.1.1 est compatible avec les deux nouvelles normes de confidentialité DNS - DNS-over-TLS et DNS-over-HTTPS, qui permettent un cryptage de dernier niveau pour protéger vos requêtes DNS et éviter toute altération de leur confidentialité.</p>
	<h2 id="faire-en-sorte-que-notre-r-solveur-respecte-la-vie-priv-e"><strong>Faire en sorte que notre résolveur respecte la vie privée</strong></h2>
	<p>Auparavant, le Recursor envoyait le nom de domaine complet à n'importe quel intermédiaire lorsqu'il arrivait à la racine ou au DNS de référence. Cela signifiait que si vous alliez sur &nbsp;<a href="https://blog.cloudflare.com/dns-resolver-1-1-1-1/www.cloudflare.com">www.cloudflare.com</a>, le serveur racine et le serveur en .com étaient tous deux interrogés avec le nom de domaine complet (c'est-à-dire les parties www, cloudflareet com), même si les serveurs racines devaient simplement rediriger le récursif vers .com (indépendamment de toute autre partie du domaine complet). Cette facilité d'accès à toutes ces informations de navigation personnelle via DNS présente un grave problème de confidentialité pour de nombreuses personnes. Plusieurs résolveurs en ont tenu compte, mais toutes les solutions n'ont pas été adaptées ou déployées à grande échelle.</p>
	<p>Le résolveur DNS 1.1.1.1.1.1 fournit dès le début tous les mécanismes de protection de la confidentialité DNS définis et proposés, à utiliser entre le résolveur minimum et le résolveur récursif. Pour les moins expérimentés, un résolveur minimal est un composant de votre système d'exploitation qui communique avec le résolveur récursif. En utilisant uniquement la minimisation des noms de requête DNS définie dans <a href="https://tools.ietf.org/html/rfc7816">RFC7816</a>, le résolveur DNS 1.1.1.1.1 réduit les risques de fuite d'informations vers les serveurs DNS intermédiaires, tels que le serveur racine et le TLD. Cela signifie que le résolveur DNS 1.1.1.1.1 envoie seulement une partie suffisante du nom pour que le DNS de référence puisse dire au résolveur où poser la question suivante.</p>
	<p>Le résolveur DNS 1.1.1.1.1 prend également en charge les requêtes TLS de confidentialité sur le port 853 (<a href="https://developers.cloudflare.com/1.1.1.1/dns-over-tls">DNS over TLS</a>) pour que nous puissions empêcher les réseaux d'espionnage d'accéder aux requêtes. De plus, en proposant un protocole DoH expérimental (<a href="https://developers.cloudflare.com/1.1.1.1/dns-over-https">DNS via HTTPS</a>), nous améliorons à la fois la confidentialité et d'autres services futurs pour les utilisateurs finaux, car les navigateurs et autres applications peuvent désormais combiner le trafic DNS et HTTPS en une seule connexion.</p>
	<p>Avec la mise en cache négative agressive des DNS, telle que décrite dans <a href="https://tools.ietf.org/html/rfc8198">RFC8198</a>, nous pouvons encore diminuer la charge sur le système DNS global. Cette technique consiste d'abord à utiliser le cache négatif des résolveurs existants qui conserve les informations négatives (ou inexistantes) pendant un certain temps. Pour les zones signées avec DNSSEC et à partir des enregistrements NSEC en cache, le résolveur peut déterminer si le nom demandé existe ou non sans autre requête. Donc, si vous tapez wwwwww.xxx puis wwww.xxx, la seconde requête pourrait bien donner lieu à un « non » très rapide (NXDOMAIN dans le domaine des DNS. La mise en cache négative agressive ne fonctionne qu'avec les zones signées DNSSEC, qui comprennent à la fois le serveur racine et 1400 des 1544 TLD signés à ce jour.</p>
	<p>Nous utilisons la validation <a href="https://blog.cloudflare.com/dnssec-an-introduction">DNSSEC</a> dans la mesure du possible, car cela nous permet de nous assurer que les réponses sont exactes et non falsifiées. Le coût des vérifications de signature est faible, et les économies potentielles que nous réalisons grâce à la mise en cache négative agressive le compensent largement. Nous voulons que nos utilisateurs aient confiance dans les réponses que nous leur donnons, par conséquent nous effectuons tous les contrôles possibles pour éviter de leur apporter de mauvaises réponses.</p>
	<p>Toutefois, le protocole <a href="https://blog.cloudflare.com/dnssec-complexities-and-considerations">DNSSEC</a> est impitoyable. Des erreurs de configuration DNSSEC par des opérateurs DNS de référence peuvent rendre insolubles les domaines mal configurés. Pour contourner ce problème, Cloudflare configurera des « certificats approuvés négatifs » sur les domaines avec des erreurs DNSSEC détectées et vérifiées et les supprimera une fois la configuration corrigée par les opérateurs de référence. Ceci limite l'impact des domaines DNSSEC défectueux en désactivant temporairement la validation DNSSEC pour un domaine mal configuré spécifique et en restaurant l'accès aux utilisateurs finaux.</p>
	<h2 id="comment-l-avons-nous-cr-"><strong>Comment l'avons-nous créé ?</strong></h2>
	<p>Au départ, nous avons envisagé de créer notre propre résolveur, mais nous avons écarté cette idée en raison de sa complexité et de considérations liées à sa commercialisation. Ensuite, nous avons examiné tous les résolveurs open source disponibles sur le marché ; à partir de cette longue liste, nous en avons sélectionné deux ou trois qui répondaient à la plupart des impératifs de ce projet. En fin de compte, nous avons décidé de créer le système autour du <a href="https://www.knot-resolver.cz">Knot Resolver de CZ NIC</a>. Il s'agit d'un résolveur moderne sorti il y a environ deux ans et demi. En choisissant le résolveur Knot, nous favorisons également la diversité des logiciels. Ce qui a fini de nous convaincre, c'est qu'il possédait un grand nombre des caractéristiques de base que nous voulions, avec une architecture modulaire similaire à celle de <a href="https://openresty.org"> OpenResty</a>. Le résolveur Knot est en cours d'utilisation et de développement.</p>
	<h2 id="ce-que-nous-faisons-d-int-ressant-et-que-personne-d-autre-ne-fait"><strong>Ce que nous faisons d'intéressant et que personne d'autre ne fait</strong></h2>
	<p>Nous voulions disposer des fonctionnalités avancées suivantes :</p>
	<ul>
		<li>Minimisation de requêtes <a href="https://tools.ietf.org/html/rfc7816">RFC7816</a>,</li>
		<li>DNS-over-TLS (Sécurité de la couche de transport)<a href="https://tools.ietf.org/html/rfc7858">RFC7858</a>,</li>
		<li>DNS-over-HTTPS<a href="https://datatracker.ietf.org/wg/doh/about">DoH</a>,</li>
		<li>Les réponses négatives agressives <a href="https://tools.ietf.org/html/rfc8198">RFC8198</a>,</li>
	</ul>
	<p>Petit avertissement : le développeur principal original de Knot Resolver, <a href="https://blog.cloudflare.com/author/marek">Marek Vavruša</a>, travaille depuis plus de deux ans dans l’équipe de Cloudflare consacrée aux DNS.</p>
	<h2 id="comment-rendre-notre-r-solveur-plus-rapide"><strong>Comment rendre notre résolveur plus rapide ?</strong></h2>
	<p>De nombreux facteurs ont une incidence sur la rapidité d'un résolveur. Le premier et le plus important d'entre eux est de savoir s'il peut répondre à partir du cache Si c'est le cas, alors le temps de réponse correspond uniquement à la durée de l'aller-retour d'un paquet entre le client et le résolveur.</p>
	<p></p>
	<figure class="kg-card kg-image-card"><img src="https://blog.cloudflare.com/content/images/2019/04/1.1.1.1-dns-resolver-performance.png" class="kg-image" alt="" loading="lazy"></figure>
	<p></p>
	<p>Quand un résolveur a besoin d'obtenir une réponse de la part d'une source de référence, les choses deviennent un peu plus compliquées. Un résolveur doit suivre la hiérarchie DNS pour résoudre un nom, ce qui signifie qu'il doit communiquer avec plusieurs serveurs de référence en commençant par le serveur racine. Par exemple, notre résolveur de Buenos Aires, en Argentine, prendra plus de temps à suivre une hiérarchie DNS que notre résolveur de Francfort, en Allemagne, du fait de sa proximité avec les serveurs de référence. Afin de contourner ce problème, nous remplissons au préalable notre cache, hors bande, avec les noms populaires, ce qui signifie que lorsqu'une requête arrive, les réponses peuvent être extraites du cache, ce qui est beaucoup plus rapide. Au cours des prochaines semaines, nous publierons des articles sur notre blog pour vous parler d'autres mesures que nous prenons pour rendre le résolveur plus rapide et l'améliorer, comme notre méthode de mise en cache rapide.</p>
	<p>L'un des problèmes de notre réseau étendu est que le taux de réponse du cache est inversement proportionnel au nombre de nœuds configurés dans chaque centre de traitement de données. S'il n'y avait qu'un seul nœud dans le centre de traitement de données le plus proche de chez vous, alors vous pourriez être sûr(e) qu'en posant deux fois la même question, la deuxième réponse se retrouverait en cache. Cependant, étant donné que chacun de nos centres de données compte des centaines de nœuds, vous pourriez obtenir une réponse qui ne serait pas mise en cache, mais vous devriez subir un temps de latence pour chaque requête. Une solution courante consiste à mettre un répartiteur de charge en cache devant tous vos résolveurs, ce qui a pour effet regrettable d'introduire un point individuel de défaillance. Nous ne nous contentons pas de points individuels de défaillance.</p>
	<p>Au lieu de s'appuyer sur un cache centralisé, le résolveur DNS 1.1.1.1.1 utilise un cache distribué innovant, dont nous parlerons dans un autre article.</p>
	<h2 id="politique-en-mati-re-de-donn-es"><strong>Politique en matière de données</strong></h2>
	<p>En fait, nous ne stockons jamais les adresses IP des clients et nous n'utilisons que des noms de requêtes pour des éléments qui améliorent les performances du résolveur DNS (comme le pré-remplissage de tous les caches d'après des noms de domaines populaires dans une région et/ou après une offuscation ou une recherche APNIC).</p>
	<p>Cloudflare ne stockera jamais dans ses registres des informations permettant d'identifier un utilisateur final, et tous les registres récupérés par notre résolveur public seront supprimés dans les 24 heures. Nous continuerons à respecter notre <a href="https://developers.cloudflare.com/1.1.1.1/commitment-to-privacy/privacy-policy/privacy-policy">politique de confidentialité</a> et nous veillerons à ce qu'aucune donnée de nos utilisateurs ne soit vendue à des annonceurs ou utilisée pour cibler des consommateurs.</p>
	<h2 id="param-trage"><strong>Paramétrage</strong></h2>
	<p>C’est simple : rendez-vous sur <a href="https://1.1.1.1">https://1.1.1.1/ </a>.</p>
	<h2 id="-propos-des-adresses"><strong>À propos des adresses</strong></h2>
	<p>Nous remercions l'APNIC, notre partenaire, pour les adresses IPv4 1.0.0.1 et 1.1.1.1 (dont tout le monde s’accorde à dire qu’elles sont on ne peut plus simples à retenir). Sans les années de recherche et d'essais qu'ils ont consacrées à ces adresses, il serait impossible de les exploiter. Pourtant, il nous reste encore un long chemin à parcourir... Vous en saurez plus sur nos aventures avec ces adresses IP dans les prochains articles.</p>
	<p>Pour IPv6, nous avons choisi 2606:4700:4700::1111 et 2606:4700:4700::1001 pour notre service. Il n'est pas aussi facile d'obtenir des adresses IPv6 faciles à retenir ; cependant, nous avons choisi une adresse qui n'utilise que des chiffres.</p>
	<p>Mais pourquoi utiliser des adresses faciles à retenir ? Qu'est-ce que les résolveurs publics ont de spécial ? Bien que nous utilisions des noms pour presque tout ce que nous faisons, il faut qu'il y ait une première étape dans le processus et c'est là que ces chiffres entrent en jeu. Nous avons besoin d'un numéro inscrit dans n'importe quel ordinateur ou appareil connecté que vous utilisez afin de trouver un service de résolveur.</p>
	<p>N'importe qui sur internet peut utiliser notre résolveur public et vous pouvez apprendre comment sur <a href="https://1.1.1.1">https://1.1.1.1/ </a> et en cliquant sur <strong>COMMENCER</strong>.</p>
	<h2 id="pourquoi-l-annoncer-un-1er-avril"><strong>Pourquoi l’annoncer un 1er avril ?</strong></h2>
	<p>Dans la plupart des pays du monde, la date de ce dimanche est le 1/4/2018 (en Amérique, le jour et le mois sont inversés, ce qui donne 4/1/2018). Voyez-vous le <strong>4</strong> et le <strong>1</strong> ? Nous l’avons remarqué, c’est pourquoi nous annonçons <strong>1.1.1.1</strong> aujourd'hui. Quatre chiffres un ! Si cela vous permet de vous souvenir <strong>1.1.1.1</strong>, alors nous avons bien fait !</p>
	<p>Bien sûr, c’est aussi <a href="https://en.wikipedia.org/wiki/April_Fools%27_Day">le jour des poissons d’avril</a> et pour une bonne partie des gens, c'est un jour de blagues, de bêtises ou de farces inoffensives. Il ne s'agit ni d'une blague, ni d'une farce, ni d'une bêtise. Il s’agit de notre résolveur DNS, <a href="https://1.1.1.1">1.1.1.1</a> ! Suivez-le sur #1dot1dot1dot1<br></p>
</div>