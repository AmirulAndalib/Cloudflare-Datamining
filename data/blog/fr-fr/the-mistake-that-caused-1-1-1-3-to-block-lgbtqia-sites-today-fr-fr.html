<div class="post-content lh-copy gray1">
	<p>Aujourd’hui, nous avons commis une erreur. Du fait de cette erreur, un certain nombre de sites LGBTQIA+ ont été bloqués par inadvertance par le nouveau service 1.1.1.1 for Families. Je tenais à vous expliquer ce qui s’est passé, pourquoi cela s’est passé et ce que nous avons fait pour y remédier.</p>
	<p>Comme le veut la tradition depuis trois ans, nous lançons le 1er avril de nouveaux produits destinés au grand public qui utilise Internet. Cette année, l’un de ces produits était un service DNS filtré : <a href="https://blog.cloudflare.com/introducing-1-1-1-1-for-families/">1.1.1.1 for Families</a>. Ce service permet à toute personne qui choisit de l’utiliser de bloquer certaines catégories de sites.</p>
	<h3 id="dns-filtr-ou-non-filtr-">DNS filtré ou non filtré</h3>
	<p>Rien dans notre nouveau service DNS filtré ne modifie la nature de 1.1.1.1, qui ne l’est pas. Cependant, nous admettons que certaines personnes veulent pouvoir contrôler quels contenus sont diffusés chez elles. Par exemple, je bloque la résolution des sites de réseaux sociaux pendant que j’essaie de travailler, car cela me permet d’être plus productif. La première des revendications des utilisateurs de 1.1.1.1 était que nous créions une version du service à usage domestique pour bloquer certaines catégories de sites. C’est pour cette raison que nous avons lancé tout à l’heure 1.1.1.1 for Families.</p>
	<p>À terme, nous permettrons aux utilisateurs de 1.1.1.1 for Families de définir avec précision les catégories de sites qu’ils souhaitent bloquer (ce que je fais par exemple avec les sites de réseaux sociaux pour rester productif). Au départ, nous avons créé deux paramètres par défaut qui correspondaient aux types de contenus que les utilisateurs souhaitaient bloquer le plus souvent : les logiciels malveillants (que vous pouvez bloquer en utilisant 1.1.1.2 et 1.0.0.2 comme résolveurs DNS), et les logiciels malveillants + les contenus pour adultes (que vous pouvez bloquer en utilisant 1.1.1.3 et 1.0.0.3 comme résolveurs DNS).</p>
	<h3 id="donn-es-de-cat-gorisation-sous-licence">Données de catégorisation sous licence</h3>
	<p>Pour obtenir des données pour 1.1.1.1 for Families, nous avons acquis des flux sous licence auprès de plusieurs fournisseurs différents, spécialisés dans la catégorisation des sites. Nous avons passé les derniers mois à évaluer les fournisseurs de services de classification afin de déterminer lesquels se distinguaient par leur précision et leur faible taux de faux positifs.</p>
	<p>Les logiciels malveillants, qui regroupent un ensemble de menaces de sécurité informatique communément reconnues, furent la catégorie la plus facile à définir. En ce qui concerne les contenus pour adultes, nous avons voulu appliquer les critères SafeSearch de Google. Google a fait preuve de beaucoup de minutie dans ce domaine, et son outil SafeSearch est conçu pour éliminer les « contenus sexuellement explicites » des résultats de recherche. La définition porte sur la pornographie et suit largement les exigences de la loi <a href="http://ifea.net/cipa.pdf?ref=blog.cloudflare.com" target="_blank">US Children’s Internet Protection Act (CIPA)</a> à laquelle sont tenues de se conformer les écoles et les bibliothèques aux États-Unis.</p>
	<p>Comme il s’agissait de la valeur par défaut pour le service 1.1.1.3, et que nous avons prévu de permettre à l’avenir aux utilisateurs de définir leurs propres paramètres au-delà de la valeur par défaut, nous avons voulu que la catégorie des contenus pour adultes soit très restrictive. Par contre, nous ne voulions pas inclure les contenus LGBTQIA+ dans la catégorie des contenus pour adultes. Pourtant, lors de son lancement, nous avons malheureusement constaté que ces sites étaient filtrés.</p>
	<h3 id="choix-de-flux-erron-">Choix de flux erroné</h3>
	<p>Que s’est-il donc passé ? Les fournisseurs de données dont nous utilisons les contenus sous licence ont des méthodes de classification différentes qui ne sont pas harmonisées entre elles. L’un de ces fournisseurs propose plusieurs catégories de « contenus pour adultes ». L’une de ces catégories reprend la définition de Google SafeSearch/de la loi CIPA. Une autre encore comprend un ensemble plus large de sous-catégories, dont les sites LGBTQIA+.</p>
	<p>Bien que nous ayons expressément contrôlé la catégorie « contenus pour adultes » pour nous assurer qu’elle correspondait strictement à la définition de Google SafeSearch/de la CIPA, lorsque nous avons publié la version finale ce matin, nous y avons inclus la mauvaise catégorie de « contenus pour adultes ». En conséquence, les premiers utilisateurs qui ont essayé 1.1.1.3 ont vu un plus grand nombre de sites filtrés que prévu, dont des sites présentant des contenus LGBTQIA+. Nous avons immédiatement entrepris de régler le problème.</p>
	<h3 id="actualisation-lente-des-structures-de-donn-es">Actualisation lente des structures de données</h3>
	<p>Pour pouvoir diffuser rapidement la liste des sites à tous nos datacenters, nous utilisons une structure de données compacte. L’avantage est que nous pouvons reproduire très efficacement la structure des données dans le monde entier. L’inconvénient est que la génération d’une nouvelle version de la structure des données prend plusieurs heures. Dès que nous nous sommes rendus compte de notre erreur, nous avons retiré le fournisseur de données fautif et commencé à recréer la nouvelle structure de données.</p>
	<p>Pendant que la nouvelle structure de données se répandait sur notre réseau, nous avons immédiatement transféré des sites individuels sur une liste de sites autorisés. Nous avons commencé à constituer des listes à partir des rapports d’utilisateurs ainsi que d’autres ressources LGBTQIA+. Ces modifications ont été immédiatement appliquées. Nous avons continué à ajouter des sites à la liste des sites autorisés au fur et à mesure de leur signalement ou de leur découverte.</p>
	<p>À 16h51 UTC, environ deux heures après avoir reçu le premier rapport concernant un blocage erroné, la structure de données contenant la bonne définition des contenus pour adultes avait été générée et nous l’avons publiée. Les seuls utilisateurs qui ont pu subir ce blocage excessif sont ceux qui utilisaient déjà 1.1.1.3. Les utilisateurs de 1.1.1.1 (qui ne contient pas de filtres) et de 1.1.1.2 n’ont pas subi ce blocage intempestif.</p>
	<p>Pour l’instant, le filtrage prévu par le paramétrage par défaut de 1.1.1.3 correspond à ce que nous voulions, et devrait correspondre à peu près aux résultats que vous obtiendriez en utilisant le service SafeSearch de Google, et les sites LGBTQIA+ ne sont pas bloqués. Si vous remarquez que des sites sont bloqués alors qu’ils ne devraient pas l’être, veuillez nous le signaler ici.</p>
	<p><a href="https://report.teams.cloudflare.com/?ref=blog.cloudflare.com" target="_blank">https://report.teams.cloudflare.com/</a></p>
	<h3 id="une-protection-pour-l-avenir">Une protection pour l’avenir</h3>
	<p>Par la suite, nous avons mis en place un certain nombre de procédures de vérification des sites qui n’entrent pas dans les catégories prévues, où figurent une grande partie de ceux que nous avons répertoriés par erreur aujourd’hui. Avant que les valeurs par défaut ne soient mises à jour à l’avenir, notre système de compilation vérifiera qu’aucun de ces sites n’est répertorié. Nous espérons que cela permettra de repérer les erreurs de ce genre à l’avenir.</p>
	<p>Je vous prie de nous excuser pour cette erreur. Même si je comprends comment cela s’est passé, cette situation n’aurait jamais dû se produire. Je remercie notre équipe qui a réagi rapidement pour réparer notre erreur.</p>
</div>