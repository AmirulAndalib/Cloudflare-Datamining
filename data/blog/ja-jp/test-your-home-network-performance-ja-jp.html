<div class="post-content lh-copy gray1">
	<p>多くの人が在宅勤務をせざるを得なくなり、<a href="https://blog.cloudflare.com/recent-trends-in-internet-traffic">コンシューマISPでの負荷が増加</a>しました。自分自身に聞いてみてください。「トラフィックが増えて、自分のISPのパフォーマンスに影響は出ているのか。」本日、speed.cloudflare.comが一般にご利用いただけるようになったことを発表します。ご利用のネットワークのパフォーマンスを正確に把握し、意味のあるインサイトを得るための方法です。</p>
	<p>ユーザーによるインターネットアクセスが<a href="https://blog.cloudflare.com/covid-19-impacts-on-internet-traffic-seattle-italy-and-south-korea">忙しいオフィス街から都市部全体に拡大</a>して大きい変化が起こりました。</p>
	<p>おびただしい数のテストツールが存在しますが、計測方法や実際のパフォーマンスの計画方法などに関する正確なインサイトを提供するツールはありません。<a href="https://speed.cloudflare.com" target="_blank">speed.cloudflare.com</a>では、何を測定しているのか、どのようにネットワーク接続のスコアを正確に計算するのかに関するインサイトを提供します。何よりも、独自の分析を実行したいとみなさんがお考えの場合、ツール内から簡単に直接測定値をダウンロードできます。</p>
	<p>当社は、プライバシーも大事なことだと認識しています。また、このツールによって生み出された結果で、何が起きるのかを知るべきだと考えています。他社のツールの多くは、サードパーティにデータを販売していますが、Cloudflareがお客様のデータを販売することはありません。パフォーマンスデータは当社の<a href="https://www.cloudflare.com/privacypolicy" target="_blank">プライバシーポリシー</a>の条項に則って収集し、非特定化して管理します。データは、容量とピアリングするインターネットサービスプロバイダーの決定の両面から、当社のネットワークを改善するために匿名で使用されます。</p>
	<figure class="kg-card kg-image-card"><img src="https://blog.cloudflare.com/content/images/2020/05/image1-10.png" class="kg-image" alt="" loading="lazy"></figure>
	<p>テストは、ダウンロード、アップロード、レイテンシーテストの三つの主要なコンポーネントがあります。それぞれで、ネットワーク接続の様々な側面を測定します。</p>
	<h3 id="-">ダウン</h3>
	<p>はじめに、基本的なダウンロードテストを始めます。小さなファイルをダウンロードすることから開始し、テストがインターネットダウンリンクを飽和状態にするまで徐々にファイルを大きくしていきます。小さいファイル（10KBからはじめ、そして100KBなど）は、通常、画像、CSSスタイルシート、JSONブロブと言った小さいファイルをたくさん含むため、Webサイトの読み込み方法をよく表します。</p>
	<p>表はファイスサイズごとに測定値を表示しており、ドリルダウンできます。棒グラフの点はそれぞれ、測定値の一つを表していて、細い線は、測定した速度の範囲を示しています。厚めのブロックは、25パーセンタイルと70パーセンタイルの間の測定値のセットを表しています。</p>
	<figure class="kg-card kg-image-card"><img src="https://blog.cloudflare.com/content/images/2020/05/image2-10.png" class="kg-image" alt="" loading="lazy"></figure>
	<p>ファイルサイズを大きくしていくと、真の最大スロープットが得られます。実際の帯域幅はどのくらいか。なぜ徐々に大きいファイルを使う必要があるのか、不思議に思っていらっしゃるかもしれませんね。その理由は、ダウンロード速度のスタートが遅く（これは文字通り<a href="https://en.wikipedia.org/wiki/TCP_congestion_control#Slow_start" target="_blank">スロースタート</a>と呼ばれます）、その後徐々に速度を上げていきます。もし小さいファイルだけを使ったら、ご利用のネットワークプロバイダーがサポートできる最大スループットを得ることはできないのです。つまり、サービスに登録した時にISPが見積もったインターネットスピードに近くなければならないということです。</p>
	<p>大きなファイルでの最大スループットは、ゲーム（<a href="https://store.steampowered.com/app/271590/Grand_Theft_Auto_V" target="_blank">GTA V</a>のダウンロードはおよそ100GB!）のような大きなファイルをダウンロードするときの速度、または動画配信できる最大品質（ダウンロード速度が遅いほど、連続再生するには低い解像度を使う必要がある）を示します。正確な測定値が得られるために絶対最小値までダウンロードファイルサイズを増やすだけです。帯域幅を無駄にしません。</p>
	<h3 id="--1">アップ</h3>
	<p>アップロードはダウンロードの反対の意味です。データをブラウザからインターネットに送信します。多くの人が自宅から働く昨今、このメトリックは非常に重要です。それは、ライブビデオ会議に直接影響するからです。アップロードが速いほどマイクや動画のフィードの質は高くなります。つまり、ビデオ会議で他の人たちにはっきりとした自分の画像や音声を送ることができるということです。</p>
	<p>アップロードの測定は、同じ方法で行われます。ご利用の接続が飽和状態になっていることに気づくところまでアップロードするファイルを徐々に多くしていきます。</p>
	<p>スピード測定は決して、100%一貫性があるものではありません。それが繰り返し行う理由です。単に最高速度をお客様に報告するのが、一番手っ取り早い方法です。しかし問題は、それが実際の体験を表すものではないということです。レイテンシーやパケット損失は常に変動するものです。つまり、いつも測定された最高のパフォーマンスを期待してもいいということではないのです。</p>
	<p>これを補うために、測定値の90パーセンタイルまたはp90を取るか、測定した絶対最大スピードの代わりにそれを報告します。90パーセンタイルを取ると、ピークの外れ値を割り引くという点で、さらに正確な表現となります。これは、現実のスピードに関して予想できる値に限りなく近いものです。</p>
	<h3 id="--2">レイテンシーとジッタ</h3>
	<p>ダウンロードとアップロードは重要な指標ですが、それだけがインターネット接続全体の質だと考えないでください。仕事でもプライベートでもかつてないほどビデオ会議を使って交流している方が多いことでしょう。スピードは大事ですが、動画もインターネット接続のレイテンシーに非常に敏感なものです。レイテンシーは時間を表し、IPパケットはデバイスからインターネットで使うサービスへ行ったり来たりする必要があります。レイテンシーが高いということは、ビデオ会議で話しているとき、相手があなたの声を聞くまで、さらに時間がかかるということです。</p>
	<p>しかし、レイテンシーは全体図の半分に過ぎません。相手の言うことが聞こえる前に遅延がある状況下で会話している自分を想像してみてください。煩わしいものですが、しばらくすると慣れてくるものです。もっと悪い状況は、その遅延が絶えずばらつく場合です。例えば、両者の音声がほとんどシンクロすることもあれば、数秒の遅れが生じることもある場合です。このような状況では、会話する2人が何回も同時に話し始めてしまうのが、簡単に想像できます。これは、レイテンシーがどれだけ安定しているかということに直接関係があり、ジッタメトリックで表されます。ジッタとは、連続して行うレイテンシー測定で検出される平均変動のことです。数値が低いほど、測定されるレイテンシーの一貫性が高くなります。つまり、メディア配信がセッションを通じて同じ遅延を持つということです。</p>
	<figure class="kg-card kg-image-card"><img src="https://blog.cloudflare.com/content/images/2020/05/image4-5.png" class="kg-image" alt="" loading="lazy"></figure>
	<p>Cloudflareでは、最大限の透明性を持つためにspeed.cloudflare.comをデザインしました。測定値をクリックすると、平均値、中央値、最小値、最大値などを確認することができます。数値でちょっと遊んでみるなら、ダウンロードボタンを使ってみてください。測定したままの集計されていない結果が見られます。</p>
	<figure class="kg-card kg-image-card"><img src="https://blog.cloudflare.com/content/images/2020/05/image3-9.png" class="kg-image" alt="" loading="lazy"></figure>
	<p>Workers上で、speed.cloudflare.comのバックエンド全体が実行されています。つまり、すべてのロジックがCloudflareエッジと皆さんのブラウザで実行されていて、サーバーは不要ということです！ベンチマークがどのように行われているかに興味がおありなら、コードをオープンソース化してありますので、当社の<a href="https://github.com/cloudflare/worker-speedtest-template" target="_blank">Github</a>リポジトリをご自由にご覧ください。</p>
	<p>このツールをネットワークデバッグツールセットに追加してお楽しみください。当社としては透明性を持つこと、ツールがそれを反映していることが最大の喜びです。ご利用のネットワークパフォーマンスは、単なる数字ではありません。<a href="https://speed.cloudflare.com" target="_blank">試しにお使いになって</a>どのように感じたかお教えください。</p>
</div>