<div class="mb2 gray5">3 min read</div>
<div class="post-content lh-copy gray1">
	<figure class="kg-card kg-image-card"><img src="https://blog.cloudflare.com/content/images/2023/09/image1-35.png" class="kg-image" alt="Cloudflare is now powering Microsoft Edge Secure Network" loading="lazy" width="1800" height="1014"></figure>
	<p>Webサイト全体のユーザーのアクティビティを追跡するサードパーティのCookieから、IPアドレスと閲覧データに基づく高度なターゲティング広告まで、今日のインターネット閲覧エクスペリエンスは内密であるべきなのに、それほど内密ではないことはよく知られています。 Cloudflareでは、誰もが執拗な追跡や詮索の目から解放されてインターネットを閲覧できるべきだと考えています。 </p>
	<p>そのため、Microsoft Edgeと提携し、ブラウザで高速かつ安全なVPNを提供できるようになったことを発表でき、嬉しく思います。新しいものをインストールしたり、複雑な概念を理解したりしなくても、最新のネットワークレベルのプライバシーを手に入れることができます。EdgeセキュアネットワークVPNは、ほとんどの市場で、Microsoft Edgeの最新コンシューマーバージョンを利用でき、5GBのデータが自動的に付属します。<em>[Microsoft Edgeの設定とさらに（…）&gt;ブラウザーの基本]</em>に移動し、<em>[VPNを無料で入手]</em>をクリックしてこの機能を有効にするだけです。詳細については、Microsoftの<a href="https://www.microsoft.com/en-us/edge/features/edge-secure-network-vpn?form=MT00D8">Edgeセキュアネットワークページを</a>参照してください。</p>
	<h3 id="cloudflare%E3%81%AE%E3%83%97%E3%83%A9%E3%82%A4%E3%83%90%E3%82%B7%E3%83%BC%E3%83%97%E3%83%AD%E3%82%AD%E3%82%B7%E3%83%97%E3%83%A9%E3%83%83%E3%83%88%E3%83%95%E3%82%A9%E3%83%BC%E3%83%A0%E3%81%AF%E5%85%B8%E5%9E%8B%E7%9A%84%E3%81%AAvpn%E3%81%A7%E3%81%AF%E3%81%82%E3%82%8A%E3%81%BE%E3%81%9B%E3%82%93">Cloudflareのプライバシープロキシプラットフォームは典型的なVPNではありません</h3>
	<p>一歩下がってみる：VPNは、デバイスを離れるインターネットトラフィックが、プロバイダー–（この場合はCloudflare）が運営する中間サーバーを介してトンネリングされる方法です！これを可能にする重要な要素は数多くありますが、その中には、トンネルの確立方法とトラフィックがトンネルを通って流れる方法を定義するVPNプロトコルがあります。次のプロトコルについて聞いたことがあるかもしれません：たとえば、Wireguard、IPsec、およびOpenVPNです。そして、私たちはこれらに精通しているわけではありませんが、（CloudflareのWireGuard実装は現在<a href="https://blog.cloudflare.com/1111-warp-better-vpn">1.1.1.1+WARP</a>を使用する何百万ものデバイスで使用されています）–プライバシープロキシプラットフォームは、インターネットプライバシーの次のフロンティアを推進し、Cloudflareのコアバリューの1つであるオープンなインターネット標準を採用する手段だと、私たちは考えています。</p>
	<p>プライバシープロキシプラットフォームは、HTTP CONNECT（<a href="http://placeholder">HTTP標準</a>で定義されているメソッド）を実装しており、トンネルを確立し、そのトンネルを介して信頼性の高い順序付けられたバイトストリームを送信することにより、トラフィックをプロキシします。このプロキシする方法（およびその歴史）の詳細については、<a href="https://blog.cloudflare.com/a-primer-on-proxies">プロキシ入門</a>をご覧ください。</p>
	<p>また、Cloudflareのプライバシー指向のインフラストラクチャのうち、すでに大規模にデプロイされているその他の部分も活用しています。リクエストはまず、DNSに<a href="https://1.1.1.1/dns">1.1.1.1</a>を利用し、クライアント認証には、<a href="https://datatracker.ietf.org/wg/privacypass/about">Privacy Pass</a>に基づくトークンプロキシを使用し、<a href="https://blog.cloudflare.com/geoexit-improving-warp-user-experience-larger-network">Geo-エグレス</a>を使用して、ユーザーの正確な場所を公開することなく正確なエグレスIPアドレスを選択します。</p>
	<h3 id="%E4%BB%95%E7%B5%84%E3%81%BF">仕組み</h3>
	<p>これらのコンポーネントの詳細を見てみましょう。このブログの目的として、ユーザーがインターネット（携帯電話、タブレット、またはコンピューター）の閲覧に使用しているデバイスを<em>クライアント</em>と呼び、アクセスしようとしているWebサイトを<em>オリジンサイト</em>と呼びます。</p>
	<p>プライバシープロキシプラットフォームには3つのメイン部分があります。</p>
	<ol>
		<li><strong>トークンプロキシ</strong>：これは、あなたが正規のMicrosoftアカウントを持つEdgeセキュアネットワークのユーザーであるかどうかをチェックするサービスです。</li>
		<li><strong>プライバシーAPI</strong>：上記に基づいて、CloudflareのプライバシーAPIは、クライアントがプロキシ自体への認証に使用する認証トークンを発行します。</li>
		<li><strong>プライバシープロキシ</strong>：これは、Cloudflareのネットワーク上で実行されるHTTP CONNECTベースのプロキシサービスです。このサービスは、クライアントが有効な認証トークンを提示しているかをチェックし、提示している場合、暗号化されたHTTPリクエストをオリジンサイトにプロキシします。また、使用する有効なエグレスIPアドレスを選択する責任があります。</li>
	</ol>
	<figure class="kg-card kg-image-card kg-width-wide"><img src="https://blog.cloudflare.com/content/images/2023/09/image2-24.png" class="kg-image" alt="" loading="lazy" width="1600" height="897"></figure>
	<p>Edgeセキュアネットワークの保護がオンになっている場合–たとえば、ユーザーがコーヒーショップでオープンWi-Fiネットワークに接続した際に、プロキシは自動的にクライアントにトークンを認証するよう促します。クライアントがトークンを持っている場合は、それを提示します。持っていない場合は、トークンプロキシを利用して、認証者と発行者の協力を得て新しいプールを作成します。認証者はクライアントとMicrosoftアカウントの有効性をチェックし、代わりに、発行者はそのクライアントのトークンを発行します。このダンスは<a href="https://blog.cloudflare.com/supporting-the-latest-version-of-the-privacy-pass-protocol">プライバシーパスプロトコル</a>に基づいています。重要なことは、これにより、Cloudflareは、Microsoftユーザーから個人情報を収集または保存することなく、クライアントが本人であることを検証できることです。</p>
	<p>クライアントが有効なトークンをプロキシサーバーに提示すると、プライバシープロキシはクライアントのジオロケーションのハッシュに基づき有効なエグレスIPアドレスを選択します。次に、DNSレコード（CloudflareのDNSリゾルバー<a href="https://1.1.1.1">1.1.1.1</a>が提供）を使用して、オリジンWebサイトへの暗号化されたセッションを開きます。そこからは非常に簡単です。ユーザーがそのサイトの閲覧し続けると、その接続を介してさらなるリクエストが送信され、ブラウザを停止または閉じると、その接続も閉じます。</p>
	<p>Cloudflareは毎秒数百万のリクエストをプロキシするため、プロキシの運用面の多くは<a href="https://blog.cloudflare.com/introducing-oxy">Oxy</a>によって管理されます。Oxyは、テレメトリ、グレースフルリスタートからストリームの多重化やIPフォールバック、認証<a href="https://blog.cloudflare.com/oxy-extensibility">フック</a>まで、あらゆるものを処理するプロキシフレームワークです。</p>
	<h3 id="cloudflare%E3%81%AE%E3%83%8D%E3%83%83%E3%83%88%E3%83%AF%E3%83%BC%E3%82%AF%E3%81%AB%E3%82%88%E3%82%8B%E4%BD%8E%E3%83%A9%E3%82%B9%E3%83%88%E3%83%9E%E3%82%A4%E3%83%AB%E9%81%85%E5%BB%B6%E3%81%8A%E3%82%88%E3%81%B3%E3%82%B8%E3%82%AA%E3%83%AD%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E3%81%AE%E5%9D%87%E7%AD%89%E6%80%A7">Cloudflareのネットワークによる低ラストマイル遅延およびジオロケーションの均等性</h3>
	<p>Cloudflareのプライバシープロキシ実装は、プライバシーを犠牲にすることなくユーザーエクスペリエンスを最大化します。Edgeセキュアネットワークを有効にすると、ユーザーは地理的に位置する場所に関連した検索結果や閲覧結果を取得できます。Cloudflareでは、これをピザテストと呼んでいます。ユーザーは当社のプライバシープロキシ製品のいずれかを使用でき、なおかつ「<em>近くのピザ店</em>」の結果を取得できるようになっています。これは、ユーザーの場所に対応するIPアドレスを持つCloudflareデータセンターを常に経由し、エグレスすることで実現します。–<a href="https://blog.cloudflare.com/geoexit-improving-warp-user-experience-larger-network">1.1.1.1+WARP</a>でこれを行った方法については、詳しく説明しています。</p>
	<p>数十、場合によっては数百のサーバーを持つ一般的なVPN事業者とは異なり、Cloudflareは、<a href="https://cloudflare.com/network">300以上の都市</a>にデータセンターを設置するなど、はるかに大きなフットプリントを保有しています。当社のネットワークはエニーキャストの「あらゆるサービスをどこでも」がアプローチであるため、当社の各データセンターは、Edgeセキュアネットワーククライアントからのトラフィックを受け入れることができます。このことは、Edgeユーザーが地理的に非常に近いCloudflareデータセンターを自動的に検出して接続し、ラストマイルの遅延を最小限に抑えることを意味します。最後に、Cloudflareは、CDNも運用しているため、すでにCloudflare上にあるWebサイトには「ホットパス」が与えられ、読み込みが速くなります。</p>
	<p>私たちCloudflareは、オープンなインターネットにより多くのプライバシーオプションを提供できるよう常に努力しており、よりプライベートで安全なブラウジングをEdgeユーザーに提供できることを嬉しく思います。詳細については、<a href="https://www.microsoft.com/en-us/edge/features/edge-secure-network-vpn">MicrosoftのEdgeセキュアネットワークページ</a>または、<a href="https://support.microsoft.com/en-us/topic/use-the-microsoft-edge-secure-network-to-protect-your-browsing-885472e2-7847-4d89-befb-c80d3dda6318">Microsoftのサポートページ</a>にアクセスしてください。このようなプライバシー保護プロキシの使用に関心のあるパートナーの方は、<a href="https://www.cloudflare.com/lp/privacy-edge">こちらのフォーム</a>にご記入ください。</p>
</div>