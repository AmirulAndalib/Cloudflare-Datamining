<div class="mb2 gray5">3 min read</div>
<div class="mt4">This post is also available in <a href="https://blog.cloudflare.com/ko-kr/how-to-test-http-3-and-quic-with-firefox-nightly">한국어</a>.</div>
<div class="post-content lh-copy gray1">
	<figure class="kg-card kg-image-card ">

		<img src="https://cf-assets.www.cloudflare.com/zkvhlag99gkb/6LFuqXEde60ewdAIKCGpBU/bf9372291e6c9ed483d3df9b8d1c2018/HTTP3-partnership-nightly-_3x-1.png" alt="" class="kg-image" width="2000" height="1256" loading="lazy">

	</figure>
	<p><a href="https://www.cloudflare.com/learning/performance/what-is-http3">HTTP/3</a> is the third major version of the Hypertext Transfer Protocol, which takes the bold step of moving away from TCP to the new transport protocol QUIC in order to provide performance and security improvements.</p>
	<p>During Cloudflare's Birthday Week 2019, we were <a href="https://blog.cloudflare.com/http3-the-past-present-and-future">delighted to announce</a> that we had enabled QUIC and HTTP/3 support on the Cloudflare edge network. This was joined by support from Google Chrome and Mozilla Firefox, two of the leading browser vendors and partners in our effort to make the web faster and more reliable for all. A big part of developing new standards is interoperability, which typically means different people analysing, implementing and testing a written specification in order to prove that it is precise, unambiguous, and actually implementable.</p>
	<p>At the time of our announcement, Chrome Canary had experimental HTTP/3 support and we were eagerly awaiting a release of Firefox Nightly. Now that Firefox supports HTTP/3 we thought we'd share some instructions to help you enable and test it yourselves.</p>
	<div class="flex anchor relative">
		<h3 id="how-do-i-enable-http-3-for-my-domain">How do I enable HTTP/3 for my domain?</h3>
		<a href="https://blog.cloudflare.com/#how-do-i-enable-http-3-for-my-domain" aria-hidden="true" class="relative sm:absolute sm:-left-5">
			<svg width="16" height="16" viewBox="0 0 24 24">
				<path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path>
			</svg>
		</a>
	</div>
	<p>Simply go to the Cloudflare dashboard and flip the switch from the "Network" tab manually:</p>
	<figure class="kg-card kg-image-card ">

		<img src="https://cf-assets.www.cloudflare.com/zkvhlag99gkb/zkM5pyAf9MD0HhWqueVP3/e4d9d2d8ae7a37b5da5c0bda7e9447e5/http3-toggle-1.png" alt="" class="kg-image" width="3119" height="605" loading="lazy">

	</figure>
	<div class="flex anchor relative">
		<h3 id="using-firefox-nightly-as-an-http-3-client">Using Firefox Nightly as an HTTP/3 client</h3>
		<a href="https://blog.cloudflare.com/#using-firefox-nightly-as-an-http-3-client" aria-hidden="true" class="relative sm:absolute sm:-left-5">
			<svg width="16" height="16" viewBox="0 0 24 24">
				<path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path>
			</svg>
		</a>
	</div>
	<p>Firefox Nightly has experimental support for HTTP/3. In our experience things are pretty good but be aware that you might experience some teething issues, so bear that in mind if you decide to enable and experiment with HTTP/3. If you're happy with that responsibility, you'll first need to download and install the <a href="https://www.mozilla.org/firefox/channel/desktop">latest Firefox Nightly build</a>. Then open Firefox and enable HTTP/3 by visiting "about:config" and setting "network.http.http3.enabled" to true. There are some other parameters that can be tweaked but the defaults should suffice.</p>
	<figure class="kg-card kg-image-card ">

		<img src="https://cf-assets.www.cloudflare.com/zkvhlag99gkb/4UGnSGsahi5Qm5bqtL5qho/dfa340c0825d974ae1164bc1e6eaedda/firefox-h3-about-config.png" alt="about:config can be filtered by using a search term like " http3""="" class="kg-image" width="827" height="370" loading="lazy">

	</figure>
	<p>about:config can be filtered by using a search term like "http3".</p>
	<p>Once HTTP/3 is enabled, you can visit your site to test it out. A straightforward way to check if HTTP/3 was negotiated is to check the Developer Tools "Protocol" column in the "Network" tab (on Windows and Linux the Developer Tools keyboard shortcut is Ctrl+Shift+I, on macOS it's Command+Option+I). This "Protocol" column might not be visible at first, so to enable it right-click one of the column headers and check "Protocol" as shown below.</p>
	<figure class="kg-card kg-image-card ">

		<img src="https://cf-assets.www.cloudflare.com/zkvhlag99gkb/61omvb6CpN2nUSd6mFvqiB/c0a23a5a0551f5583efa1a5d76f7a94f/firefox-h3-protocol-column.png" alt="The menu revealed by right-clicking a Network tab column header." class="kg-image" width="773" height="635" loading="lazy">

	</figure>
	<p>Then reload the page and you should see that "HTTP/3" is reported.</p>
	<figure class="kg-card kg-image-card ">

		<img src="https://cf-assets.www.cloudflare.com/zkvhlag99gkb/1Q8evveLC4cyU0PGHISWmJ/58930682b8a9751208a2a6c3845db588/firefox-h3-success.png" alt="Protocol column contains the entry " http="" 3"="" on="" success"="" class="kg-image" width="773" height="635" loading="lazy">

	</figure>
	<p>The aforementioned teething issues might cause HTTP/3 not to show up initially. When you enable HTTP/3 on a zone, we add a header field such as <code><i>alt-svc: h3-27=":443"; ma=86400, h3-28=":443"; ma=86400, h3-29=":443"; ma=86400</i></code> to all responses for that zone. Clients see this as an advertisement to try HTTP/3 out and will take up the offer on the <b>next</b> request. So to make this happen you can reload the page but make sure that you bypass the local browser cache (via the "Disable Cache" checkbox, or use the Shift-F5 key combo) or else you'll just see the protocol used to fetch the resource the first time around. Finally, Firefox provides the "about:networking" page which provides a list of visited zones and the HTTP version that was used to load them; for example, this very blog.</p>
	<figure class="kg-card kg-image-card ">

		<img src="https://cf-assets.www.cloudflare.com/zkvhlag99gkb/72pladWtRSe3QS38rhRR0F/59b97837d711a7f5bad8cf94f1d9cb43/firefox-h3-about-networking.png" alt="about:networking contains a table of visited zones and the connection properties." class="kg-image" width="816" height="213" loading="lazy">

	</figure>
	<p>about:networking contains a table of all visited zones and the connection properties.</p>
	<p>Sometimes browsers can get sticky to an existing HTTP connection and will refuse to start an HTTP/3 connection, this is hard to detect by humans, so sometimes the best option is to close the app completely and reopen it. Finally, we've also seen some interactions with Service Workers that make it appear that a resource was fetched from the network using HTTP/1.1, when in fact it was fetched from the local Service Worker cache. In such cases if you're keen to see HTTP/3 in action then you'll need to deregister the Service Worker. If you're in doubt about what is happening on the network it is often useful to verify things independently, for example capturing a packet trace and dissecting it with Wireshark.</p>
	<div class="flex anchor relative">
		<h2 id="whats-next">What’s next?</h2>
		<a href="https://blog.cloudflare.com/#whats-next" aria-hidden="true" class="relative sm:absolute sm:-left-5">
			<svg width="16" height="16" viewBox="0 0 24 24">
				<path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path>
			</svg>
		</a>
	</div>
	<p>The QUIC Working Group recently <a href="https://mailarchive.ietf.org/arch/msg/quic/F7wvKGnA1FJasmaE35XIxsc2Tno">announced a "Working Group Last Call"</a>, which marks an important milestone in the continued maturity of the standards. From the announcement:</p>
	<blockquote>
		<p><i>After more than three and a half years and substantial discussion, all 845 of the design issues raised against the QUIC protocol drafts have gained consensus or have a proposed resolution. In that time the protocol has been considerably transformed; it has become more secure, much more widely implemented, and has been shown to be interoperable. Both the Chairs and the Editors feel that it is ready to proceed in standardisation.</i></p>
	</blockquote>
	<p>The coming months will see the specifications settle and we anticipate that implementations will continue to improve their QUIC and HTTP/3 support, eventually enabling it in their stable channels. We're pleased to continue working with <a href="https://www.cloudflare.com/case-studies/mozilla">industry partners such as Mozilla</a> to help build a better Internet together.</p>
	<p>In the meantime, you might want to <a href="https://developers.cloudflare.com/http3/intro">check out our guides</a> to testing with other implementations such as Chrome Canary or curl. As compatibility becomes proven, implementations will shift towards optimizing their performance; you can read about Cloudflare's efforts on <a href="https://blog.cloudflare.com/http-3-vs-http-2">comparing HTTP/3 to HTTP/2</a> and the work we've done to improve performance by <a href="https://blog.cloudflare.com/cubic-and-hystart-support-in-quiche">adding support for CUBIC and HyStart++</a> to our congestion control module.</p>
</div>